!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SoftPhone=e():n.SoftPhone=e()}(this,(function(){return function(n){var e={};function t(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var i in n)t.d(r,i,function(e){return n[e]}.bind(null,i));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=5)}([function(n,e,t){"use strict";const r={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};r.localCName=r.generateIdentifier(),r.splitLines=function(n){return n.trim().split("\n").map(n=>n.trim())},r.splitSections=function(n){return n.split("\nm=").map((n,e)=>(e>0?"m="+n:n).trim()+"\r\n")},r.getDescription=function(n){const e=r.splitSections(n);return e&&e[0]},r.getMediaSections=function(n){const e=r.splitSections(n);return e.shift(),e},r.matchPrefix=function(n,e){return r.splitLines(n).filter(n=>0===n.indexOf(e))},r.parseCandidate=function(n){let e;e=0===n.indexOf("a=candidate:")?n.substring(12).split(" "):n.substring(10).split(" ");const t={foundation:e[0],component:{1:"rtp",2:"rtcp"}[e[1]]||e[1],protocol:e[2].toLowerCase(),priority:parseInt(e[3],10),ip:e[4],address:e[4],port:parseInt(e[5],10),type:e[7]};for(let n=8;n<e.length;n+=2)switch(e[n]){case"raddr":t.relatedAddress=e[n+1];break;case"rport":t.relatedPort=parseInt(e[n+1],10);break;case"tcptype":t.tcpType=e[n+1];break;case"ufrag":t.ufrag=e[n+1],t.usernameFragment=e[n+1];break;default:void 0===t[e[n]]&&(t[e[n]]=e[n+1])}return t},r.writeCandidate=function(n){const e=[];e.push(n.foundation);const t=n.component;"rtp"===t?e.push(1):"rtcp"===t?e.push(2):e.push(t),e.push(n.protocol.toUpperCase()),e.push(n.priority),e.push(n.address||n.ip),e.push(n.port);const r=n.type;return e.push("typ"),e.push(r),"host"!==r&&n.relatedAddress&&n.relatedPort&&(e.push("raddr"),e.push(n.relatedAddress),e.push("rport"),e.push(n.relatedPort)),n.tcpType&&"tcp"===n.protocol.toLowerCase()&&(e.push("tcptype"),e.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(e.push("ufrag"),e.push(n.usernameFragment||n.ufrag)),"candidate:"+e.join(" ")},r.parseIceOptions=function(n){return n.substring(14).split(" ")},r.parseRtpMap=function(n){let e=n.substring(9).split(" ");const t={payloadType:parseInt(e.shift(),10)};return e=e[0].split("/"),t.name=e[0],t.clockRate=parseInt(e[1],10),t.channels=3===e.length?parseInt(e[2],10):1,t.numChannels=t.channels,t},r.writeRtpMap=function(n){let e=n.payloadType;void 0!==n.preferredPayloadType&&(e=n.preferredPayloadType);const t=n.channels||n.numChannels||1;return"a=rtpmap:"+e+" "+n.name+"/"+n.clockRate+(1!==t?"/"+t:"")+"\r\n"},r.parseExtmap=function(n){const e=n.substring(9).split(" ");return{id:parseInt(e[0],10),direction:e[0].indexOf("/")>0?e[0].split("/")[1]:"sendrecv",uri:e[1],attributes:e.slice(2).join(" ")}},r.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&"sendrecv"!==n.direction?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+"\r\n"},r.parseFmtp=function(n){const e={};let t;const r=n.substring(n.indexOf(" ")+1).split(";");for(let n=0;n<r.length;n++)t=r[n].trim().split("="),e[t[0].trim()]=t[1];return e},r.writeFmtp=function(n){let e="",t=n.payloadType;if(void 0!==n.preferredPayloadType&&(t=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const r=[];Object.keys(n.parameters).forEach(e=>{void 0!==n.parameters[e]?r.push(e+"="+n.parameters[e]):r.push(e)}),e+="a=fmtp:"+t+" "+r.join(";")+"\r\n"}return e},r.parseRtcpFb=function(n){const e=n.substring(n.indexOf(" ")+1).split(" ");return{type:e.shift(),parameter:e.join(" ")}},r.writeRtcpFb=function(n){let e="",t=n.payloadType;return void 0!==n.preferredPayloadType&&(t=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(n=>{e+="a=rtcp-fb:"+t+" "+n.type+(n.parameter&&n.parameter.length?" "+n.parameter:"")+"\r\n"}),e},r.parseSsrcMedia=function(n){const e=n.indexOf(" "),t={ssrc:parseInt(n.substring(7,e),10)},r=n.indexOf(":",e);return r>-1?(t.attribute=n.substring(e+1,r),t.value=n.substring(r+1)):t.attribute=n.substring(e+1),t},r.parseSsrcGroup=function(n){const e=n.substring(13).split(" ");return{semantics:e.shift(),ssrcs:e.map(n=>parseInt(n,10))}},r.getMid=function(n){const e=r.matchPrefix(n,"a=mid:")[0];if(e)return e.substring(6)},r.parseFingerprint=function(n){const e=n.substring(14).split(" ");return{algorithm:e[0].toLowerCase(),value:e[1].toUpperCase()}},r.getDtlsParameters=function(n,e){return{role:"auto",fingerprints:r.matchPrefix(n+e,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(n,e){let t="a=setup:"+e+"\r\n";return n.fingerprints.forEach(n=>{t+="a=fingerprint:"+n.algorithm+" "+n.value+"\r\n"}),t},r.parseCryptoLine=function(n){const e=n.substring(9).split(" ");return{tag:parseInt(e[0],10),cryptoSuite:e[1],keyParams:e[2],sessionParams:e.slice(3)}},r.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+("object"==typeof n.keyParams?r.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(n){if(0!==n.indexOf("inline:"))return null;const e=n.substring(7).split("|");return{keyMethod:"inline",keySalt:e[0],lifeTime:e[1],mkiValue:e[2]?e[2].split(":")[0]:void 0,mkiLength:e[2]?e[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},r.getCryptoParameters=function(n,e){return r.matchPrefix(n+e,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(n,e){const t=r.matchPrefix(n+e,"a=ice-ufrag:")[0],i=r.matchPrefix(n+e,"a=ice-pwd:")[0];return t&&i?{usernameFragment:t.substring(12),password:i.substring(10)}:null},r.writeIceParameters=function(n){let e="a=ice-ufrag:"+n.usernameFragment+"\r\na=ice-pwd:"+n.password+"\r\n";return n.iceLite&&(e+="a=ice-lite\r\n"),e},r.parseRtpParameters=function(n){const e={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},t=r.splitLines(n)[0].split(" ");e.profile=t[2];for(let i=3;i<t.length;i++){const s=t[i],a=r.matchPrefix(n,"a=rtpmap:"+s+" ")[0];if(a){const t=r.parseRtpMap(a),i=r.matchPrefix(n,"a=fmtp:"+s+" ");switch(t.parameters=i.length?r.parseFmtp(i[0]):{},t.rtcpFeedback=r.matchPrefix(n,"a=rtcp-fb:"+s+" ").map(r.parseRtcpFb),e.codecs.push(t),t.name.toUpperCase()){case"RED":case"ULPFEC":e.fecMechanisms.push(t.name.toUpperCase())}}}r.matchPrefix(n,"a=extmap:").forEach(n=>{e.headerExtensions.push(r.parseExtmap(n))});const i=r.matchPrefix(n,"a=rtcp-fb:* ").map(r.parseRtcpFb);return e.codecs.forEach(n=>{i.forEach(e=>{n.rtcpFeedback.find(n=>n.type===e.type&&n.parameter===e.parameter)||n.rtcpFeedback.push(e)})}),e},r.writeRtpDescription=function(n,e){let t="";t+="m="+n+" ",t+=e.codecs.length>0?"9":"0",t+=" "+(e.profile||"UDP/TLS/RTP/SAVPF")+" ",t+=e.codecs.map(n=>void 0!==n.preferredPayloadType?n.preferredPayloadType:n.payloadType).join(" ")+"\r\n",t+="c=IN IP4 0.0.0.0\r\n",t+="a=rtcp:9 IN IP4 0.0.0.0\r\n",e.codecs.forEach(n=>{t+=r.writeRtpMap(n),t+=r.writeFmtp(n),t+=r.writeRtcpFb(n)});let i=0;return e.codecs.forEach(n=>{n.maxptime>i&&(i=n.maxptime)}),i>0&&(t+="a=maxptime:"+i+"\r\n"),e.headerExtensions&&e.headerExtensions.forEach(n=>{t+=r.writeExtmap(n)}),t},r.parseRtpEncodingParameters=function(n){const e=[],t=r.parseRtpParameters(n),i=-1!==t.fecMechanisms.indexOf("RED"),s=-1!==t.fecMechanisms.indexOf("ULPFEC"),a=r.matchPrefix(n,"a=ssrc:").map(n=>r.parseSsrcMedia(n)).filter(n=>"cname"===n.attribute),o=a.length>0&&a[0].ssrc;let c;const u=r.matchPrefix(n,"a=ssrc-group:FID").map(n=>n.substring(17).split(" ").map(n=>parseInt(n,10)));u.length>0&&u[0].length>1&&u[0][0]===o&&(c=u[0][1]),t.codecs.forEach(n=>{if("RTX"===n.name.toUpperCase()&&n.parameters.apt){let t={ssrc:o,codecPayloadType:parseInt(n.parameters.apt,10)};o&&c&&(t.rtx={ssrc:c}),e.push(t),i&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:o,mechanism:s?"red+ulpfec":"red"},e.push(t))}}),0===e.length&&o&&e.push({ssrc:o});let l=r.matchPrefix(n,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substring(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substring(5),10)*.95-16e3:void 0,e.forEach(n=>{n.maxBitrate=l})),e},r.parseRtcpParameters=function(n){const e={},t=r.matchPrefix(n,"a=ssrc:").map(n=>r.parseSsrcMedia(n)).filter(n=>"cname"===n.attribute)[0];t&&(e.cname=t.value,e.ssrc=t.ssrc);const i=r.matchPrefix(n,"a=rtcp-rsize");e.reducedSize=i.length>0,e.compound=0===i.length;const s=r.matchPrefix(n,"a=rtcp-mux");return e.mux=s.length>0,e},r.writeRtcpParameters=function(n){let e="";return n.reducedSize&&(e+="a=rtcp-rsize\r\n"),n.mux&&(e+="a=rtcp-mux\r\n"),void 0!==n.ssrc&&n.cname&&(e+="a=ssrc:"+n.ssrc+" cname:"+n.cname+"\r\n"),e},r.parseMsid=function(n){let e;const t=r.matchPrefix(n,"a=msid:");if(1===t.length)return e=t[0].substring(7).split(" "),{stream:e[0],track:e[1]};const i=r.matchPrefix(n,"a=ssrc:").map(n=>r.parseSsrcMedia(n)).filter(n=>"msid"===n.attribute);return i.length>0?(e=i[0].value.split(" "),{stream:e[0],track:e[1]}):void 0},r.parseSctpDescription=function(n){const e=r.parseMLine(n),t=r.matchPrefix(n,"a=max-message-size:");let i;t.length>0&&(i=parseInt(t[0].substring(19),10)),isNaN(i)&&(i=65536);const s=r.matchPrefix(n,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substring(12),10),protocol:e.fmt,maxMessageSize:i};const a=r.matchPrefix(n,"a=sctpmap:");if(a.length>0){const n=a[0].substring(10).split(" ");return{port:parseInt(n[0],10),protocol:n[1],maxMessageSize:i}}},r.writeSctpDescription=function(n,e){let t=[];return t="DTLS/SCTP"!==n.protocol?["m="+n.kind+" 9 "+n.protocol+" "+e.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+e.port+"\r\n"]:["m="+n.kind+" 9 "+n.protocol+" "+e.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+e.port+" "+e.protocol+" 65535\r\n"],void 0!==e.maxMessageSize&&t.push("a=max-message-size:"+e.maxMessageSize+"\r\n"),t.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,22)},r.writeSessionBoilerplate=function(n,e,t){let i;const s=void 0!==e?e:2;i=n||r.generateSessionId();return"v=0\r\no="+(t||"thisisadapterortc")+" "+i+" "+s+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.getDirection=function(n,e){const t=r.splitLines(n);for(let n=0;n<t.length;n++)switch(t[n]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return t[n].substring(2)}return e?r.getDirection(e):"sendrecv"},r.getKind=function(n){return r.splitLines(n)[0].split(" ")[0].substring(2)},r.isRejected=function(n){return"0"===n.split(" ",2)[1]},r.parseMLine=function(n){const e=r.splitLines(n)[0].substring(2).split(" ");return{kind:e[0],port:parseInt(e[1],10),protocol:e[2],fmt:e.slice(3).join(" ")}},r.parseOLine=function(n){const e=r.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:e[0],sessionId:e[1],sessionVersion:parseInt(e[2],10),netType:e[3],addressType:e[4],address:e[5]}},r.isValidSDP=function(n){if("string"!=typeof n||0===n.length)return!1;const e=r.splitLines(n);for(let n=0;n<e.length;n++)if(e[n].length<2||"="!==e[n].charAt(1))return!1;return!0},n.exports=r},function(n,e,t){var r,i,s;i=[e,n],void 0===(s="function"==typeof(r=function(n,e){"use strict";var t=5e3,r="callback";function i(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function s(n){try{delete window[n]}catch(e){window[n]=void 0}}function a(n){var e=document.getElementById(n);e&&document.getElementsByTagName("head")[0].removeChild(e)}e.exports=function(n){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=n,c=e.timeout||t,u=e.jsonpCallback||r,l=void 0;return new Promise((function(t,r){var p=e.jsonpCallbackFunction||i(),d=u+"_"+p;window[p]=function(n){t({ok:!0,json:function(){return Promise.resolve(n)}}),l&&clearTimeout(l),a(d),s(p)},o+=-1===o.indexOf("?")?"?":"&";var f=document.createElement("script");f.setAttribute("src",""+o+u+"="+p),e.charset&&f.setAttribute("charset",e.charset),e.nonce&&f.setAttribute("nonce",e.nonce),e.referrerPolicy&&f.setAttribute("referrerPolicy",e.referrerPolicy),f.id=d,document.getElementsByTagName("head")[0].appendChild(f),l=setTimeout((function(){r(new Error("JSONP request to "+n+" timed out")),s(p),a(d),window[p]=function(){s(p)}}),c),f.onerror=function(){r(new Error("JSONP request to "+n+" failed")),s(p),a(d),l&&clearTimeout(l)}}))}})?r.apply(e,i):r)||(n.exports=s)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;!function(){"use strict";var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_MD5_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD=__webpack_require__(4),ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}!root.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(n){return"[object Array]"===Object.prototype.toString.call(n)}),!ARRAY_BUFFER||!root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(n){return"object"==typeof n&&n.buffer&&n.buffer.constructor===ArrayBuffer});var createOutputMethod=function(n){return function(e){return new Md5(!0).update(e)[n]()}},createMethod=function(){var n=createOutputMethod("hex");NODE_JS&&(n=nodeWrap(n)),n.create=function(){return new Md5},n.update=function(e){return n.create().update(e)};for(var e=0;e<OUTPUT_TYPES.length;++e){var t=OUTPUT_TYPES[e];n[t]=createOutputMethod(t)}return n},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(n){if("string"==typeof n)return crypto.createHash("md5").update(n,"utf8").digest("hex");if(null==n)throw ERROR;return n.constructor===ArrayBuffer&&(n=new Uint8Array(n)),Array.isArray(n)||ArrayBuffer.isView(n)||n.constructor===Buffer?crypto.createHash("md5").update(new Buffer(n)).digest("hex"):method(n)};return nodeMethod};function Md5(n){if(n)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var e=new ArrayBuffer(68);this.buffer8=new Uint8Array(e),this.blocks=new Uint32Array(e)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(n){if(!this.finalized){var e,t=typeof n;if("string"!==t){if("object"!==t)throw ERROR;if(null===n)throw ERROR;if(ARRAY_BUFFER&&n.constructor===ArrayBuffer)n=new Uint8Array(n);else if(!(Array.isArray(n)||ARRAY_BUFFER&&ArrayBuffer.isView(n)))throw ERROR;e=!0}for(var r,i,s=0,a=n.length,o=this.blocks,c=this.buffer8;s<a;){if(this.hashed&&(this.hashed=!1,o[0]=o[16],o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),e)if(ARRAY_BUFFER)for(i=this.start;s<a&&i<64;++s)c[i++]=n[s];else for(i=this.start;s<a&&i<64;++s)o[i>>2]|=n[s]<<SHIFT[3&i++];else if(ARRAY_BUFFER)for(i=this.start;s<a&&i<64;++s)(r=n.charCodeAt(s))<128?c[i++]=r:r<2048?(c[i++]=192|r>>6,c[i++]=128|63&r):r<55296||r>=57344?(c[i++]=224|r>>12,c[i++]=128|r>>6&63,c[i++]=128|63&r):(r=65536+((1023&r)<<10|1023&n.charCodeAt(++s)),c[i++]=240|r>>18,c[i++]=128|r>>12&63,c[i++]=128|r>>6&63,c[i++]=128|63&r);else for(i=this.start;s<a&&i<64;++s)(r=n.charCodeAt(s))<128?o[i>>2]|=r<<SHIFT[3&i++]:r<2048?(o[i>>2]|=(192|r>>6)<<SHIFT[3&i++],o[i>>2]|=(128|63&r)<<SHIFT[3&i++]):r<55296||r>=57344?(o[i>>2]|=(224|r>>12)<<SHIFT[3&i++],o[i>>2]|=(128|r>>6&63)<<SHIFT[3&i++],o[i>>2]|=(128|63&r)<<SHIFT[3&i++]):(r=65536+((1023&r)<<10|1023&n.charCodeAt(++s)),o[i>>2]|=(240|r>>18)<<SHIFT[3&i++],o[i>>2]|=(128|r>>12&63)<<SHIFT[3&i++],o[i>>2]|=(128|r>>6&63)<<SHIFT[3&i++],o[i>>2]|=(128|63&r)<<SHIFT[3&i++]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,e=this.lastByteIndex;n[e>>2]|=EXTRA[3&e],e>=56&&(this.hashed||this.hash(),n[0]=n[16],n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),n[14]=this.bytes<<3,n[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var n,e,t,r,i,s,a=this.blocks;this.first?e=((e=((n=((n=a[0]-680876937)<<7|n>>>25)-271733879<<0)^(t=((t=(-271733879^(r=((r=(-1732584194^2004318071&n)+a[1]-117830708)<<12|r>>>20)+n<<0)&(-271733879^n))+a[2]-1126478375)<<17|t>>>15)+r<<0)&(r^n))+a[3]-1316259209)<<22|e>>>10)+t<<0:(n=this.h0,e=this.h1,t=this.h2,e=((e+=((n=((n+=((r=this.h3)^e&(t^r))+a[0]-680876936)<<7|n>>>25)+e<<0)^(t=((t+=(e^(r=((r+=(t^n&(e^t))+a[1]-389564586)<<12|r>>>20)+n<<0)&(n^e))+a[2]+606105819)<<17|t>>>15)+r<<0)&(r^n))+a[3]-1044525330)<<22|e>>>10)+t<<0),e=((e+=((n=((n+=(r^e&(t^r))+a[4]-176418897)<<7|n>>>25)+e<<0)^(t=((t+=(e^(r=((r+=(t^n&(e^t))+a[5]+1200080426)<<12|r>>>20)+n<<0)&(n^e))+a[6]-1473231341)<<17|t>>>15)+r<<0)&(r^n))+a[7]-45705983)<<22|e>>>10)+t<<0,e=((e+=((n=((n+=(r^e&(t^r))+a[8]+1770035416)<<7|n>>>25)+e<<0)^(t=((t+=(e^(r=((r+=(t^n&(e^t))+a[9]-1958414417)<<12|r>>>20)+n<<0)&(n^e))+a[10]-42063)<<17|t>>>15)+r<<0)&(r^n))+a[11]-1990404162)<<22|e>>>10)+t<<0,e=((e+=((n=((n+=(r^e&(t^r))+a[12]+1804603682)<<7|n>>>25)+e<<0)^(t=((t+=(e^(r=((r+=(t^n&(e^t))+a[13]-40341101)<<12|r>>>20)+n<<0)&(n^e))+a[14]-1502002290)<<17|t>>>15)+r<<0)&(r^n))+a[15]+1236535329)<<22|e>>>10)+t<<0,e=((e+=((r=((r+=(e^t&((n=((n+=(t^r&(e^t))+a[1]-165796510)<<5|n>>>27)+e<<0)^e))+a[6]-1069501632)<<9|r>>>23)+n<<0)^n&((t=((t+=(n^e&(r^n))+a[11]+643717713)<<14|t>>>18)+r<<0)^r))+a[0]-373897302)<<20|e>>>12)+t<<0,e=((e+=((r=((r+=(e^t&((n=((n+=(t^r&(e^t))+a[5]-701558691)<<5|n>>>27)+e<<0)^e))+a[10]+38016083)<<9|r>>>23)+n<<0)^n&((t=((t+=(n^e&(r^n))+a[15]-660478335)<<14|t>>>18)+r<<0)^r))+a[4]-405537848)<<20|e>>>12)+t<<0,e=((e+=((r=((r+=(e^t&((n=((n+=(t^r&(e^t))+a[9]+568446438)<<5|n>>>27)+e<<0)^e))+a[14]-1019803690)<<9|r>>>23)+n<<0)^n&((t=((t+=(n^e&(r^n))+a[3]-187363961)<<14|t>>>18)+r<<0)^r))+a[8]+1163531501)<<20|e>>>12)+t<<0,e=((e+=((r=((r+=(e^t&((n=((n+=(t^r&(e^t))+a[13]-1444681467)<<5|n>>>27)+e<<0)^e))+a[2]-51403784)<<9|r>>>23)+n<<0)^n&((t=((t+=(n^e&(r^n))+a[7]+1735328473)<<14|t>>>18)+r<<0)^r))+a[12]-1926607734)<<20|e>>>12)+t<<0,e=((e+=((s=(r=((r+=((i=e^t)^(n=((n+=(i^r)+a[5]-378558)<<4|n>>>28)+e<<0))+a[8]-2022574463)<<11|r>>>21)+n<<0)^n)^(t=((t+=(s^e)+a[11]+1839030562)<<16|t>>>16)+r<<0))+a[14]-35309556)<<23|e>>>9)+t<<0,e=((e+=((s=(r=((r+=((i=e^t)^(n=((n+=(i^r)+a[1]-1530992060)<<4|n>>>28)+e<<0))+a[4]+1272893353)<<11|r>>>21)+n<<0)^n)^(t=((t+=(s^e)+a[7]-155497632)<<16|t>>>16)+r<<0))+a[10]-1094730640)<<23|e>>>9)+t<<0,e=((e+=((s=(r=((r+=((i=e^t)^(n=((n+=(i^r)+a[13]+681279174)<<4|n>>>28)+e<<0))+a[0]-358537222)<<11|r>>>21)+n<<0)^n)^(t=((t+=(s^e)+a[3]-722521979)<<16|t>>>16)+r<<0))+a[6]+76029189)<<23|e>>>9)+t<<0,e=((e+=((s=(r=((r+=((i=e^t)^(n=((n+=(i^r)+a[9]-640364487)<<4|n>>>28)+e<<0))+a[12]-421815835)<<11|r>>>21)+n<<0)^n)^(t=((t+=(s^e)+a[15]+530742520)<<16|t>>>16)+r<<0))+a[2]-995338651)<<23|e>>>9)+t<<0,e=((e+=((r=((r+=(e^((n=((n+=(t^(e|~r))+a[0]-198630844)<<6|n>>>26)+e<<0)|~t))+a[7]+1126891415)<<10|r>>>22)+n<<0)^((t=((t+=(n^(r|~e))+a[14]-1416354905)<<15|t>>>17)+r<<0)|~n))+a[5]-57434055)<<21|e>>>11)+t<<0,e=((e+=((r=((r+=(e^((n=((n+=(t^(e|~r))+a[12]+1700485571)<<6|n>>>26)+e<<0)|~t))+a[3]-1894986606)<<10|r>>>22)+n<<0)^((t=((t+=(n^(r|~e))+a[10]-1051523)<<15|t>>>17)+r<<0)|~n))+a[1]-2054922799)<<21|e>>>11)+t<<0,e=((e+=((r=((r+=(e^((n=((n+=(t^(e|~r))+a[8]+1873313359)<<6|n>>>26)+e<<0)|~t))+a[15]-30611744)<<10|r>>>22)+n<<0)^((t=((t+=(n^(r|~e))+a[6]-1560198380)<<15|t>>>17)+r<<0)|~n))+a[13]+1309151649)<<21|e>>>11)+t<<0,e=((e+=((r=((r+=(e^((n=((n+=(t^(e|~r))+a[4]-145523070)<<6|n>>>26)+e<<0)|~t))+a[11]-1120210379)<<10|r>>>22)+n<<0)^((t=((t+=(n^(r|~e))+a[2]+718787259)<<15|t>>>17)+r<<0)|~n))+a[9]-343485551)<<21|e>>>11)+t<<0,this.first?(this.h0=n+1732584193<<0,this.h1=e-271733879<<0,this.h2=t-1732584194<<0,this.h3=r+271733878<<0,this.first=!1):(this.h0=this.h0+n<<0,this.h1=this.h1+e<<0,this.h2=this.h2+t<<0,this.h3=this.h3+r<<0)},Md5.prototype.hex=function(){this.finalize();var n=this.h0,e=this.h1,t=this.h2,r=this.h3;return HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var n=this.h0,e=this.h1,t=this.h2,r=this.h3;return[255&n,n>>8&255,n>>16&255,n>>24&255,255&e,e>>8&255,e>>16&255,e>>24&255,255&t,t>>8&255,t>>16&255,t>>24&255,255&r,r>>8&255,r>>16&255,r>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var n=new ArrayBuffer(16),e=new Uint32Array(n);return e[0]=this.h0,e[1]=this.h1,e[2]=this.h2,e[3]=this.h3,n},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var n,e,t,r="",i=this.array(),s=0;s<15;)n=i[s++],e=i[s++],t=i[s++],r+=BASE64_ENCODE_CHAR[n>>>2]+BASE64_ENCODE_CHAR[63&(n<<4|e>>>4)]+BASE64_ENCODE_CHAR[63&(e<<2|t>>>6)]+BASE64_ENCODE_CHAR[63&t];return n=i[s],r+=BASE64_ENCODE_CHAR[n>>>2]+BASE64_ENCODE_CHAR[n<<4&63]+"=="};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}()},function(module,exports,__webpack_require__){var factory;window,factory=()=>(()=>{var __webpack_modules__={"./lib/JSEncrypt.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"JSEncrypt\": () => (/* binding */ JSEncrypt)\n/* harmony export */ });\n/* harmony import */ var _lib_jsbn_base64__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/jsbn/base64 */ \"./lib/lib/jsbn/base64.js\");\n/* harmony import */ var _JSEncryptRSAKey__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./JSEncryptRSAKey */ \"./lib/JSEncryptRSAKey.js\");\n/* provided dependency */ var process = __webpack_require__(/*! process/browser */ \"./node_modules/process/browser.js\");\nvar _a;\n\n\nvar version = typeof process !== 'undefined'\n    ? (_a = process.env) === null || _a === void 0 ? void 0 : \"3.3.2\"\n    : undefined;\n/**\n *\n * @param {Object} [options = {}] - An object to customize JSEncrypt behaviour\n * possible parameters are:\n * - default_key_size        {number}  default: 1024 the key size in bit\n * - default_public_exponent {string}  default: '010001' the hexadecimal representation of the public exponent\n * - log                     {boolean} default: false whether log warn/error or not\n * @constructor\n */\nvar JSEncrypt = /** @class */ (function () {\n    function JSEncrypt(options) {\n        if (options === void 0) { options = {}; }\n        options = options || {};\n        this.default_key_size = options.default_key_size\n            ? parseInt(options.default_key_size, 10)\n            : 1024;\n        this.default_public_exponent = options.default_public_exponent || \"010001\"; // 65537 default openssl public exponent for rsa key type\n        this.log = options.log || false;\n        // The private and public key.\n        this.key = null;\n    }\n    /**\n     * Method to set the rsa key parameter (one method is enough to set both the public\n     * and the private key, since the private key contains the public key paramenters)\n     * Log a warning if logs are enabled\n     * @param {Object|string} key the pem encoded string or an object (with or without header/footer)\n     * @public\n     */\n    JSEncrypt.prototype.setKey = function (key) {\n        if (this.log && this.key) {\n            console.warn(\"A key was already set, overriding existing.\");\n        }\n        this.key = new _JSEncryptRSAKey__WEBPACK_IMPORTED_MODULE_1__.JSEncryptRSAKey(key);\n    };\n    /**\n     * Proxy method for setKey, for api compatibility\n     * @see setKey\n     * @public\n     */\n    JSEncrypt.prototype.setPrivateKey = function (privkey) {\n        // Create the key.\n        this.setKey(privkey);\n    };\n    /**\n     * Proxy method for setKey, for api compatibility\n     * @see setKey\n     * @public\n     */\n    JSEncrypt.prototype.setPublicKey = function (pubkey) {\n        // Sets the public key.\n        this.setKey(pubkey);\n    };\n    /**\n     * Proxy method for RSAKey object's decrypt, decrypt the string using the private\n     * components of the rsa key object. Note that if the object was not set will be created\n     * on the fly (by the getKey method) using the parameters passed in the JSEncrypt constructor\n     * @param {string} str base64 encoded crypted string to decrypt\n     * @return {string} the decrypted string\n     * @public\n     */\n    JSEncrypt.prototype.decrypt = function (str) {\n        // Return the decrypted string.\n        try {\n            return this.getKey().decrypt((0,_lib_jsbn_base64__WEBPACK_IMPORTED_MODULE_0__.b64tohex)(str));\n        }\n        catch (ex) {\n            return false;\n        }\n    };\n    /**\n     * Proxy method for RSAKey object's encrypt, encrypt the string using the public\n     * components of the rsa key object. Note that if the object was not set will be created\n     * on the fly (by the getKey method) using the parameters passed in the JSEncrypt constructor\n     * @param {string} str the string to encrypt\n     * @return {string} the encrypted string encoded in base64\n     * @public\n     */\n    JSEncrypt.prototype.encrypt = function (str) {\n        // Return the encrypted string.\n        try {\n            return (0,_lib_jsbn_base64__WEBPACK_IMPORTED_MODULE_0__.hex2b64)(this.getKey().encrypt(str));\n        }\n        catch (ex) {\n            return false;\n        }\n    };\n    /**\n     * Proxy method for RSAKey object's sign.\n     * @param {string} str the string to sign\n     * @param {function} digestMethod hash method\n     * @param {string} digestName the name of the hash algorithm\n     * @return {string} the signature encoded in base64\n     * @public\n     */\n    JSEncrypt.prototype.sign = function (str, digestMethod, digestName) {\n        // return the RSA signature of 'str' in 'hex' format.\n        try {\n            return (0,_lib_jsbn_base64__WEBPACK_IMPORTED_MODULE_0__.hex2b64)(this.getKey().sign(str, digestMethod, digestName));\n        }\n        catch (ex) {\n            return false;\n        }\n    };\n    /**\n     * Proxy method for RSAKey object's verify.\n     * @param {string} str the string to verify\n     * @param {string} signature the signature encoded in base64 to compare the string to\n     * @param {function} digestMethod hash method\n     * @return {boolean} whether the data and signature match\n     * @public\n     */\n    JSEncrypt.prototype.verify = function (str, signature, digestMethod) {\n        // Return the decrypted 'digest' of the signature.\n        try {\n            return this.getKey().verify(str, (0,_lib_jsbn_base64__WEBPACK_IMPORTED_MODULE_0__.b64tohex)(signature), digestMethod);\n        }\n        catch (ex) {\n            return false;\n        }\n    };\n    /**\n     * Getter for the current JSEncryptRSAKey object. If it doesn't exists a new object\n     * will be created and returned\n     * @param {callback} [cb] the callback to be called if we want the key to be generated\n     * in an async fashion\n     * @returns {JSEncryptRSAKey} the JSEncryptRSAKey object\n     * @public\n     */\n    JSEncrypt.prototype.getKey = function (cb) {\n        // Only create new if it does not exist.\n        if (!this.key) {\n            // Get a new private key.\n            this.key = new _JSEncryptRSAKey__WEBPACK_IMPORTED_MODULE_1__.JSEncryptRSAKey();\n            if (cb && {}.toString.call(cb) === \"[object Function]\") {\n                this.key.generateAsync(this.default_key_size, this.default_public_exponent, cb);\n                return;\n            }\n            // Generate the key.\n            this.key.generate(this.default_key_size, this.default_public_exponent);\n        }\n        return this.key;\n    };\n    /**\n     * Returns the pem encoded representation of the private key\n     * If the key doesn't exists a new key will be created\n     * @returns {string} pem encoded representation of the private key WITH header and footer\n     * @public\n     */\n    JSEncrypt.prototype.getPrivateKey = function () {\n        // Return the private representation of this key.\n        return this.getKey().getPrivateKey();\n    };\n    /**\n     * Returns the pem encoded representation of the private key\n     * If the key doesn't exists a new key will be created\n     * @returns {string} pem encoded representation of the private key WITHOUT header and footer\n     * @public\n     */\n    JSEncrypt.prototype.getPrivateKeyB64 = function () {\n        // Return the private representation of this key.\n        return this.getKey().getPrivateBaseKeyB64();\n    };\n    /**\n     * Returns the pem encoded representation of the public key\n     * If the key doesn't exists a new key will be created\n     * @returns {string} pem encoded representation of the public key WITH header and footer\n     * @public\n     */\n    JSEncrypt.prototype.getPublicKey = function () {\n        // Return the private representation of this key.\n        return this.getKey().getPublicKey();\n    };\n    /**\n     * Returns the pem encoded representation of the public key\n     * If the key doesn't exists a new key will be created\n     * @returns {string} pem encoded representation of the public key WITHOUT header and footer\n     * @public\n     */\n    JSEncrypt.prototype.getPublicKeyB64 = function () {\n        // Return the private representation of this key.\n        return this.getKey().getPublicBaseKeyB64();\n    };\n    JSEncrypt.version = version;\n    return JSEncrypt;\n}());\n\n\n\n//# sourceURL=webpack://JSEncrypt/./lib/JSEncrypt.js?")},"./lib/JSEncryptRSAKey.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "JSEncryptRSAKey": () => (/* binding */ JSEncryptRSAKey)\n/* harmony export */ });\n/* harmony import */ var _lib_jsbn_base64__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/jsbn/base64 */ "./lib/lib/jsbn/base64.js");\n/* harmony import */ var _lib_asn1js_hex__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/asn1js/hex */ "./lib/lib/asn1js/hex.js");\n/* harmony import */ var _lib_asn1js_base64__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/asn1js/base64 */ "./lib/lib/asn1js/base64.js");\n/* harmony import */ var _lib_asn1js_asn1__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/asn1js/asn1 */ "./lib/lib/asn1js/asn1.js");\n/* harmony import */ var _lib_jsbn_rsa__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/jsbn/rsa */ "./lib/lib/jsbn/rsa.js");\n/* harmony import */ var _lib_jsbn_jsbn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lib/jsbn/jsbn */ "./lib/lib/jsbn/jsbn.js");\n/* harmony import */ var _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lib/jsrsasign/asn1-1.0 */ "./lib/lib/jsrsasign/asn1-1.0.js");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n/**\n * Create a new JSEncryptRSAKey that extends Tom Wu\'s RSA key object.\n * This object is just a decorator for parsing the key parameter\n * @param {string|Object} key - The key in string format, or an object containing\n * the parameters needed to build a RSAKey object.\n * @constructor\n */\nvar JSEncryptRSAKey = /** @class */ (function (_super) {\n    __extends(JSEncryptRSAKey, _super);\n    function JSEncryptRSAKey(key) {\n        var _this = _super.call(this) || this;\n        // Call the super constructor.\n        //  RSAKey.call(this);\n        // If a key key was provided.\n        if (key) {\n            // If this is a string...\n            if (typeof key === "string") {\n                _this.parseKey(key);\n            }\n            else if (JSEncryptRSAKey.hasPrivateKeyProperty(key) ||\n                JSEncryptRSAKey.hasPublicKeyProperty(key)) {\n                // Set the values for the key.\n                _this.parsePropertiesFrom(key);\n            }\n        }\n        return _this;\n    }\n    /**\n     * Method to parse a pem encoded string containing both a public or private key.\n     * The method will translate the pem encoded string in a der encoded string and\n     * will parse private key and public key parameters. This method accepts public key\n     * in the rsaencryption pkcs #1 format (oid: 1.2.840.113549.1.1.1).\n     *\n     * @todo Check how many rsa formats use the same format of pkcs #1.\n     *\n     * The format is defined as:\n     * PublicKeyInfo ::= SEQUENCE {\n     *   algorithm       AlgorithmIdentifier,\n     *   PublicKey       BIT STRING\n     * }\n     * Where AlgorithmIdentifier is:\n     * AlgorithmIdentifier ::= SEQUENCE {\n     *   algorithm       OBJECT IDENTIFIER,     the OID of the enc algorithm\n     *   parameters      ANY DEFINED BY algorithm OPTIONAL (NULL for PKCS #1)\n     * }\n     * and PublicKey is a SEQUENCE encapsulated in a BIT STRING\n     * RSAPublicKey ::= SEQUENCE {\n     *   modulus           INTEGER,  -- n\n     *   publicExponent    INTEGER   -- e\n     * }\n     * it\'s possible to examine the structure of the keys obtained from openssl using\n     * an asn.1 dumper as the one used here to parse the components: http://lapo.it/asn1js/\n     * @argument {string} pem the pem encoded string, can include the BEGIN/END header/footer\n     * @private\n     */\n    JSEncryptRSAKey.prototype.parseKey = function (pem) {\n        try {\n            var modulus = 0;\n            var public_exponent = 0;\n            var reHex = /^\\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\\s*)+$/;\n            var der = reHex.test(pem) ? _lib_asn1js_hex__WEBPACK_IMPORTED_MODULE_1__.Hex.decode(pem) : _lib_asn1js_base64__WEBPACK_IMPORTED_MODULE_2__.Base64.unarmor(pem);\n            var asn1 = _lib_asn1js_asn1__WEBPACK_IMPORTED_MODULE_3__.ASN1.decode(der);\n            // Fixes a bug with OpenSSL 1.0+ private keys\n            if (asn1.sub.length === 3) {\n                asn1 = asn1.sub[2].sub[0];\n            }\n            if (asn1.sub.length === 9) {\n                // Parse the private key.\n                modulus = asn1.sub[1].getHexStringValue(); // bigint\n                this.n = (0,_lib_jsbn_jsbn__WEBPACK_IMPORTED_MODULE_5__.parseBigInt)(modulus, 16);\n                public_exponent = asn1.sub[2].getHexStringValue(); // int\n                this.e = parseInt(public_exponent, 16);\n                var private_exponent = asn1.sub[3].getHexStringValue(); // bigint\n                this.d = (0,_lib_jsbn_jsbn__WEBPACK_IMPORTED_MODULE_5__.parseBigInt)(private_exponent, 16);\n                var prime1 = asn1.sub[4].getHexStringValue(); // bigint\n                this.p = (0,_lib_jsbn_jsbn__WEBPACK_IMPORTED_MODULE_5__.parseBigInt)(prime1, 16);\n                var prime2 = asn1.sub[5].getHexStringValue(); // bigint\n                this.q = (0,_lib_jsbn_jsbn__WEBPACK_IMPORTED_MODULE_5__.parseBigInt)(prime2, 16);\n                var exponent1 = asn1.sub[6].getHexStringValue(); // bigint\n                this.dmp1 = (0,_lib_jsbn_jsbn__WEBPACK_IMPORTED_MODULE_5__.parseBigInt)(exponent1, 16);\n                var exponent2 = asn1.sub[7].getHexStringValue(); // bigint\n                this.dmq1 = (0,_lib_jsbn_jsbn__WEBPACK_IMPORTED_MODULE_5__.parseBigInt)(exponent2, 16);\n                var coefficient = asn1.sub[8].getHexStringValue(); // bigint\n                this.coeff = (0,_lib_jsbn_jsbn__WEBPACK_IMPORTED_MODULE_5__.parseBigInt)(coefficient, 16);\n            }\n            else if (asn1.sub.length === 2) {\n                if (asn1.sub[0].sub) {\n                    // Parse ASN.1 SubjectPublicKeyInfo type as defined by X.509\n                    var bit_string = asn1.sub[1];\n                    var sequence = bit_string.sub[0];\n                    modulus = sequence.sub[0].getHexStringValue();\n                    this.n = (0,_lib_jsbn_jsbn__WEBPACK_IMPORTED_MODULE_5__.parseBigInt)(modulus, 16);\n                    public_exponent = sequence.sub[1].getHexStringValue();\n                    this.e = parseInt(public_exponent, 16);\n                }\n                else {\n                    // Parse ASN.1 RSAPublicKey type as defined by PKCS #1\n                    modulus = asn1.sub[0].getHexStringValue();\n                    this.n = (0,_lib_jsbn_jsbn__WEBPACK_IMPORTED_MODULE_5__.parseBigInt)(modulus, 16);\n                    public_exponent = asn1.sub[1].getHexStringValue();\n                    this.e = parseInt(public_exponent, 16);\n                }\n            }\n            else {\n                return false;\n            }\n            return true;\n        }\n        catch (ex) {\n            return false;\n        }\n    };\n    /**\n     * Translate rsa parameters in a hex encoded string representing the rsa key.\n     *\n     * The translation follow the ASN.1 notation :\n     * RSAPrivateKey ::= SEQUENCE {\n     *   version           Version,\n     *   modulus           INTEGER,  -- n\n     *   publicExponent    INTEGER,  -- e\n     *   privateExponent   INTEGER,  -- d\n     *   prime1            INTEGER,  -- p\n     *   prime2            INTEGER,  -- q\n     *   exponent1         INTEGER,  -- d mod (p1)\n     *   exponent2         INTEGER,  -- d mod (q-1)\n     *   coefficient       INTEGER,  -- (inverse of q) mod p\n     * }\n     * @returns {string}  DER Encoded String representing the rsa private key\n     * @private\n     */\n    JSEncryptRSAKey.prototype.getPrivateBaseKey = function () {\n        var options = {\n            array: [\n                new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERInteger({ int: 0 }),\n                new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERInteger({ bigint: this.n }),\n                new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERInteger({ int: this.e }),\n                new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERInteger({ bigint: this.d }),\n                new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERInteger({ bigint: this.p }),\n                new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERInteger({ bigint: this.q }),\n                new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERInteger({ bigint: this.dmp1 }),\n                new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERInteger({ bigint: this.dmq1 }),\n                new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERInteger({ bigint: this.coeff }),\n            ],\n        };\n        var seq = new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERSequence(options);\n        return seq.getEncodedHex();\n    };\n    /**\n     * base64 (pem) encoded version of the DER encoded representation\n     * @returns {string} pem encoded representation without header and footer\n     * @public\n     */\n    JSEncryptRSAKey.prototype.getPrivateBaseKeyB64 = function () {\n        return (0,_lib_jsbn_base64__WEBPACK_IMPORTED_MODULE_0__.hex2b64)(this.getPrivateBaseKey());\n    };\n    /**\n     * Translate rsa parameters in a hex encoded string representing the rsa public key.\n     * The representation follow the ASN.1 notation :\n     * PublicKeyInfo ::= SEQUENCE {\n     *   algorithm       AlgorithmIdentifier,\n     *   PublicKey       BIT STRING\n     * }\n     * Where AlgorithmIdentifier is:\n     * AlgorithmIdentifier ::= SEQUENCE {\n     *   algorithm       OBJECT IDENTIFIER,     the OID of the enc algorithm\n     *   parameters      ANY DEFINED BY algorithm OPTIONAL (NULL for PKCS #1)\n     * }\n     * and PublicKey is a SEQUENCE encapsulated in a BIT STRING\n     * RSAPublicKey ::= SEQUENCE {\n     *   modulus           INTEGER,  -- n\n     *   publicExponent    INTEGER   -- e\n     * }\n     * @returns {string} DER Encoded String representing the rsa public key\n     * @private\n     */\n    JSEncryptRSAKey.prototype.getPublicBaseKey = function () {\n        var first_sequence = new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERSequence({\n            array: [\n                new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERObjectIdentifier({ oid: "1.2.840.113549.1.1.1" }),\n                new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERNull(),\n            ],\n        });\n        var second_sequence = new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERSequence({\n            array: [\n                new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERInteger({ bigint: this.n }),\n                new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERInteger({ int: this.e }),\n            ],\n        });\n        var bit_string = new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERBitString({\n            hex: "00" + second_sequence.getEncodedHex(),\n        });\n        var seq = new _lib_jsrsasign_asn1_1_0__WEBPACK_IMPORTED_MODULE_6__.KJUR.asn1.DERSequence({\n            array: [first_sequence, bit_string],\n        });\n        return seq.getEncodedHex();\n    };\n    /**\n     * base64 (pem) encoded version of the DER encoded representation\n     * @returns {string} pem encoded representation without header and footer\n     * @public\n     */\n    JSEncryptRSAKey.prototype.getPublicBaseKeyB64 = function () {\n        return (0,_lib_jsbn_base64__WEBPACK_IMPORTED_MODULE_0__.hex2b64)(this.getPublicBaseKey());\n    };\n    /**\n     * wrap the string in block of width chars. The default value for rsa keys is 64\n     * characters.\n     * @param {string} str the pem encoded string without header and footer\n     * @param {Number} [width=64] - the length the string has to be wrapped at\n     * @returns {string}\n     * @private\n     */\n    JSEncryptRSAKey.wordwrap = function (str, width) {\n        width = width || 64;\n        if (!str) {\n            return str;\n        }\n        var regex = "(.{1," + width + "})( +|$\\n?)|(.{1," + width + "})";\n        return str.match(RegExp(regex, "g")).join("\\n");\n    };\n    /**\n     * Retrieve the pem encoded private key\n     * @returns {string} the pem encoded private key with header/footer\n     * @public\n     */\n    JSEncryptRSAKey.prototype.getPrivateKey = function () {\n        var key = "-----BEGIN RSA PRIVATE KEY-----\\n";\n        key += JSEncryptRSAKey.wordwrap(this.getPrivateBaseKeyB64()) + "\\n";\n        key += "-----END RSA PRIVATE KEY-----";\n        return key;\n    };\n    /**\n     * Retrieve the pem encoded public key\n     * @returns {string} the pem encoded public key with header/footer\n     * @public\n     */\n    JSEncryptRSAKey.prototype.getPublicKey = function () {\n        var key = "-----BEGIN PUBLIC KEY-----\\n";\n        key += JSEncryptRSAKey.wordwrap(this.getPublicBaseKeyB64()) + "\\n";\n        key += "-----END PUBLIC KEY-----";\n        return key;\n    };\n    /**\n     * Check if the object contains the necessary parameters to populate the rsa modulus\n     * and public exponent parameters.\n     * @param {Object} [obj={}] - An object that may contain the two public key\n     * parameters\n     * @returns {boolean} true if the object contains both the modulus and the public exponent\n     * properties (n and e)\n     * @todo check for types of n and e. N should be a parseable bigInt object, E should\n     * be a parseable integer number\n     * @private\n     */\n    JSEncryptRSAKey.hasPublicKeyProperty = function (obj) {\n        obj = obj || {};\n        return obj.hasOwnProperty("n") && obj.hasOwnProperty("e");\n    };\n    /**\n     * Check if the object contains ALL the parameters of an RSA key.\n     * @param {Object} [obj={}] - An object that may contain nine rsa key\n     * parameters\n     * @returns {boolean} true if the object contains all the parameters needed\n     * @todo check for types of the parameters all the parameters but the public exponent\n     * should be parseable bigint objects, the public exponent should be a parseable integer number\n     * @private\n     */\n    JSEncryptRSAKey.hasPrivateKeyProperty = function (obj) {\n        obj = obj || {};\n        return (obj.hasOwnProperty("n") &&\n            obj.hasOwnProperty("e") &&\n            obj.hasOwnProperty("d") &&\n            obj.hasOwnProperty("p") &&\n            obj.hasOwnProperty("q") &&\n            obj.hasOwnProperty("dmp1") &&\n            obj.hasOwnProperty("dmq1") &&\n            obj.hasOwnProperty("coeff"));\n    };\n    /**\n     * Parse the properties of obj in the current rsa object. Obj should AT LEAST\n     * include the modulus and public exponent (n, e) parameters.\n     * @param {Object} obj - the object containing rsa parameters\n     * @private\n     */\n    JSEncryptRSAKey.prototype.parsePropertiesFrom = function (obj) {\n        this.n = obj.n;\n        this.e = obj.e;\n        if (obj.hasOwnProperty("d")) {\n            this.d = obj.d;\n            this.p = obj.p;\n            this.q = obj.q;\n            this.dmp1 = obj.dmp1;\n            this.dmq1 = obj.dmq1;\n            this.coeff = obj.coeff;\n        }\n    };\n    return JSEncryptRSAKey;\n}(_lib_jsbn_rsa__WEBPACK_IMPORTED_MODULE_4__.RSAKey));\n\n\n\n//# sourceURL=webpack://JSEncrypt/./lib/JSEncryptRSAKey.js?')},"./lib/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "JSEncrypt": () => (/* reexport safe */ _JSEncrypt__WEBPACK_IMPORTED_MODULE_0__.JSEncrypt),\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _JSEncrypt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./JSEncrypt */ "./lib/JSEncrypt.js");\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_JSEncrypt__WEBPACK_IMPORTED_MODULE_0__.JSEncrypt);\n\n\n//# sourceURL=webpack://JSEncrypt/./lib/index.js?')},"./lib/lib/asn1js/asn1.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "ASN1": () => (/* binding */ ASN1),\n/* harmony export */   "ASN1Tag": () => (/* binding */ ASN1Tag),\n/* harmony export */   "Stream": () => (/* binding */ Stream)\n/* harmony export */ });\n/* harmony import */ var _int10__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./int10 */ "./lib/lib/asn1js/int10.js");\n// ASN.1 JavaScript decoder\n// Copyright (c) 2008-2014 Lapo Luchini <lapo@lapo.it>\n// Permission to use, copy, modify, and/or distribute this software for any\n// purpose with or without fee is hereby granted, provided that the above\n// copyright notice and this permission notice appear in all copies.\n//\n// THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n/*jshint browser: true, strict: true, immed: true, latedef: true, undef: true, regexdash: false */\n/*global oids */\n\nvar ellipsis = "\\u2026";\nvar reTimeS = /^(\\d\\d)(0[1-9]|1[0-2])(0[1-9]|[12]\\d|3[01])([01]\\d|2[0-3])(?:([0-5]\\d)(?:([0-5]\\d)(?:[.,](\\d{1,3}))?)?)?(Z|[-+](?:[0]\\d|1[0-2])([0-5]\\d)?)?$/;\nvar reTimeL = /^(\\d\\d\\d\\d)(0[1-9]|1[0-2])(0[1-9]|[12]\\d|3[01])([01]\\d|2[0-3])(?:([0-5]\\d)(?:([0-5]\\d)(?:[.,](\\d{1,3}))?)?)?(Z|[-+](?:[0]\\d|1[0-2])([0-5]\\d)?)?$/;\nfunction stringCut(str, len) {\n    if (str.length > len) {\n        str = str.substring(0, len) + ellipsis;\n    }\n    return str;\n}\nvar Stream = /** @class */ (function () {\n    function Stream(enc, pos) {\n        this.hexDigits = "0123456789ABCDEF";\n        if (enc instanceof Stream) {\n            this.enc = enc.enc;\n            this.pos = enc.pos;\n        }\n        else {\n            // enc should be an array or a binary string\n            this.enc = enc;\n            this.pos = pos;\n        }\n    }\n    Stream.prototype.get = function (pos) {\n        if (pos === undefined) {\n            pos = this.pos++;\n        }\n        if (pos >= this.enc.length) {\n            throw new Error("Requesting byte offset ".concat(pos, " on a stream of length ").concat(this.enc.length));\n        }\n        return ("string" === typeof this.enc) ? this.enc.charCodeAt(pos) : this.enc[pos];\n    };\n    Stream.prototype.hexByte = function (b) {\n        return this.hexDigits.charAt((b >> 4) & 0xF) + this.hexDigits.charAt(b & 0xF);\n    };\n    Stream.prototype.hexDump = function (start, end, raw) {\n        var s = "";\n        for (var i = start; i < end; ++i) {\n            s += this.hexByte(this.get(i));\n            if (raw !== true) {\n                switch (i & 0xF) {\n                    case 0x7:\n                        s += "  ";\n                        break;\n                    case 0xF:\n                        s += "\\n";\n                        break;\n                    default:\n                        s += " ";\n                }\n            }\n        }\n        return s;\n    };\n    Stream.prototype.isASCII = function (start, end) {\n        for (var i = start; i < end; ++i) {\n            var c = this.get(i);\n            if (c < 32 || c > 176) {\n                return false;\n            }\n        }\n        return true;\n    };\n    Stream.prototype.parseStringISO = function (start, end) {\n        var s = "";\n        for (var i = start; i < end; ++i) {\n            s += String.fromCharCode(this.get(i));\n        }\n        return s;\n    };\n    Stream.prototype.parseStringUTF = function (start, end) {\n        var s = "";\n        for (var i = start; i < end;) {\n            var c = this.get(i++);\n            if (c < 128) {\n                s += String.fromCharCode(c);\n            }\n            else if ((c > 191) && (c < 224)) {\n                s += String.fromCharCode(((c & 0x1F) << 6) | (this.get(i++) & 0x3F));\n            }\n            else {\n                s += String.fromCharCode(((c & 0x0F) << 12) | ((this.get(i++) & 0x3F) << 6) | (this.get(i++) & 0x3F));\n            }\n        }\n        return s;\n    };\n    Stream.prototype.parseStringBMP = function (start, end) {\n        var str = "";\n        var hi;\n        var lo;\n        for (var i = start; i < end;) {\n            hi = this.get(i++);\n            lo = this.get(i++);\n            str += String.fromCharCode((hi << 8) | lo);\n        }\n        return str;\n    };\n    Stream.prototype.parseTime = function (start, end, shortYear) {\n        var s = this.parseStringISO(start, end);\n        var m = (shortYear ? reTimeS : reTimeL).exec(s);\n        if (!m) {\n            return "Unrecognized time: " + s;\n        }\n        if (shortYear) {\n            // to avoid querying the timer, use the fixed range [1970, 2069]\n            // it will conform with ITU X.400 [-10, +40] sliding window until 2030\n            m[1] = +m[1];\n            m[1] += (+m[1] < 70) ? 2000 : 1900;\n        }\n        s = m[1] + "-" + m[2] + "-" + m[3] + " " + m[4];\n        if (m[5]) {\n            s += ":" + m[5];\n            if (m[6]) {\n                s += ":" + m[6];\n                if (m[7]) {\n                    s += "." + m[7];\n                }\n            }\n        }\n        if (m[8]) {\n            s += " UTC";\n            if (m[8] != "Z") {\n                s += m[8];\n                if (m[9]) {\n                    s += ":" + m[9];\n                }\n            }\n        }\n        return s;\n    };\n    Stream.prototype.parseInteger = function (start, end) {\n        var v = this.get(start);\n        var neg = (v > 127);\n        var pad = neg ? 255 : 0;\n        var len;\n        var s = "";\n        // skip unuseful bits (not allowed in DER)\n        while (v == pad && ++start < end) {\n            v = this.get(start);\n        }\n        len = end - start;\n        if (len === 0) {\n            return neg ? -1 : 0;\n        }\n        // show bit length of huge integers\n        if (len > 4) {\n            s = v;\n            len <<= 3;\n            while (((+s ^ pad) & 0x80) == 0) {\n                s = +s << 1;\n                --len;\n            }\n            s = "(" + len + " bit)\\n";\n        }\n        // decode the integer\n        if (neg) {\n            v = v - 256;\n        }\n        var n = new _int10__WEBPACK_IMPORTED_MODULE_0__.Int10(v);\n        for (var i = start + 1; i < end; ++i) {\n            n.mulAdd(256, this.get(i));\n        }\n        return s + n.toString();\n    };\n    Stream.prototype.parseBitString = function (start, end, maxLength) {\n        var unusedBit = this.get(start);\n        var lenBit = ((end - start - 1) << 3) - unusedBit;\n        var intro = "(" + lenBit + " bit)\\n";\n        var s = "";\n        for (var i = start + 1; i < end; ++i) {\n            var b = this.get(i);\n            var skip = (i == end - 1) ? unusedBit : 0;\n            for (var j = 7; j >= skip; --j) {\n                s += (b >> j) & 1 ? "1" : "0";\n            }\n            if (s.length > maxLength) {\n                return intro + stringCut(s, maxLength);\n            }\n        }\n        return intro + s;\n    };\n    Stream.prototype.parseOctetString = function (start, end, maxLength) {\n        if (this.isASCII(start, end)) {\n            return stringCut(this.parseStringISO(start, end), maxLength);\n        }\n        var len = end - start;\n        var s = "(" + len + " byte)\\n";\n        maxLength /= 2; // we work in bytes\n        if (len > maxLength) {\n            end = start + maxLength;\n        }\n        for (var i = start; i < end; ++i) {\n            s += this.hexByte(this.get(i));\n        }\n        if (len > maxLength) {\n            s += ellipsis;\n        }\n        return s;\n    };\n    Stream.prototype.parseOID = function (start, end, maxLength) {\n        var s = "";\n        var n = new _int10__WEBPACK_IMPORTED_MODULE_0__.Int10();\n        var bits = 0;\n        for (var i = start; i < end; ++i) {\n            var v = this.get(i);\n            n.mulAdd(128, v & 0x7F);\n            bits += 7;\n            if (!(v & 0x80)) { // finished\n                if (s === "") {\n                    n = n.simplify();\n                    if (n instanceof _int10__WEBPACK_IMPORTED_MODULE_0__.Int10) {\n                        n.sub(80);\n                        s = "2." + n.toString();\n                    }\n                    else {\n                        var m = n < 80 ? n < 40 ? 0 : 1 : 2;\n                        s = m + "." + (n - m * 40);\n                    }\n                }\n                else {\n                    s += "." + n.toString();\n                }\n                if (s.length > maxLength) {\n                    return stringCut(s, maxLength);\n                }\n                n = new _int10__WEBPACK_IMPORTED_MODULE_0__.Int10();\n                bits = 0;\n            }\n        }\n        if (bits > 0) {\n            s += ".incomplete";\n        }\n        return s;\n    };\n    return Stream;\n}());\n\nvar ASN1 = /** @class */ (function () {\n    function ASN1(stream, header, length, tag, sub) {\n        if (!(tag instanceof ASN1Tag)) {\n            throw new Error("Invalid tag value.");\n        }\n        this.stream = stream;\n        this.header = header;\n        this.length = length;\n        this.tag = tag;\n        this.sub = sub;\n    }\n    ASN1.prototype.typeName = function () {\n        switch (this.tag.tagClass) {\n            case 0: // universal\n                switch (this.tag.tagNumber) {\n                    case 0x00:\n                        return "EOC";\n                    case 0x01:\n                        return "BOOLEAN";\n                    case 0x02:\n                        return "INTEGER";\n                    case 0x03:\n                        return "BIT_STRING";\n                    case 0x04:\n                        return "OCTET_STRING";\n                    case 0x05:\n                        return "NULL";\n                    case 0x06:\n                        return "OBJECT_IDENTIFIER";\n                    case 0x07:\n                        return "ObjectDescriptor";\n                    case 0x08:\n                        return "EXTERNAL";\n                    case 0x09:\n                        return "REAL";\n                    case 0x0A:\n                        return "ENUMERATED";\n                    case 0x0B:\n                        return "EMBEDDED_PDV";\n                    case 0x0C:\n                        return "UTF8String";\n                    case 0x10:\n                        return "SEQUENCE";\n                    case 0x11:\n                        return "SET";\n                    case 0x12:\n                        return "NumericString";\n                    case 0x13:\n                        return "PrintableString"; // ASCII subset\n                    case 0x14:\n                        return "TeletexString"; // aka T61String\n                    case 0x15:\n                        return "VideotexString";\n                    case 0x16:\n                        return "IA5String"; // ASCII\n                    case 0x17:\n                        return "UTCTime";\n                    case 0x18:\n                        return "GeneralizedTime";\n                    case 0x19:\n                        return "GraphicString";\n                    case 0x1A:\n                        return "VisibleString"; // ASCII subset\n                    case 0x1B:\n                        return "GeneralString";\n                    case 0x1C:\n                        return "UniversalString";\n                    case 0x1E:\n                        return "BMPString";\n                }\n                return "Universal_" + this.tag.tagNumber.toString();\n            case 1:\n                return "Application_" + this.tag.tagNumber.toString();\n            case 2:\n                return "[" + this.tag.tagNumber.toString() + "]"; // Context\n            case 3:\n                return "Private_" + this.tag.tagNumber.toString();\n        }\n    };\n    ASN1.prototype.content = function (maxLength) {\n        if (this.tag === undefined) {\n            return null;\n        }\n        if (maxLength === undefined) {\n            maxLength = Infinity;\n        }\n        var content = this.posContent();\n        var len = Math.abs(this.length);\n        if (!this.tag.isUniversal()) {\n            if (this.sub !== null) {\n                return "(" + this.sub.length + " elem)";\n            }\n            return this.stream.parseOctetString(content, content + len, maxLength);\n        }\n        switch (this.tag.tagNumber) {\n            case 0x01: // BOOLEAN\n                return (this.stream.get(content) === 0) ? "false" : "true";\n            case 0x02: // INTEGER\n                return this.stream.parseInteger(content, content + len);\n            case 0x03: // BIT_STRING\n                return this.sub ? "(" + this.sub.length + " elem)" :\n                    this.stream.parseBitString(content, content + len, maxLength);\n            case 0x04: // OCTET_STRING\n                return this.sub ? "(" + this.sub.length + " elem)" :\n                    this.stream.parseOctetString(content, content + len, maxLength);\n            // case 0x05: // NULL\n            case 0x06: // OBJECT_IDENTIFIER\n                return this.stream.parseOID(content, content + len, maxLength);\n            // case 0x07: // ObjectDescriptor\n            // case 0x08: // EXTERNAL\n            // case 0x09: // REAL\n            // case 0x0A: // ENUMERATED\n            // case 0x0B: // EMBEDDED_PDV\n            case 0x10: // SEQUENCE\n            case 0x11: // SET\n                if (this.sub !== null) {\n                    return "(" + this.sub.length + " elem)";\n                }\n                else {\n                    return "(no elem)";\n                }\n            case 0x0C: // UTF8String\n                return stringCut(this.stream.parseStringUTF(content, content + len), maxLength);\n            case 0x12: // NumericString\n            case 0x13: // PrintableString\n            case 0x14: // TeletexString\n            case 0x15: // VideotexString\n            case 0x16: // IA5String\n            // case 0x19: // GraphicString\n            case 0x1A: // VisibleString\n                // case 0x1B: // GeneralString\n                // case 0x1C: // UniversalString\n                return stringCut(this.stream.parseStringISO(content, content + len), maxLength);\n            case 0x1E: // BMPString\n                return stringCut(this.stream.parseStringBMP(content, content + len), maxLength);\n            case 0x17: // UTCTime\n            case 0x18: // GeneralizedTime\n                return this.stream.parseTime(content, content + len, (this.tag.tagNumber == 0x17));\n        }\n        return null;\n    };\n    ASN1.prototype.toString = function () {\n        return this.typeName() + "@" + this.stream.pos + "[header:" + this.header + ",length:" + this.length + ",sub:" + ((this.sub === null) ? "null" : this.sub.length) + "]";\n    };\n    ASN1.prototype.toPrettyString = function (indent) {\n        if (indent === undefined) {\n            indent = "";\n        }\n        var s = indent + this.typeName() + " @" + this.stream.pos;\n        if (this.length >= 0) {\n            s += "+";\n        }\n        s += this.length;\n        if (this.tag.tagConstructed) {\n            s += " (constructed)";\n        }\n        else if ((this.tag.isUniversal() && ((this.tag.tagNumber == 0x03) || (this.tag.tagNumber == 0x04))) && (this.sub !== null)) {\n            s += " (encapsulates)";\n        }\n        s += "\\n";\n        if (this.sub !== null) {\n            indent += "  ";\n            for (var i = 0, max = this.sub.length; i < max; ++i) {\n                s += this.sub[i].toPrettyString(indent);\n            }\n        }\n        return s;\n    };\n    ASN1.prototype.posStart = function () {\n        return this.stream.pos;\n    };\n    ASN1.prototype.posContent = function () {\n        return this.stream.pos + this.header;\n    };\n    ASN1.prototype.posEnd = function () {\n        return this.stream.pos + this.header + Math.abs(this.length);\n    };\n    ASN1.prototype.toHexString = function () {\n        return this.stream.hexDump(this.posStart(), this.posEnd(), true);\n    };\n    ASN1.decodeLength = function (stream) {\n        var buf = stream.get();\n        var len = buf & 0x7F;\n        if (len == buf) {\n            return len;\n        }\n        // no reason to use Int10, as it would be a huge buffer anyways\n        if (len > 6) {\n            throw new Error("Length over 48 bits not supported at position " + (stream.pos - 1));\n        }\n        if (len === 0) {\n            return null;\n        } // undefined\n        buf = 0;\n        for (var i = 0; i < len; ++i) {\n            buf = (buf * 256) + stream.get();\n        }\n        return buf;\n    };\n    /**\n     * Retrieve the hexadecimal value (as a string) of the current ASN.1 element\n     * @returns {string}\n     * @public\n     */\n    ASN1.prototype.getHexStringValue = function () {\n        var hexString = this.toHexString();\n        var offset = this.header * 2;\n        var length = this.length * 2;\n        return hexString.substr(offset, length);\n    };\n    ASN1.decode = function (str) {\n        var stream;\n        if (!(str instanceof Stream)) {\n            stream = new Stream(str, 0);\n        }\n        else {\n            stream = str;\n        }\n        var streamStart = new Stream(stream);\n        var tag = new ASN1Tag(stream);\n        var len = ASN1.decodeLength(stream);\n        var start = stream.pos;\n        var header = start - streamStart.pos;\n        var sub = null;\n        var getSub = function () {\n            var ret = [];\n            if (len !== null) {\n                // definite length\n                var end = start + len;\n                while (stream.pos < end) {\n                    ret[ret.length] = ASN1.decode(stream);\n                }\n                if (stream.pos != end) {\n                    throw new Error("Content size is not correct for container starting at offset " + start);\n                }\n            }\n            else {\n                // undefined length\n                try {\n                    for (;;) {\n                        var s = ASN1.decode(stream);\n                        if (s.tag.isEOC()) {\n                            break;\n                        }\n                        ret[ret.length] = s;\n                    }\n                    len = start - stream.pos; // undefined lengths are represented as negative values\n                }\n                catch (e) {\n                    throw new Error("Exception while decoding undefined length content: " + e);\n                }\n            }\n            return ret;\n        };\n        if (tag.tagConstructed) {\n            // must have valid content\n            sub = getSub();\n        }\n        else if (tag.isUniversal() && ((tag.tagNumber == 0x03) || (tag.tagNumber == 0x04))) {\n            // sometimes BitString and OctetString are used to encapsulate ASN.1\n            try {\n                if (tag.tagNumber == 0x03) {\n                    if (stream.get() != 0) {\n                        throw new Error("BIT STRINGs with unused bits cannot encapsulate.");\n                    }\n                }\n                sub = getSub();\n                for (var i = 0; i < sub.length; ++i) {\n                    if (sub[i].tag.isEOC()) {\n                        throw new Error("EOC is not supposed to be actual content.");\n                    }\n                }\n            }\n            catch (e) {\n                // but silently ignore when they don\'t\n                sub = null;\n            }\n        }\n        if (sub === null) {\n            if (len === null) {\n                throw new Error("We can\'t skip over an invalid tag with undefined length at offset " + start);\n            }\n            stream.pos = start + Math.abs(len);\n        }\n        return new ASN1(streamStart, header, len, tag, sub);\n    };\n    return ASN1;\n}());\n\nvar ASN1Tag = /** @class */ (function () {\n    function ASN1Tag(stream) {\n        var buf = stream.get();\n        this.tagClass = buf >> 6;\n        this.tagConstructed = ((buf & 0x20) !== 0);\n        this.tagNumber = buf & 0x1F;\n        if (this.tagNumber == 0x1F) { // long tag\n            var n = new _int10__WEBPACK_IMPORTED_MODULE_0__.Int10();\n            do {\n                buf = stream.get();\n                n.mulAdd(128, buf & 0x7F);\n            } while (buf & 0x80);\n            this.tagNumber = n.simplify();\n        }\n    }\n    ASN1Tag.prototype.isUniversal = function () {\n        return this.tagClass === 0x00;\n    };\n    ASN1Tag.prototype.isEOC = function () {\n        return this.tagClass === 0x00 && this.tagNumber === 0x00;\n    };\n    return ASN1Tag;\n}());\n\n\n\n//# sourceURL=webpack://JSEncrypt/./lib/lib/asn1js/asn1.js?')},"./lib/lib/asn1js/base64.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Base64": () => (/* binding */ Base64)\n/* harmony export */ });\n// Base64 JavaScript decoder\n// Copyright (c) 2008-2013 Lapo Luchini <lapo@lapo.it>\n// Permission to use, copy, modify, and/or distribute this software for any\n// purpose with or without fee is hereby granted, provided that the above\n// copyright notice and this permission notice appear in all copies.\n//\n// THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n/*jshint browser: true, strict: true, immed: true, latedef: true, undef: true, regexdash: false */\nvar decoder;\nvar Base64 = {\n    decode: function (a) {\n        var i;\n        if (decoder === undefined) {\n            var b64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";\n            var ignore = "= \\f\\n\\r\\t\\u00A0\\u2028\\u2029";\n            decoder = Object.create(null);\n            for (i = 0; i < 64; ++i) {\n                decoder[b64.charAt(i)] = i;\n            }\n            decoder[\'-\'] = 62; //+\n            decoder[\'_\'] = 63; //-\n            for (i = 0; i < ignore.length; ++i) {\n                decoder[ignore.charAt(i)] = -1;\n            }\n        }\n        var out = [];\n        var bits = 0;\n        var char_count = 0;\n        for (i = 0; i < a.length; ++i) {\n            var c = a.charAt(i);\n            if (c == "=") {\n                break;\n            }\n            c = decoder[c];\n            if (c == -1) {\n                continue;\n            }\n            if (c === undefined) {\n                throw new Error("Illegal character at offset " + i);\n            }\n            bits |= c;\n            if (++char_count >= 4) {\n                out[out.length] = (bits >> 16);\n                out[out.length] = (bits >> 8) & 0xFF;\n                out[out.length] = bits & 0xFF;\n                bits = 0;\n                char_count = 0;\n            }\n            else {\n                bits <<= 6;\n            }\n        }\n        switch (char_count) {\n            case 1:\n                throw new Error("Base64 encoding incomplete: at least 2 bits missing");\n            case 2:\n                out[out.length] = (bits >> 10);\n                break;\n            case 3:\n                out[out.length] = (bits >> 16);\n                out[out.length] = (bits >> 8) & 0xFF;\n                break;\n        }\n        return out;\n    },\n    re: /-----BEGIN [^-]+-----([A-Za-z0-9+\\/=\\s]+)-----END [^-]+-----|begin-base64[^\\n]+\\n([A-Za-z0-9+\\/=\\s]+)====/,\n    unarmor: function (a) {\n        var m = Base64.re.exec(a);\n        if (m) {\n            if (m[1]) {\n                a = m[1];\n            }\n            else if (m[2]) {\n                a = m[2];\n            }\n            else {\n                throw new Error("RegExp out of sync");\n            }\n        }\n        return Base64.decode(a);\n    }\n};\n\n\n//# sourceURL=webpack://JSEncrypt/./lib/lib/asn1js/base64.js?')},"./lib/lib/asn1js/hex.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Hex": () => (/* binding */ Hex)\n/* harmony export */ });\n// Hex JavaScript decoder\n// Copyright (c) 2008-2013 Lapo Luchini <lapo@lapo.it>\n// Permission to use, copy, modify, and/or distribute this software for any\n// purpose with or without fee is hereby granted, provided that the above\n// copyright notice and this permission notice appear in all copies.\n//\n// THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n/*jshint browser: true, strict: true, immed: true, latedef: true, undef: true, regexdash: false */\nvar decoder;\nvar Hex = {\n    decode: function (a) {\n        var i;\n        if (decoder === undefined) {\n            var hex = "0123456789ABCDEF";\n            var ignore = " \\f\\n\\r\\t\\u00A0\\u2028\\u2029";\n            decoder = {};\n            for (i = 0; i < 16; ++i) {\n                decoder[hex.charAt(i)] = i;\n            }\n            hex = hex.toLowerCase();\n            for (i = 10; i < 16; ++i) {\n                decoder[hex.charAt(i)] = i;\n            }\n            for (i = 0; i < ignore.length; ++i) {\n                decoder[ignore.charAt(i)] = -1;\n            }\n        }\n        var out = [];\n        var bits = 0;\n        var char_count = 0;\n        for (i = 0; i < a.length; ++i) {\n            var c = a.charAt(i);\n            if (c == "=") {\n                break;\n            }\n            c = decoder[c];\n            if (c == -1) {\n                continue;\n            }\n            if (c === undefined) {\n                throw new Error("Illegal character at offset " + i);\n            }\n            bits |= c;\n            if (++char_count >= 2) {\n                out[out.length] = bits;\n                bits = 0;\n                char_count = 0;\n            }\n            else {\n                bits <<= 4;\n            }\n        }\n        if (char_count) {\n            throw new Error("Hex encoding incomplete: 4 bits missing");\n        }\n        return out;\n    }\n};\n\n\n//# sourceURL=webpack://JSEncrypt/./lib/lib/asn1js/hex.js?')},"./lib/lib/asn1js/int10.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Int10": () => (/* binding */ Int10)\n/* harmony export */ });\n// Big integer base-10 printing library\n// Copyright (c) 2014 Lapo Luchini <lapo@lapo.it>\n// Permission to use, copy, modify, and/or distribute this software for any\n// purpose with or without fee is hereby granted, provided that the above\n// copyright notice and this permission notice appear in all copies.\n//\n// THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n/*jshint browser: true, strict: true, immed: true, latedef: true, undef: true, regexdash: false */\nvar max = 10000000000000; // biggest integer that can still fit 2^53 when multiplied by 256\nvar Int10 = /** @class */ (function () {\n    function Int10(value) {\n        this.buf = [+value || 0];\n    }\n    Int10.prototype.mulAdd = function (m, c) {\n        // assert(m <= 256)\n        var b = this.buf;\n        var l = b.length;\n        var i;\n        var t;\n        for (i = 0; i < l; ++i) {\n            t = b[i] * m + c;\n            if (t < max) {\n                c = 0;\n            }\n            else {\n                c = 0 | (t / max);\n                t -= c * max;\n            }\n            b[i] = t;\n        }\n        if (c > 0) {\n            b[i] = c;\n        }\n    };\n    Int10.prototype.sub = function (c) {\n        // assert(m <= 256)\n        var b = this.buf;\n        var l = b.length;\n        var i;\n        var t;\n        for (i = 0; i < l; ++i) {\n            t = b[i] - c;\n            if (t < 0) {\n                t += max;\n                c = 1;\n            }\n            else {\n                c = 0;\n            }\n            b[i] = t;\n        }\n        while (b[b.length - 1] === 0) {\n            b.pop();\n        }\n    };\n    Int10.prototype.toString = function (base) {\n        if ((base || 10) != 10) {\n            throw new Error("only base 10 is supported");\n        }\n        var b = this.buf;\n        var s = b[b.length - 1].toString();\n        for (var i = b.length - 2; i >= 0; --i) {\n            s += (max + b[i]).toString().substring(1);\n        }\n        return s;\n    };\n    Int10.prototype.valueOf = function () {\n        var b = this.buf;\n        var v = 0;\n        for (var i = b.length - 1; i >= 0; --i) {\n            v = v * max + b[i];\n        }\n        return v;\n    };\n    Int10.prototype.simplify = function () {\n        var b = this.buf;\n        return (b.length == 1) ? b[0] : this;\n    };\n    return Int10;\n}());\n\n\n\n//# sourceURL=webpack://JSEncrypt/./lib/lib/asn1js/int10.js?')},"./lib/lib/jsbn/base64.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "b64toBA": () => (/* binding */ b64toBA),\n/* harmony export */   "b64tohex": () => (/* binding */ b64tohex),\n/* harmony export */   "hex2b64": () => (/* binding */ hex2b64)\n/* harmony export */ });\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util */ "./lib/lib/jsbn/util.js");\n\nvar b64map = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";\nvar b64pad = "=";\nfunction hex2b64(h) {\n    var i;\n    var c;\n    var ret = "";\n    for (i = 0; i + 3 <= h.length; i += 3) {\n        c = parseInt(h.substring(i, i + 3), 16);\n        ret += b64map.charAt(c >> 6) + b64map.charAt(c & 63);\n    }\n    if (i + 1 == h.length) {\n        c = parseInt(h.substring(i, i + 1), 16);\n        ret += b64map.charAt(c << 2);\n    }\n    else if (i + 2 == h.length) {\n        c = parseInt(h.substring(i, i + 2), 16);\n        ret += b64map.charAt(c >> 2) + b64map.charAt((c & 3) << 4);\n    }\n    while ((ret.length & 3) > 0) {\n        ret += b64pad;\n    }\n    return ret;\n}\n// convert a base64 string to hex\nfunction b64tohex(s) {\n    var ret = "";\n    var i;\n    var k = 0; // b64 state, 0-3\n    var slop = 0;\n    for (i = 0; i < s.length; ++i) {\n        if (s.charAt(i) == b64pad) {\n            break;\n        }\n        var v = b64map.indexOf(s.charAt(i));\n        if (v < 0) {\n            continue;\n        }\n        if (k == 0) {\n            ret += (0,_util__WEBPACK_IMPORTED_MODULE_0__.int2char)(v >> 2);\n            slop = v & 3;\n            k = 1;\n        }\n        else if (k == 1) {\n            ret += (0,_util__WEBPACK_IMPORTED_MODULE_0__.int2char)((slop << 2) | (v >> 4));\n            slop = v & 0xf;\n            k = 2;\n        }\n        else if (k == 2) {\n            ret += (0,_util__WEBPACK_IMPORTED_MODULE_0__.int2char)(slop);\n            ret += (0,_util__WEBPACK_IMPORTED_MODULE_0__.int2char)(v >> 2);\n            slop = v & 3;\n            k = 3;\n        }\n        else {\n            ret += (0,_util__WEBPACK_IMPORTED_MODULE_0__.int2char)((slop << 2) | (v >> 4));\n            ret += (0,_util__WEBPACK_IMPORTED_MODULE_0__.int2char)(v & 0xf);\n            k = 0;\n        }\n    }\n    if (k == 1) {\n        ret += (0,_util__WEBPACK_IMPORTED_MODULE_0__.int2char)(slop << 2);\n    }\n    return ret;\n}\n// convert a base64 string to a byte/number array\nfunction b64toBA(s) {\n    // piggyback on b64tohex for now, optimize later\n    var h = b64tohex(s);\n    var i;\n    var a = [];\n    for (i = 0; 2 * i < h.length; ++i) {\n        a[i] = parseInt(h.substring(2 * i, 2 * i + 2), 16);\n    }\n    return a;\n}\n\n\n//# sourceURL=webpack://JSEncrypt/./lib/lib/jsbn/base64.js?')},"./lib/lib/jsbn/jsbn.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "BigInteger": () => (/* binding */ BigInteger),\n/* harmony export */   "intAt": () => (/* binding */ intAt),\n/* harmony export */   "nbi": () => (/* binding */ nbi),\n/* harmony export */   "nbits": () => (/* binding */ nbits),\n/* harmony export */   "nbv": () => (/* binding */ nbv),\n/* harmony export */   "parseBigInt": () => (/* binding */ parseBigInt)\n/* harmony export */ });\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util */ "./lib/lib/jsbn/util.js");\n// Copyright (c) 2005  Tom Wu\n// All Rights Reserved.\n// See "LICENSE" for details.\n// Basic JavaScript BN library - subset useful for RSA encryption.\n\n// Bits per digit\nvar dbits;\n// JavaScript engine analysis\nvar canary = 0xdeadbeefcafe;\nvar j_lm = ((canary & 0xffffff) == 0xefcafe);\n//#region\nvar lowprimes = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509, 521, 523, 541, 547, 557, 563, 569, 571, 577, 587, 593, 599, 601, 607, 613, 617, 619, 631, 641, 643, 647, 653, 659, 661, 673, 677, 683, 691, 701, 709, 719, 727, 733, 739, 743, 751, 757, 761, 769, 773, 787, 797, 809, 811, 821, 823, 827, 829, 839, 853, 857, 859, 863, 877, 881, 883, 887, 907, 911, 919, 929, 937, 941, 947, 953, 967, 971, 977, 983, 991, 997];\nvar lplim = (1 << 26) / lowprimes[lowprimes.length - 1];\n//#endregion\n// (public) Constructor\nvar BigInteger = /** @class */ (function () {\n    function BigInteger(a, b, c) {\n        if (a != null) {\n            if ("number" == typeof a) {\n                this.fromNumber(a, b, c);\n            }\n            else if (b == null && "string" != typeof a) {\n                this.fromString(a, 256);\n            }\n            else {\n                this.fromString(a, b);\n            }\n        }\n    }\n    //#region PUBLIC\n    // BigInteger.prototype.toString = bnToString;\n    // (public) return string representation in given radix\n    BigInteger.prototype.toString = function (b) {\n        if (this.s < 0) {\n            return "-" + this.negate().toString(b);\n        }\n        var k;\n        if (b == 16) {\n            k = 4;\n        }\n        else if (b == 8) {\n            k = 3;\n        }\n        else if (b == 2) {\n            k = 1;\n        }\n        else if (b == 32) {\n            k = 5;\n        }\n        else if (b == 4) {\n            k = 2;\n        }\n        else {\n            return this.toRadix(b);\n        }\n        var km = (1 << k) - 1;\n        var d;\n        var m = false;\n        var r = "";\n        var i = this.t;\n        var p = this.DB - (i * this.DB) % k;\n        if (i-- > 0) {\n            if (p < this.DB && (d = this[i] >> p) > 0) {\n                m = true;\n                r = (0,_util__WEBPACK_IMPORTED_MODULE_0__.int2char)(d);\n            }\n            while (i >= 0) {\n                if (p < k) {\n                    d = (this[i] & ((1 << p) - 1)) << (k - p);\n                    d |= this[--i] >> (p += this.DB - k);\n                }\n                else {\n                    d = (this[i] >> (p -= k)) & km;\n                    if (p <= 0) {\n                        p += this.DB;\n                        --i;\n                    }\n                }\n                if (d > 0) {\n                    m = true;\n                }\n                if (m) {\n                    r += (0,_util__WEBPACK_IMPORTED_MODULE_0__.int2char)(d);\n                }\n            }\n        }\n        return m ? r : "0";\n    };\n    // BigInteger.prototype.negate = bnNegate;\n    // (public) -this\n    BigInteger.prototype.negate = function () {\n        var r = nbi();\n        BigInteger.ZERO.subTo(this, r);\n        return r;\n    };\n    // BigInteger.prototype.abs = bnAbs;\n    // (public) |this|\n    BigInteger.prototype.abs = function () {\n        return (this.s < 0) ? this.negate() : this;\n    };\n    // BigInteger.prototype.compareTo = bnCompareTo;\n    // (public) return + if this > a, - if this < a, 0 if equal\n    BigInteger.prototype.compareTo = function (a) {\n        var r = this.s - a.s;\n        if (r != 0) {\n            return r;\n        }\n        var i = this.t;\n        r = i - a.t;\n        if (r != 0) {\n            return (this.s < 0) ? -r : r;\n        }\n        while (--i >= 0) {\n            if ((r = this[i] - a[i]) != 0) {\n                return r;\n            }\n        }\n        return 0;\n    };\n    // BigInteger.prototype.bitLength = bnBitLength;\n    // (public) return the number of bits in "this"\n    BigInteger.prototype.bitLength = function () {\n        if (this.t <= 0) {\n            return 0;\n        }\n        return this.DB * (this.t - 1) + nbits(this[this.t - 1] ^ (this.s & this.DM));\n    };\n    // BigInteger.prototype.mod = bnMod;\n    // (public) this mod a\n    BigInteger.prototype.mod = function (a) {\n        var r = nbi();\n        this.abs().divRemTo(a, null, r);\n        if (this.s < 0 && r.compareTo(BigInteger.ZERO) > 0) {\n            a.subTo(r, r);\n        }\n        return r;\n    };\n    // BigInteger.prototype.modPowInt = bnModPowInt;\n    // (public) this^e % m, 0 <= e < 2^32\n    BigInteger.prototype.modPowInt = function (e, m) {\n        var z;\n        if (e < 256 || m.isEven()) {\n            z = new Classic(m);\n        }\n        else {\n            z = new Montgomery(m);\n        }\n        return this.exp(e, z);\n    };\n    // BigInteger.prototype.clone = bnClone;\n    // (public)\n    BigInteger.prototype.clone = function () {\n        var r = nbi();\n        this.copyTo(r);\n        return r;\n    };\n    // BigInteger.prototype.intValue = bnIntValue;\n    // (public) return value as integer\n    BigInteger.prototype.intValue = function () {\n        if (this.s < 0) {\n            if (this.t == 1) {\n                return this[0] - this.DV;\n            }\n            else if (this.t == 0) {\n                return -1;\n            }\n        }\n        else if (this.t == 1) {\n            return this[0];\n        }\n        else if (this.t == 0) {\n            return 0;\n        }\n        // assumes 16 < DB < 32\n        return ((this[1] & ((1 << (32 - this.DB)) - 1)) << this.DB) | this[0];\n    };\n    // BigInteger.prototype.byteValue = bnByteValue;\n    // (public) return value as byte\n    BigInteger.prototype.byteValue = function () {\n        return (this.t == 0) ? this.s : (this[0] << 24) >> 24;\n    };\n    // BigInteger.prototype.shortValue = bnShortValue;\n    // (public) return value as short (assumes DB>=16)\n    BigInteger.prototype.shortValue = function () {\n        return (this.t == 0) ? this.s : (this[0] << 16) >> 16;\n    };\n    // BigInteger.prototype.signum = bnSigNum;\n    // (public) 0 if this == 0, 1 if this > 0\n    BigInteger.prototype.signum = function () {\n        if (this.s < 0) {\n            return -1;\n        }\n        else if (this.t <= 0 || (this.t == 1 && this[0] <= 0)) {\n            return 0;\n        }\n        else {\n            return 1;\n        }\n    };\n    // BigInteger.prototype.toByteArray = bnToByteArray;\n    // (public) convert to bigendian byte array\n    BigInteger.prototype.toByteArray = function () {\n        var i = this.t;\n        var r = [];\n        r[0] = this.s;\n        var p = this.DB - (i * this.DB) % 8;\n        var d;\n        var k = 0;\n        if (i-- > 0) {\n            if (p < this.DB && (d = this[i] >> p) != (this.s & this.DM) >> p) {\n                r[k++] = d | (this.s << (this.DB - p));\n            }\n            while (i >= 0) {\n                if (p < 8) {\n                    d = (this[i] & ((1 << p) - 1)) << (8 - p);\n                    d |= this[--i] >> (p += this.DB - 8);\n                }\n                else {\n                    d = (this[i] >> (p -= 8)) & 0xff;\n                    if (p <= 0) {\n                        p += this.DB;\n                        --i;\n                    }\n                }\n                if ((d & 0x80) != 0) {\n                    d |= -256;\n                }\n                if (k == 0 && (this.s & 0x80) != (d & 0x80)) {\n                    ++k;\n                }\n                if (k > 0 || d != this.s) {\n                    r[k++] = d;\n                }\n            }\n        }\n        return r;\n    };\n    // BigInteger.prototype.equals = bnEquals;\n    BigInteger.prototype.equals = function (a) {\n        return (this.compareTo(a) == 0);\n    };\n    // BigInteger.prototype.min = bnMin;\n    BigInteger.prototype.min = function (a) {\n        return (this.compareTo(a) < 0) ? this : a;\n    };\n    // BigInteger.prototype.max = bnMax;\n    BigInteger.prototype.max = function (a) {\n        return (this.compareTo(a) > 0) ? this : a;\n    };\n    // BigInteger.prototype.and = bnAnd;\n    BigInteger.prototype.and = function (a) {\n        var r = nbi();\n        this.bitwiseTo(a, _util__WEBPACK_IMPORTED_MODULE_0__.op_and, r);\n        return r;\n    };\n    // BigInteger.prototype.or = bnOr;\n    BigInteger.prototype.or = function (a) {\n        var r = nbi();\n        this.bitwiseTo(a, _util__WEBPACK_IMPORTED_MODULE_0__.op_or, r);\n        return r;\n    };\n    // BigInteger.prototype.xor = bnXor;\n    BigInteger.prototype.xor = function (a) {\n        var r = nbi();\n        this.bitwiseTo(a, _util__WEBPACK_IMPORTED_MODULE_0__.op_xor, r);\n        return r;\n    };\n    // BigInteger.prototype.andNot = bnAndNot;\n    BigInteger.prototype.andNot = function (a) {\n        var r = nbi();\n        this.bitwiseTo(a, _util__WEBPACK_IMPORTED_MODULE_0__.op_andnot, r);\n        return r;\n    };\n    // BigInteger.prototype.not = bnNot;\n    // (public) ~this\n    BigInteger.prototype.not = function () {\n        var r = nbi();\n        for (var i = 0; i < this.t; ++i) {\n            r[i] = this.DM & ~this[i];\n        }\n        r.t = this.t;\n        r.s = ~this.s;\n        return r;\n    };\n    // BigInteger.prototype.shiftLeft = bnShiftLeft;\n    // (public) this << n\n    BigInteger.prototype.shiftLeft = function (n) {\n        var r = nbi();\n        if (n < 0) {\n            this.rShiftTo(-n, r);\n        }\n        else {\n            this.lShiftTo(n, r);\n        }\n        return r;\n    };\n    // BigInteger.prototype.shiftRight = bnShiftRight;\n    // (public) this >> n\n    BigInteger.prototype.shiftRight = function (n) {\n        var r = nbi();\n        if (n < 0) {\n            this.lShiftTo(-n, r);\n        }\n        else {\n            this.rShiftTo(n, r);\n        }\n        return r;\n    };\n    // BigInteger.prototype.getLowestSetBit = bnGetLowestSetBit;\n    // (public) returns index of lowest 1-bit (or -1 if none)\n    BigInteger.prototype.getLowestSetBit = function () {\n        for (var i = 0; i < this.t; ++i) {\n            if (this[i] != 0) {\n                return i * this.DB + (0,_util__WEBPACK_IMPORTED_MODULE_0__.lbit)(this[i]);\n            }\n        }\n        if (this.s < 0) {\n            return this.t * this.DB;\n        }\n        return -1;\n    };\n    // BigInteger.prototype.bitCount = bnBitCount;\n    // (public) return number of set bits\n    BigInteger.prototype.bitCount = function () {\n        var r = 0;\n        var x = this.s & this.DM;\n        for (var i = 0; i < this.t; ++i) {\n            r += (0,_util__WEBPACK_IMPORTED_MODULE_0__.cbit)(this[i] ^ x);\n        }\n        return r;\n    };\n    // BigInteger.prototype.testBit = bnTestBit;\n    // (public) true iff nth bit is set\n    BigInteger.prototype.testBit = function (n) {\n        var j = Math.floor(n / this.DB);\n        if (j >= this.t) {\n            return (this.s != 0);\n        }\n        return ((this[j] & (1 << (n % this.DB))) != 0);\n    };\n    // BigInteger.prototype.setBit = bnSetBit;\n    // (public) this | (1<<n)\n    BigInteger.prototype.setBit = function (n) {\n        return this.changeBit(n, _util__WEBPACK_IMPORTED_MODULE_0__.op_or);\n    };\n    // BigInteger.prototype.clearBit = bnClearBit;\n    // (public) this & ~(1<<n)\n    BigInteger.prototype.clearBit = function (n) {\n        return this.changeBit(n, _util__WEBPACK_IMPORTED_MODULE_0__.op_andnot);\n    };\n    // BigInteger.prototype.flipBit = bnFlipBit;\n    // (public) this ^ (1<<n)\n    BigInteger.prototype.flipBit = function (n) {\n        return this.changeBit(n, _util__WEBPACK_IMPORTED_MODULE_0__.op_xor);\n    };\n    // BigInteger.prototype.add = bnAdd;\n    // (public) this + a\n    BigInteger.prototype.add = function (a) {\n        var r = nbi();\n        this.addTo(a, r);\n        return r;\n    };\n    // BigInteger.prototype.subtract = bnSubtract;\n    // (public) this - a\n    BigInteger.prototype.subtract = function (a) {\n        var r = nbi();\n        this.subTo(a, r);\n        return r;\n    };\n    // BigInteger.prototype.multiply = bnMultiply;\n    // (public) this * a\n    BigInteger.prototype.multiply = function (a) {\n        var r = nbi();\n        this.multiplyTo(a, r);\n        return r;\n    };\n    // BigInteger.prototype.divide = bnDivide;\n    // (public) this / a\n    BigInteger.prototype.divide = function (a) {\n        var r = nbi();\n        this.divRemTo(a, r, null);\n        return r;\n    };\n    // BigInteger.prototype.remainder = bnRemainder;\n    // (public) this % a\n    BigInteger.prototype.remainder = function (a) {\n        var r = nbi();\n        this.divRemTo(a, null, r);\n        return r;\n    };\n    // BigInteger.prototype.divideAndRemainder = bnDivideAndRemainder;\n    // (public) [this/a,this%a]\n    BigInteger.prototype.divideAndRemainder = function (a) {\n        var q = nbi();\n        var r = nbi();\n        this.divRemTo(a, q, r);\n        return [q, r];\n    };\n    // BigInteger.prototype.modPow = bnModPow;\n    // (public) this^e % m (HAC 14.85)\n    BigInteger.prototype.modPow = function (e, m) {\n        var i = e.bitLength();\n        var k;\n        var r = nbv(1);\n        var z;\n        if (i <= 0) {\n            return r;\n        }\n        else if (i < 18) {\n            k = 1;\n        }\n        else if (i < 48) {\n            k = 3;\n        }\n        else if (i < 144) {\n            k = 4;\n        }\n        else if (i < 768) {\n            k = 5;\n        }\n        else {\n            k = 6;\n        }\n        if (i < 8) {\n            z = new Classic(m);\n        }\n        else if (m.isEven()) {\n            z = new Barrett(m);\n        }\n        else {\n            z = new Montgomery(m);\n        }\n        // precomputation\n        var g = [];\n        var n = 3;\n        var k1 = k - 1;\n        var km = (1 << k) - 1;\n        g[1] = z.convert(this);\n        if (k > 1) {\n            var g2 = nbi();\n            z.sqrTo(g[1], g2);\n            while (n <= km) {\n                g[n] = nbi();\n                z.mulTo(g2, g[n - 2], g[n]);\n                n += 2;\n            }\n        }\n        var j = e.t - 1;\n        var w;\n        var is1 = true;\n        var r2 = nbi();\n        var t;\n        i = nbits(e[j]) - 1;\n        while (j >= 0) {\n            if (i >= k1) {\n                w = (e[j] >> (i - k1)) & km;\n            }\n            else {\n                w = (e[j] & ((1 << (i + 1)) - 1)) << (k1 - i);\n                if (j > 0) {\n                    w |= e[j - 1] >> (this.DB + i - k1);\n                }\n            }\n            n = k;\n            while ((w & 1) == 0) {\n                w >>= 1;\n                --n;\n            }\n            if ((i -= n) < 0) {\n                i += this.DB;\n                --j;\n            }\n            if (is1) { // ret == 1, don\'t bother squaring or multiplying it\n                g[w].copyTo(r);\n                is1 = false;\n            }\n            else {\n                while (n > 1) {\n                    z.sqrTo(r, r2);\n                    z.sqrTo(r2, r);\n                    n -= 2;\n                }\n                if (n > 0) {\n                    z.sqrTo(r, r2);\n                }\n                else {\n                    t = r;\n                    r = r2;\n                    r2 = t;\n                }\n                z.mulTo(r2, g[w], r);\n            }\n            while (j >= 0 && (e[j] & (1 << i)) == 0) {\n                z.sqrTo(r, r2);\n                t = r;\n                r = r2;\n                r2 = t;\n                if (--i < 0) {\n                    i = this.DB - 1;\n                    --j;\n                }\n            }\n        }\n        return z.revert(r);\n    };\n    // BigInteger.prototype.modInverse = bnModInverse;\n    // (public) 1/this % m (HAC 14.61)\n    BigInteger.prototype.modInverse = function (m) {\n        var ac = m.isEven();\n        if ((this.isEven() && ac) || m.signum() == 0) {\n            return BigInteger.ZERO;\n        }\n        var u = m.clone();\n        var v = this.clone();\n        var a = nbv(1);\n        var b = nbv(0);\n        var c = nbv(0);\n        var d = nbv(1);\n        while (u.signum() != 0) {\n            while (u.isEven()) {\n                u.rShiftTo(1, u);\n                if (ac) {\n                    if (!a.isEven() || !b.isEven()) {\n                        a.addTo(this, a);\n                        b.subTo(m, b);\n                    }\n                    a.rShiftTo(1, a);\n                }\n                else if (!b.isEven()) {\n                    b.subTo(m, b);\n                }\n                b.rShiftTo(1, b);\n            }\n            while (v.isEven()) {\n                v.rShiftTo(1, v);\n                if (ac) {\n                    if (!c.isEven() || !d.isEven()) {\n                        c.addTo(this, c);\n                        d.subTo(m, d);\n                    }\n                    c.rShiftTo(1, c);\n                }\n                else if (!d.isEven()) {\n                    d.subTo(m, d);\n                }\n                d.rShiftTo(1, d);\n            }\n            if (u.compareTo(v) >= 0) {\n                u.subTo(v, u);\n                if (ac) {\n                    a.subTo(c, a);\n                }\n                b.subTo(d, b);\n            }\n            else {\n                v.subTo(u, v);\n                if (ac) {\n                    c.subTo(a, c);\n                }\n                d.subTo(b, d);\n            }\n        }\n        if (v.compareTo(BigInteger.ONE) != 0) {\n            return BigInteger.ZERO;\n        }\n        if (d.compareTo(m) >= 0) {\n            return d.subtract(m);\n        }\n        if (d.signum() < 0) {\n            d.addTo(m, d);\n        }\n        else {\n            return d;\n        }\n        if (d.signum() < 0) {\n            return d.add(m);\n        }\n        else {\n            return d;\n        }\n    };\n    // BigInteger.prototype.pow = bnPow;\n    // (public) this^e\n    BigInteger.prototype.pow = function (e) {\n        return this.exp(e, new NullExp());\n    };\n    // BigInteger.prototype.gcd = bnGCD;\n    // (public) gcd(this,a) (HAC 14.54)\n    BigInteger.prototype.gcd = function (a) {\n        var x = (this.s < 0) ? this.negate() : this.clone();\n        var y = (a.s < 0) ? a.negate() : a.clone();\n        if (x.compareTo(y) < 0) {\n            var t = x;\n            x = y;\n            y = t;\n        }\n        var i = x.getLowestSetBit();\n        var g = y.getLowestSetBit();\n        if (g < 0) {\n            return x;\n        }\n        if (i < g) {\n            g = i;\n        }\n        if (g > 0) {\n            x.rShiftTo(g, x);\n            y.rShiftTo(g, y);\n        }\n        while (x.signum() > 0) {\n            if ((i = x.getLowestSetBit()) > 0) {\n                x.rShiftTo(i, x);\n            }\n            if ((i = y.getLowestSetBit()) > 0) {\n                y.rShiftTo(i, y);\n            }\n            if (x.compareTo(y) >= 0) {\n                x.subTo(y, x);\n                x.rShiftTo(1, x);\n            }\n            else {\n                y.subTo(x, y);\n                y.rShiftTo(1, y);\n            }\n        }\n        if (g > 0) {\n            y.lShiftTo(g, y);\n        }\n        return y;\n    };\n    // BigInteger.prototype.isProbablePrime = bnIsProbablePrime;\n    // (public) test primality with certainty >= 1-.5^t\n    BigInteger.prototype.isProbablePrime = function (t) {\n        var i;\n        var x = this.abs();\n        if (x.t == 1 && x[0] <= lowprimes[lowprimes.length - 1]) {\n            for (i = 0; i < lowprimes.length; ++i) {\n                if (x[0] == lowprimes[i]) {\n                    return true;\n                }\n            }\n            return false;\n        }\n        if (x.isEven()) {\n            return false;\n        }\n        i = 1;\n        while (i < lowprimes.length) {\n            var m = lowprimes[i];\n            var j = i + 1;\n            while (j < lowprimes.length && m < lplim) {\n                m *= lowprimes[j++];\n            }\n            m = x.modInt(m);\n            while (i < j) {\n                if (m % lowprimes[i++] == 0) {\n                    return false;\n                }\n            }\n        }\n        return x.millerRabin(t);\n    };\n    //#endregion PUBLIC\n    //#region PROTECTED\n    // BigInteger.prototype.copyTo = bnpCopyTo;\n    // (protected) copy this to r\n    BigInteger.prototype.copyTo = function (r) {\n        for (var i = this.t - 1; i >= 0; --i) {\n            r[i] = this[i];\n        }\n        r.t = this.t;\n        r.s = this.s;\n    };\n    // BigInteger.prototype.fromInt = bnpFromInt;\n    // (protected) set from integer value x, -DV <= x < DV\n    BigInteger.prototype.fromInt = function (x) {\n        this.t = 1;\n        this.s = (x < 0) ? -1 : 0;\n        if (x > 0) {\n            this[0] = x;\n        }\n        else if (x < -1) {\n            this[0] = x + this.DV;\n        }\n        else {\n            this.t = 0;\n        }\n    };\n    // BigInteger.prototype.fromString = bnpFromString;\n    // (protected) set from string and radix\n    BigInteger.prototype.fromString = function (s, b) {\n        var k;\n        if (b == 16) {\n            k = 4;\n        }\n        else if (b == 8) {\n            k = 3;\n        }\n        else if (b == 256) {\n            k = 8;\n            /* byte array */\n        }\n        else if (b == 2) {\n            k = 1;\n        }\n        else if (b == 32) {\n            k = 5;\n        }\n        else if (b == 4) {\n            k = 2;\n        }\n        else {\n            this.fromRadix(s, b);\n            return;\n        }\n        this.t = 0;\n        this.s = 0;\n        var i = s.length;\n        var mi = false;\n        var sh = 0;\n        while (--i >= 0) {\n            var x = (k == 8) ? (+s[i]) & 0xff : intAt(s, i);\n            if (x < 0) {\n                if (s.charAt(i) == "-") {\n                    mi = true;\n                }\n                continue;\n            }\n            mi = false;\n            if (sh == 0) {\n                this[this.t++] = x;\n            }\n            else if (sh + k > this.DB) {\n                this[this.t - 1] |= (x & ((1 << (this.DB - sh)) - 1)) << sh;\n                this[this.t++] = (x >> (this.DB - sh));\n            }\n            else {\n                this[this.t - 1] |= x << sh;\n            }\n            sh += k;\n            if (sh >= this.DB) {\n                sh -= this.DB;\n            }\n        }\n        if (k == 8 && ((+s[0]) & 0x80) != 0) {\n            this.s = -1;\n            if (sh > 0) {\n                this[this.t - 1] |= ((1 << (this.DB - sh)) - 1) << sh;\n            }\n        }\n        this.clamp();\n        if (mi) {\n            BigInteger.ZERO.subTo(this, this);\n        }\n    };\n    // BigInteger.prototype.clamp = bnpClamp;\n    // (protected) clamp off excess high words\n    BigInteger.prototype.clamp = function () {\n        var c = this.s & this.DM;\n        while (this.t > 0 && this[this.t - 1] == c) {\n            --this.t;\n        }\n    };\n    // BigInteger.prototype.dlShiftTo = bnpDLShiftTo;\n    // (protected) r = this << n*DB\n    BigInteger.prototype.dlShiftTo = function (n, r) {\n        var i;\n        for (i = this.t - 1; i >= 0; --i) {\n            r[i + n] = this[i];\n        }\n        for (i = n - 1; i >= 0; --i) {\n            r[i] = 0;\n        }\n        r.t = this.t + n;\n        r.s = this.s;\n    };\n    // BigInteger.prototype.drShiftTo = bnpDRShiftTo;\n    // (protected) r = this >> n*DB\n    BigInteger.prototype.drShiftTo = function (n, r) {\n        for (var i = n; i < this.t; ++i) {\n            r[i - n] = this[i];\n        }\n        r.t = Math.max(this.t - n, 0);\n        r.s = this.s;\n    };\n    // BigInteger.prototype.lShiftTo = bnpLShiftTo;\n    // (protected) r = this << n\n    BigInteger.prototype.lShiftTo = function (n, r) {\n        var bs = n % this.DB;\n        var cbs = this.DB - bs;\n        var bm = (1 << cbs) - 1;\n        var ds = Math.floor(n / this.DB);\n        var c = (this.s << bs) & this.DM;\n        for (var i = this.t - 1; i >= 0; --i) {\n            r[i + ds + 1] = (this[i] >> cbs) | c;\n            c = (this[i] & bm) << bs;\n        }\n        for (var i = ds - 1; i >= 0; --i) {\n            r[i] = 0;\n        }\n        r[ds] = c;\n        r.t = this.t + ds + 1;\n        r.s = this.s;\n        r.clamp();\n    };\n    // BigInteger.prototype.rShiftTo = bnpRShiftTo;\n    // (protected) r = this >> n\n    BigInteger.prototype.rShiftTo = function (n, r) {\n        r.s = this.s;\n        var ds = Math.floor(n / this.DB);\n        if (ds >= this.t) {\n            r.t = 0;\n            return;\n        }\n        var bs = n % this.DB;\n        var cbs = this.DB - bs;\n        var bm = (1 << bs) - 1;\n        r[0] = this[ds] >> bs;\n        for (var i = ds + 1; i < this.t; ++i) {\n            r[i - ds - 1] |= (this[i] & bm) << cbs;\n            r[i - ds] = this[i] >> bs;\n        }\n        if (bs > 0) {\n            r[this.t - ds - 1] |= (this.s & bm) << cbs;\n        }\n        r.t = this.t - ds;\n        r.clamp();\n    };\n    // BigInteger.prototype.subTo = bnpSubTo;\n    // (protected) r = this - a\n    BigInteger.prototype.subTo = function (a, r) {\n        var i = 0;\n        var c = 0;\n        var m = Math.min(a.t, this.t);\n        while (i < m) {\n            c += this[i] - a[i];\n            r[i++] = c & this.DM;\n            c >>= this.DB;\n        }\n        if (a.t < this.t) {\n            c -= a.s;\n            while (i < this.t) {\n                c += this[i];\n                r[i++] = c & this.DM;\n                c >>= this.DB;\n            }\n            c += this.s;\n        }\n        else {\n            c += this.s;\n            while (i < a.t) {\n                c -= a[i];\n                r[i++] = c & this.DM;\n                c >>= this.DB;\n            }\n            c -= a.s;\n        }\n        r.s = (c < 0) ? -1 : 0;\n        if (c < -1) {\n            r[i++] = this.DV + c;\n        }\n        else if (c > 0) {\n            r[i++] = c;\n        }\n        r.t = i;\n        r.clamp();\n    };\n    // BigInteger.prototype.multiplyTo = bnpMultiplyTo;\n    // (protected) r = this * a, r != this,a (HAC 14.12)\n    // "this" should be the larger one if appropriate.\n    BigInteger.prototype.multiplyTo = function (a, r) {\n        var x = this.abs();\n        var y = a.abs();\n        var i = x.t;\n        r.t = i + y.t;\n        while (--i >= 0) {\n            r[i] = 0;\n        }\n        for (i = 0; i < y.t; ++i) {\n            r[i + x.t] = x.am(0, y[i], r, i, 0, x.t);\n        }\n        r.s = 0;\n        r.clamp();\n        if (this.s != a.s) {\n            BigInteger.ZERO.subTo(r, r);\n        }\n    };\n    // BigInteger.prototype.squareTo = bnpSquareTo;\n    // (protected) r = this^2, r != this (HAC 14.16)\n    BigInteger.prototype.squareTo = function (r) {\n        var x = this.abs();\n        var i = r.t = 2 * x.t;\n        while (--i >= 0) {\n            r[i] = 0;\n        }\n        for (i = 0; i < x.t - 1; ++i) {\n            var c = x.am(i, x[i], r, 2 * i, 0, 1);\n            if ((r[i + x.t] += x.am(i + 1, 2 * x[i], r, 2 * i + 1, c, x.t - i - 1)) >= x.DV) {\n                r[i + x.t] -= x.DV;\n                r[i + x.t + 1] = 1;\n            }\n        }\n        if (r.t > 0) {\n            r[r.t - 1] += x.am(i, x[i], r, 2 * i, 0, 1);\n        }\n        r.s = 0;\n        r.clamp();\n    };\n    // BigInteger.prototype.divRemTo = bnpDivRemTo;\n    // (protected) divide this by m, quotient and remainder to q, r (HAC 14.20)\n    // r != q, this != m.  q or r may be null.\n    BigInteger.prototype.divRemTo = function (m, q, r) {\n        var pm = m.abs();\n        if (pm.t <= 0) {\n            return;\n        }\n        var pt = this.abs();\n        if (pt.t < pm.t) {\n            if (q != null) {\n                q.fromInt(0);\n            }\n            if (r != null) {\n                this.copyTo(r);\n            }\n            return;\n        }\n        if (r == null) {\n            r = nbi();\n        }\n        var y = nbi();\n        var ts = this.s;\n        var ms = m.s;\n        var nsh = this.DB - nbits(pm[pm.t - 1]); // normalize modulus\n        if (nsh > 0) {\n            pm.lShiftTo(nsh, y);\n            pt.lShiftTo(nsh, r);\n        }\n        else {\n            pm.copyTo(y);\n            pt.copyTo(r);\n        }\n        var ys = y.t;\n        var y0 = y[ys - 1];\n        if (y0 == 0) {\n            return;\n        }\n        var yt = y0 * (1 << this.F1) + ((ys > 1) ? y[ys - 2] >> this.F2 : 0);\n        var d1 = this.FV / yt;\n        var d2 = (1 << this.F1) / yt;\n        var e = 1 << this.F2;\n        var i = r.t;\n        var j = i - ys;\n        var t = (q == null) ? nbi() : q;\n        y.dlShiftTo(j, t);\n        if (r.compareTo(t) >= 0) {\n            r[r.t++] = 1;\n            r.subTo(t, r);\n        }\n        BigInteger.ONE.dlShiftTo(ys, t);\n        t.subTo(y, y); // "negative" y so we can replace sub with am later\n        while (y.t < ys) {\n            y[y.t++] = 0;\n        }\n        while (--j >= 0) {\n            // Estimate quotient digit\n            var qd = (r[--i] == y0) ? this.DM : Math.floor(r[i] * d1 + (r[i - 1] + e) * d2);\n            if ((r[i] += y.am(0, qd, r, j, 0, ys)) < qd) { // Try it out\n                y.dlShiftTo(j, t);\n                r.subTo(t, r);\n                while (r[i] < --qd) {\n                    r.subTo(t, r);\n                }\n            }\n        }\n        if (q != null) {\n            r.drShiftTo(ys, q);\n            if (ts != ms) {\n                BigInteger.ZERO.subTo(q, q);\n            }\n        }\n        r.t = ys;\n        r.clamp();\n        if (nsh > 0) {\n            r.rShiftTo(nsh, r);\n        } // Denormalize remainder\n        if (ts < 0) {\n            BigInteger.ZERO.subTo(r, r);\n        }\n    };\n    // BigInteger.prototype.invDigit = bnpInvDigit;\n    // (protected) return "-1/this % 2^DB"; useful for Mont. reduction\n    // justification:\n    //         xy == 1 (mod m)\n    //         xy =  1+km\n    //   xy(2-xy) = (1+km)(1-km)\n    // x[y(2-xy)] = 1-k^2m^2\n    // x[y(2-xy)] == 1 (mod m^2)\n    // if y is 1/x mod m, then y(2-xy) is 1/x mod m^2\n    // should reduce x and y(2-xy) by m^2 at each step to keep size bounded.\n    // JS multiply "overflows" differently from C/C++, so care is needed here.\n    BigInteger.prototype.invDigit = function () {\n        if (this.t < 1) {\n            return 0;\n        }\n        var x = this[0];\n        if ((x & 1) == 0) {\n            return 0;\n        }\n        var y = x & 3; // y == 1/x mod 2^2\n        y = (y * (2 - (x & 0xf) * y)) & 0xf; // y == 1/x mod 2^4\n        y = (y * (2 - (x & 0xff) * y)) & 0xff; // y == 1/x mod 2^8\n        y = (y * (2 - (((x & 0xffff) * y) & 0xffff))) & 0xffff; // y == 1/x mod 2^16\n        // last step - calculate inverse mod DV directly;\n        // assumes 16 < DB <= 32 and assumes ability to handle 48-bit ints\n        y = (y * (2 - x * y % this.DV)) % this.DV; // y == 1/x mod 2^dbits\n        // we really want the negative inverse, and -DV < y < DV\n        return (y > 0) ? this.DV - y : -y;\n    };\n    // BigInteger.prototype.isEven = bnpIsEven;\n    // (protected) true iff this is even\n    BigInteger.prototype.isEven = function () {\n        return ((this.t > 0) ? (this[0] & 1) : this.s) == 0;\n    };\n    // BigInteger.prototype.exp = bnpExp;\n    // (protected) this^e, e < 2^32, doing sqr and mul with "r" (HAC 14.79)\n    BigInteger.prototype.exp = function (e, z) {\n        if (e > 0xffffffff || e < 1) {\n            return BigInteger.ONE;\n        }\n        var r = nbi();\n        var r2 = nbi();\n        var g = z.convert(this);\n        var i = nbits(e) - 1;\n        g.copyTo(r);\n        while (--i >= 0) {\n            z.sqrTo(r, r2);\n            if ((e & (1 << i)) > 0) {\n                z.mulTo(r2, g, r);\n            }\n            else {\n                var t = r;\n                r = r2;\n                r2 = t;\n            }\n        }\n        return z.revert(r);\n    };\n    // BigInteger.prototype.chunkSize = bnpChunkSize;\n    // (protected) return x s.t. r^x < DV\n    BigInteger.prototype.chunkSize = function (r) {\n        return Math.floor(Math.LN2 * this.DB / Math.log(r));\n    };\n    // BigInteger.prototype.toRadix = bnpToRadix;\n    // (protected) convert to radix string\n    BigInteger.prototype.toRadix = function (b) {\n        if (b == null) {\n            b = 10;\n        }\n        if (this.signum() == 0 || b < 2 || b > 36) {\n            return "0";\n        }\n        var cs = this.chunkSize(b);\n        var a = Math.pow(b, cs);\n        var d = nbv(a);\n        var y = nbi();\n        var z = nbi();\n        var r = "";\n        this.divRemTo(d, y, z);\n        while (y.signum() > 0) {\n            r = (a + z.intValue()).toString(b).substr(1) + r;\n            y.divRemTo(d, y, z);\n        }\n        return z.intValue().toString(b) + r;\n    };\n    // BigInteger.prototype.fromRadix = bnpFromRadix;\n    // (protected) convert from radix string\n    BigInteger.prototype.fromRadix = function (s, b) {\n        this.fromInt(0);\n        if (b == null) {\n            b = 10;\n        }\n        var cs = this.chunkSize(b);\n        var d = Math.pow(b, cs);\n        var mi = false;\n        var j = 0;\n        var w = 0;\n        for (var i = 0; i < s.length; ++i) {\n            var x = intAt(s, i);\n            if (x < 0) {\n                if (s.charAt(i) == "-" && this.signum() == 0) {\n                    mi = true;\n                }\n                continue;\n            }\n            w = b * w + x;\n            if (++j >= cs) {\n                this.dMultiply(d);\n                this.dAddOffset(w, 0);\n                j = 0;\n                w = 0;\n            }\n        }\n        if (j > 0) {\n            this.dMultiply(Math.pow(b, j));\n            this.dAddOffset(w, 0);\n        }\n        if (mi) {\n            BigInteger.ZERO.subTo(this, this);\n        }\n    };\n    // BigInteger.prototype.fromNumber = bnpFromNumber;\n    // (protected) alternate constructor\n    BigInteger.prototype.fromNumber = function (a, b, c) {\n        if ("number" == typeof b) {\n            // new BigInteger(int,int,RNG)\n            if (a < 2) {\n                this.fromInt(1);\n            }\n            else {\n                this.fromNumber(a, c);\n                if (!this.testBit(a - 1)) {\n                    // force MSB set\n                    this.bitwiseTo(BigInteger.ONE.shiftLeft(a - 1), _util__WEBPACK_IMPORTED_MODULE_0__.op_or, this);\n                }\n                if (this.isEven()) {\n                    this.dAddOffset(1, 0);\n                } // force odd\n                while (!this.isProbablePrime(b)) {\n                    this.dAddOffset(2, 0);\n                    if (this.bitLength() > a) {\n                        this.subTo(BigInteger.ONE.shiftLeft(a - 1), this);\n                    }\n                }\n            }\n        }\n        else {\n            // new BigInteger(int,RNG)\n            var x = [];\n            var t = a & 7;\n            x.length = (a >> 3) + 1;\n            b.nextBytes(x);\n            if (t > 0) {\n                x[0] &= ((1 << t) - 1);\n            }\n            else {\n                x[0] = 0;\n            }\n            this.fromString(x, 256);\n        }\n    };\n    // BigInteger.prototype.bitwiseTo = bnpBitwiseTo;\n    // (protected) r = this op a (bitwise)\n    BigInteger.prototype.bitwiseTo = function (a, op, r) {\n        var i;\n        var f;\n        var m = Math.min(a.t, this.t);\n        for (i = 0; i < m; ++i) {\n            r[i] = op(this[i], a[i]);\n        }\n        if (a.t < this.t) {\n            f = a.s & this.DM;\n            for (i = m; i < this.t; ++i) {\n                r[i] = op(this[i], f);\n            }\n            r.t = this.t;\n        }\n        else {\n            f = this.s & this.DM;\n            for (i = m; i < a.t; ++i) {\n                r[i] = op(f, a[i]);\n            }\n            r.t = a.t;\n        }\n        r.s = op(this.s, a.s);\n        r.clamp();\n    };\n    // BigInteger.prototype.changeBit = bnpChangeBit;\n    // (protected) this op (1<<n)\n    BigInteger.prototype.changeBit = function (n, op) {\n        var r = BigInteger.ONE.shiftLeft(n);\n        this.bitwiseTo(r, op, r);\n        return r;\n    };\n    // BigInteger.prototype.addTo = bnpAddTo;\n    // (protected) r = this + a\n    BigInteger.prototype.addTo = function (a, r) {\n        var i = 0;\n        var c = 0;\n        var m = Math.min(a.t, this.t);\n        while (i < m) {\n            c += this[i] + a[i];\n            r[i++] = c & this.DM;\n            c >>= this.DB;\n        }\n        if (a.t < this.t) {\n            c += a.s;\n            while (i < this.t) {\n                c += this[i];\n                r[i++] = c & this.DM;\n                c >>= this.DB;\n            }\n            c += this.s;\n        }\n        else {\n            c += this.s;\n            while (i < a.t) {\n                c += a[i];\n                r[i++] = c & this.DM;\n                c >>= this.DB;\n            }\n            c += a.s;\n        }\n        r.s = (c < 0) ? -1 : 0;\n        if (c > 0) {\n            r[i++] = c;\n        }\n        else if (c < -1) {\n            r[i++] = this.DV + c;\n        }\n        r.t = i;\n        r.clamp();\n    };\n    // BigInteger.prototype.dMultiply = bnpDMultiply;\n    // (protected) this *= n, this >= 0, 1 < n < DV\n    BigInteger.prototype.dMultiply = function (n) {\n        this[this.t] = this.am(0, n - 1, this, 0, 0, this.t);\n        ++this.t;\n        this.clamp();\n    };\n    // BigInteger.prototype.dAddOffset = bnpDAddOffset;\n    // (protected) this += n << w words, this >= 0\n    BigInteger.prototype.dAddOffset = function (n, w) {\n        if (n == 0) {\n            return;\n        }\n        while (this.t <= w) {\n            this[this.t++] = 0;\n        }\n        this[w] += n;\n        while (this[w] >= this.DV) {\n            this[w] -= this.DV;\n            if (++w >= this.t) {\n                this[this.t++] = 0;\n            }\n            ++this[w];\n        }\n    };\n    // BigInteger.prototype.multiplyLowerTo = bnpMultiplyLowerTo;\n    // (protected) r = lower n words of "this * a", a.t <= n\n    // "this" should be the larger one if appropriate.\n    BigInteger.prototype.multiplyLowerTo = function (a, n, r) {\n        var i = Math.min(this.t + a.t, n);\n        r.s = 0; // assumes a,this >= 0\n        r.t = i;\n        while (i > 0) {\n            r[--i] = 0;\n        }\n        for (var j = r.t - this.t; i < j; ++i) {\n            r[i + this.t] = this.am(0, a[i], r, i, 0, this.t);\n        }\n        for (var j = Math.min(a.t, n); i < j; ++i) {\n            this.am(0, a[i], r, i, 0, n - i);\n        }\n        r.clamp();\n    };\n    // BigInteger.prototype.multiplyUpperTo = bnpMultiplyUpperTo;\n    // (protected) r = "this * a" without lower n words, n > 0\n    // "this" should be the larger one if appropriate.\n    BigInteger.prototype.multiplyUpperTo = function (a, n, r) {\n        --n;\n        var i = r.t = this.t + a.t - n;\n        r.s = 0; // assumes a,this >= 0\n        while (--i >= 0) {\n            r[i] = 0;\n        }\n        for (i = Math.max(n - this.t, 0); i < a.t; ++i) {\n            r[this.t + i - n] = this.am(n - i, a[i], r, 0, 0, this.t + i - n);\n        }\n        r.clamp();\n        r.drShiftTo(1, r);\n    };\n    // BigInteger.prototype.modInt = bnpModInt;\n    // (protected) this % n, n < 2^26\n    BigInteger.prototype.modInt = function (n) {\n        if (n <= 0) {\n            return 0;\n        }\n        var d = this.DV % n;\n        var r = (this.s < 0) ? n - 1 : 0;\n        if (this.t > 0) {\n            if (d == 0) {\n                r = this[0] % n;\n            }\n            else {\n                for (var i = this.t - 1; i >= 0; --i) {\n                    r = (d * r + this[i]) % n;\n                }\n            }\n        }\n        return r;\n    };\n    // BigInteger.prototype.millerRabin = bnpMillerRabin;\n    // (protected) true if probably prime (HAC 4.24, Miller-Rabin)\n    BigInteger.prototype.millerRabin = function (t) {\n        var n1 = this.subtract(BigInteger.ONE);\n        var k = n1.getLowestSetBit();\n        if (k <= 0) {\n            return false;\n        }\n        var r = n1.shiftRight(k);\n        t = (t + 1) >> 1;\n        if (t > lowprimes.length) {\n            t = lowprimes.length;\n        }\n        var a = nbi();\n        for (var i = 0; i < t; ++i) {\n            // Pick bases at random, instead of starting at 2\n            a.fromInt(lowprimes[Math.floor(Math.random() * lowprimes.length)]);\n            var y = a.modPow(r, this);\n            if (y.compareTo(BigInteger.ONE) != 0 && y.compareTo(n1) != 0) {\n                var j = 1;\n                while (j++ < k && y.compareTo(n1) != 0) {\n                    y = y.modPowInt(2, this);\n                    if (y.compareTo(BigInteger.ONE) == 0) {\n                        return false;\n                    }\n                }\n                if (y.compareTo(n1) != 0) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    };\n    // BigInteger.prototype.square = bnSquare;\n    // (public) this^2\n    BigInteger.prototype.square = function () {\n        var r = nbi();\n        this.squareTo(r);\n        return r;\n    };\n    //#region ASYNC\n    // Public API method\n    BigInteger.prototype.gcda = function (a, callback) {\n        var x = (this.s < 0) ? this.negate() : this.clone();\n        var y = (a.s < 0) ? a.negate() : a.clone();\n        if (x.compareTo(y) < 0) {\n            var t = x;\n            x = y;\n            y = t;\n        }\n        var i = x.getLowestSetBit();\n        var g = y.getLowestSetBit();\n        if (g < 0) {\n            callback(x);\n            return;\n        }\n        if (i < g) {\n            g = i;\n        }\n        if (g > 0) {\n            x.rShiftTo(g, x);\n            y.rShiftTo(g, y);\n        }\n        // Workhorse of the algorithm, gets called 200 - 800 times per 512 bit keygen.\n        var gcda1 = function () {\n            if ((i = x.getLowestSetBit()) > 0) {\n                x.rShiftTo(i, x);\n            }\n            if ((i = y.getLowestSetBit()) > 0) {\n                y.rShiftTo(i, y);\n            }\n            if (x.compareTo(y) >= 0) {\n                x.subTo(y, x);\n                x.rShiftTo(1, x);\n            }\n            else {\n                y.subTo(x, y);\n                y.rShiftTo(1, y);\n            }\n            if (!(x.signum() > 0)) {\n                if (g > 0) {\n                    y.lShiftTo(g, y);\n                }\n                setTimeout(function () { callback(y); }, 0); // escape\n            }\n            else {\n                setTimeout(gcda1, 0);\n            }\n        };\n        setTimeout(gcda1, 10);\n    };\n    // (protected) alternate constructor\n    BigInteger.prototype.fromNumberAsync = function (a, b, c, callback) {\n        if ("number" == typeof b) {\n            if (a < 2) {\n                this.fromInt(1);\n            }\n            else {\n                this.fromNumber(a, c);\n                if (!this.testBit(a - 1)) {\n                    this.bitwiseTo(BigInteger.ONE.shiftLeft(a - 1), _util__WEBPACK_IMPORTED_MODULE_0__.op_or, this);\n                }\n                if (this.isEven()) {\n                    this.dAddOffset(1, 0);\n                }\n                var bnp_1 = this;\n                var bnpfn1_1 = function () {\n                    bnp_1.dAddOffset(2, 0);\n                    if (bnp_1.bitLength() > a) {\n                        bnp_1.subTo(BigInteger.ONE.shiftLeft(a - 1), bnp_1);\n                    }\n                    if (bnp_1.isProbablePrime(b)) {\n                        setTimeout(function () { callback(); }, 0); // escape\n                    }\n                    else {\n                        setTimeout(bnpfn1_1, 0);\n                    }\n                };\n                setTimeout(bnpfn1_1, 0);\n            }\n        }\n        else {\n            var x = [];\n            var t = a & 7;\n            x.length = (a >> 3) + 1;\n            b.nextBytes(x);\n            if (t > 0) {\n                x[0] &= ((1 << t) - 1);\n            }\n            else {\n                x[0] = 0;\n            }\n            this.fromString(x, 256);\n        }\n    };\n    return BigInteger;\n}());\n\n//#region REDUCERS\n//#region NullExp\nvar NullExp = /** @class */ (function () {\n    function NullExp() {\n    }\n    // NullExp.prototype.convert = nNop;\n    NullExp.prototype.convert = function (x) {\n        return x;\n    };\n    // NullExp.prototype.revert = nNop;\n    NullExp.prototype.revert = function (x) {\n        return x;\n    };\n    // NullExp.prototype.mulTo = nMulTo;\n    NullExp.prototype.mulTo = function (x, y, r) {\n        x.multiplyTo(y, r);\n    };\n    // NullExp.prototype.sqrTo = nSqrTo;\n    NullExp.prototype.sqrTo = function (x, r) {\n        x.squareTo(r);\n    };\n    return NullExp;\n}());\n// Modular reduction using "classic" algorithm\nvar Classic = /** @class */ (function () {\n    function Classic(m) {\n        this.m = m;\n    }\n    // Classic.prototype.convert = cConvert;\n    Classic.prototype.convert = function (x) {\n        if (x.s < 0 || x.compareTo(this.m) >= 0) {\n            return x.mod(this.m);\n        }\n        else {\n            return x;\n        }\n    };\n    // Classic.prototype.revert = cRevert;\n    Classic.prototype.revert = function (x) {\n        return x;\n    };\n    // Classic.prototype.reduce = cReduce;\n    Classic.prototype.reduce = function (x) {\n        x.divRemTo(this.m, null, x);\n    };\n    // Classic.prototype.mulTo = cMulTo;\n    Classic.prototype.mulTo = function (x, y, r) {\n        x.multiplyTo(y, r);\n        this.reduce(r);\n    };\n    // Classic.prototype.sqrTo = cSqrTo;\n    Classic.prototype.sqrTo = function (x, r) {\n        x.squareTo(r);\n        this.reduce(r);\n    };\n    return Classic;\n}());\n//#endregion\n//#region Montgomery\n// Montgomery reduction\nvar Montgomery = /** @class */ (function () {\n    function Montgomery(m) {\n        this.m = m;\n        this.mp = m.invDigit();\n        this.mpl = this.mp & 0x7fff;\n        this.mph = this.mp >> 15;\n        this.um = (1 << (m.DB - 15)) - 1;\n        this.mt2 = 2 * m.t;\n    }\n    // Montgomery.prototype.convert = montConvert;\n    // xR mod m\n    Montgomery.prototype.convert = function (x) {\n        var r = nbi();\n        x.abs().dlShiftTo(this.m.t, r);\n        r.divRemTo(this.m, null, r);\n        if (x.s < 0 && r.compareTo(BigInteger.ZERO) > 0) {\n            this.m.subTo(r, r);\n        }\n        return r;\n    };\n    // Montgomery.prototype.revert = montRevert;\n    // x/R mod m\n    Montgomery.prototype.revert = function (x) {\n        var r = nbi();\n        x.copyTo(r);\n        this.reduce(r);\n        return r;\n    };\n    // Montgomery.prototype.reduce = montReduce;\n    // x = x/R mod m (HAC 14.32)\n    Montgomery.prototype.reduce = function (x) {\n        while (x.t <= this.mt2) {\n            // pad x so am has enough room later\n            x[x.t++] = 0;\n        }\n        for (var i = 0; i < this.m.t; ++i) {\n            // faster way of calculating u0 = x[i]*mp mod DV\n            var j = x[i] & 0x7fff;\n            var u0 = (j * this.mpl + (((j * this.mph + (x[i] >> 15) * this.mpl) & this.um) << 15)) & x.DM;\n            // use am to combine the multiply-shift-add into one call\n            j = i + this.m.t;\n            x[j] += this.m.am(0, u0, x, i, 0, this.m.t);\n            // propagate carry\n            while (x[j] >= x.DV) {\n                x[j] -= x.DV;\n                x[++j]++;\n            }\n        }\n        x.clamp();\n        x.drShiftTo(this.m.t, x);\n        if (x.compareTo(this.m) >= 0) {\n            x.subTo(this.m, x);\n        }\n    };\n    // Montgomery.prototype.mulTo = montMulTo;\n    // r = "xy/R mod m"; x,y != r\n    Montgomery.prototype.mulTo = function (x, y, r) {\n        x.multiplyTo(y, r);\n        this.reduce(r);\n    };\n    // Montgomery.prototype.sqrTo = montSqrTo;\n    // r = "x^2/R mod m"; x != r\n    Montgomery.prototype.sqrTo = function (x, r) {\n        x.squareTo(r);\n        this.reduce(r);\n    };\n    return Montgomery;\n}());\n//#endregion Montgomery\n//#region Barrett\n// Barrett modular reduction\nvar Barrett = /** @class */ (function () {\n    function Barrett(m) {\n        this.m = m;\n        // setup Barrett\n        this.r2 = nbi();\n        this.q3 = nbi();\n        BigInteger.ONE.dlShiftTo(2 * m.t, this.r2);\n        this.mu = this.r2.divide(m);\n    }\n    // Barrett.prototype.convert = barrettConvert;\n    Barrett.prototype.convert = function (x) {\n        if (x.s < 0 || x.t > 2 * this.m.t) {\n            return x.mod(this.m);\n        }\n        else if (x.compareTo(this.m) < 0) {\n            return x;\n        }\n        else {\n            var r = nbi();\n            x.copyTo(r);\n            this.reduce(r);\n            return r;\n        }\n    };\n    // Barrett.prototype.revert = barrettRevert;\n    Barrett.prototype.revert = function (x) {\n        return x;\n    };\n    // Barrett.prototype.reduce = barrettReduce;\n    // x = x mod m (HAC 14.42)\n    Barrett.prototype.reduce = function (x) {\n        x.drShiftTo(this.m.t - 1, this.r2);\n        if (x.t > this.m.t + 1) {\n            x.t = this.m.t + 1;\n            x.clamp();\n        }\n        this.mu.multiplyUpperTo(this.r2, this.m.t + 1, this.q3);\n        this.m.multiplyLowerTo(this.q3, this.m.t + 1, this.r2);\n        while (x.compareTo(this.r2) < 0) {\n            x.dAddOffset(1, this.m.t + 1);\n        }\n        x.subTo(this.r2, x);\n        while (x.compareTo(this.m) >= 0) {\n            x.subTo(this.m, x);\n        }\n    };\n    // Barrett.prototype.mulTo = barrettMulTo;\n    // r = x*y mod m; x,y != r\n    Barrett.prototype.mulTo = function (x, y, r) {\n        x.multiplyTo(y, r);\n        this.reduce(r);\n    };\n    // Barrett.prototype.sqrTo = barrettSqrTo;\n    // r = x^2 mod m; x != r\n    Barrett.prototype.sqrTo = function (x, r) {\n        x.squareTo(r);\n        this.reduce(r);\n    };\n    return Barrett;\n}());\n//#endregion\n//#endregion REDUCERS\n// return new, unset BigInteger\nfunction nbi() { return new BigInteger(null); }\nfunction parseBigInt(str, r) {\n    return new BigInteger(str, r);\n}\n// am: Compute w_j += (x*this_i), propagate carries,\n// c is initial carry, returns final carry.\n// c < 3*dvalue, x < 2*dvalue, this_i < dvalue\n// We need to select the fastest one that works in this environment.\nvar inBrowser = typeof navigator !== "undefined";\nif (inBrowser && j_lm && (navigator.appName == "Microsoft Internet Explorer")) {\n    // am2 avoids a big mult-and-extract completely.\n    // Max digit bits should be <= 30 because we do bitwise ops\n    // on values up to 2*hdvalue^2-hdvalue-1 (< 2^31)\n    BigInteger.prototype.am = function am2(i, x, w, j, c, n) {\n        var xl = x & 0x7fff;\n        var xh = x >> 15;\n        while (--n >= 0) {\n            var l = this[i] & 0x7fff;\n            var h = this[i++] >> 15;\n            var m = xh * l + h * xl;\n            l = xl * l + ((m & 0x7fff) << 15) + w[j] + (c & 0x3fffffff);\n            c = (l >>> 30) + (m >>> 15) + xh * h + (c >>> 30);\n            w[j++] = l & 0x3fffffff;\n        }\n        return c;\n    };\n    dbits = 30;\n}\nelse if (inBrowser && j_lm && (navigator.appName != "Netscape")) {\n    // am1: use a single mult and divide to get the high bits,\n    // max digit bits should be 26 because\n    // max internal value = 2*dvalue^2-2*dvalue (< 2^53)\n    BigInteger.prototype.am = function am1(i, x, w, j, c, n) {\n        while (--n >= 0) {\n            var v = x * this[i++] + w[j] + c;\n            c = Math.floor(v / 0x4000000);\n            w[j++] = v & 0x3ffffff;\n        }\n        return c;\n    };\n    dbits = 26;\n}\nelse { // Mozilla/Netscape seems to prefer am3\n    // Alternately, set max digit bits to 28 since some\n    // browsers slow down when dealing with 32-bit numbers.\n    BigInteger.prototype.am = function am3(i, x, w, j, c, n) {\n        var xl = x & 0x3fff;\n        var xh = x >> 14;\n        while (--n >= 0) {\n            var l = this[i] & 0x3fff;\n            var h = this[i++] >> 14;\n            var m = xh * l + h * xl;\n            l = xl * l + ((m & 0x3fff) << 14) + w[j] + c;\n            c = (l >> 28) + (m >> 14) + xh * h;\n            w[j++] = l & 0xfffffff;\n        }\n        return c;\n    };\n    dbits = 28;\n}\nBigInteger.prototype.DB = dbits;\nBigInteger.prototype.DM = ((1 << dbits) - 1);\nBigInteger.prototype.DV = (1 << dbits);\nvar BI_FP = 52;\nBigInteger.prototype.FV = Math.pow(2, BI_FP);\nBigInteger.prototype.F1 = BI_FP - dbits;\nBigInteger.prototype.F2 = 2 * dbits - BI_FP;\n// Digit conversions\nvar BI_RC = [];\nvar rr;\nvar vv;\nrr = "0".charCodeAt(0);\nfor (vv = 0; vv <= 9; ++vv) {\n    BI_RC[rr++] = vv;\n}\nrr = "a".charCodeAt(0);\nfor (vv = 10; vv < 36; ++vv) {\n    BI_RC[rr++] = vv;\n}\nrr = "A".charCodeAt(0);\nfor (vv = 10; vv < 36; ++vv) {\n    BI_RC[rr++] = vv;\n}\nfunction intAt(s, i) {\n    var c = BI_RC[s.charCodeAt(i)];\n    return (c == null) ? -1 : c;\n}\n// return bigint initialized to value\nfunction nbv(i) {\n    var r = nbi();\n    r.fromInt(i);\n    return r;\n}\n// returns bit length of the integer x\nfunction nbits(x) {\n    var r = 1;\n    var t;\n    if ((t = x >>> 16) != 0) {\n        x = t;\n        r += 16;\n    }\n    if ((t = x >> 8) != 0) {\n        x = t;\n        r += 8;\n    }\n    if ((t = x >> 4) != 0) {\n        x = t;\n        r += 4;\n    }\n    if ((t = x >> 2) != 0) {\n        x = t;\n        r += 2;\n    }\n    if ((t = x >> 1) != 0) {\n        x = t;\n        r += 1;\n    }\n    return r;\n}\n// "constants"\nBigInteger.ZERO = nbv(0);\nBigInteger.ONE = nbv(1);\n\n\n//# sourceURL=webpack://JSEncrypt/./lib/lib/jsbn/jsbn.js?')},"./lib/lib/jsbn/prng4.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Arcfour": () => (/* binding */ Arcfour),\n/* harmony export */   "prng_newstate": () => (/* binding */ prng_newstate),\n/* harmony export */   "rng_psize": () => (/* binding */ rng_psize)\n/* harmony export */ });\n// prng4.js - uses Arcfour as a PRNG\nvar Arcfour = /** @class */ (function () {\n    function Arcfour() {\n        this.i = 0;\n        this.j = 0;\n        this.S = [];\n    }\n    // Arcfour.prototype.init = ARC4init;\n    // Initialize arcfour context from key, an array of ints, each from [0..255]\n    Arcfour.prototype.init = function (key) {\n        var i;\n        var j;\n        var t;\n        for (i = 0; i < 256; ++i) {\n            this.S[i] = i;\n        }\n        j = 0;\n        for (i = 0; i < 256; ++i) {\n            j = (j + this.S[i] + key[i % key.length]) & 255;\n            t = this.S[i];\n            this.S[i] = this.S[j];\n            this.S[j] = t;\n        }\n        this.i = 0;\n        this.j = 0;\n    };\n    // Arcfour.prototype.next = ARC4next;\n    Arcfour.prototype.next = function () {\n        var t;\n        this.i = (this.i + 1) & 255;\n        this.j = (this.j + this.S[this.i]) & 255;\n        t = this.S[this.i];\n        this.S[this.i] = this.S[this.j];\n        this.S[this.j] = t;\n        return this.S[(t + this.S[this.i]) & 255];\n    };\n    return Arcfour;\n}());\n\n// Plug in your RNG constructor here\nfunction prng_newstate() {\n    return new Arcfour();\n}\n// Pool size must be a multiple of 4 and greater than 32.\n// An array of bytes the size of the pool will be passed to init()\nvar rng_psize = 256;\n\n\n//# sourceURL=webpack://JSEncrypt/./lib/lib/jsbn/prng4.js?')},"./lib/lib/jsbn/rng.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "SecureRandom": () => (/* binding */ SecureRandom)\n/* harmony export */ });\n/* harmony import */ var _prng4__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./prng4 */ "./lib/lib/jsbn/prng4.js");\n// Random number generator - requires a PRNG backend, e.g. prng4.js\n\nvar rng_state;\nvar rng_pool = null;\nvar rng_pptr;\n// Initialize the pool with junk if needed.\nif (rng_pool == null) {\n    rng_pool = [];\n    rng_pptr = 0;\n    var t = void 0;\n    if (typeof window !== \'undefined\' && window.crypto && window.crypto.getRandomValues) {\n        // Extract entropy (2048 bits) from RNG if available\n        var z = new Uint32Array(256);\n        window.crypto.getRandomValues(z);\n        for (t = 0; t < z.length; ++t) {\n            rng_pool[rng_pptr++] = z[t] & 255;\n        }\n    }\n    // Use mouse events for entropy, if we do not have enough entropy by the time\n    // we need it, entropy will be generated by Math.random.\n    var count = 0;\n    var onMouseMoveListener_1 = function (ev) {\n        count = count || 0;\n        if (count >= 256 || rng_pptr >= _prng4__WEBPACK_IMPORTED_MODULE_0__.rng_psize) {\n            if (window.removeEventListener) {\n                window.removeEventListener("mousemove", onMouseMoveListener_1, false);\n            }\n            else if (window.detachEvent) {\n                window.detachEvent("onmousemove", onMouseMoveListener_1);\n            }\n            return;\n        }\n        try {\n            var mouseCoordinates = ev.x + ev.y;\n            rng_pool[rng_pptr++] = mouseCoordinates & 255;\n            count += 1;\n        }\n        catch (e) {\n            // Sometimes Firefox will deny permission to access event properties for some reason. Ignore.\n        }\n    };\n    if (typeof window !== \'undefined\') {\n        if (window.addEventListener) {\n            window.addEventListener("mousemove", onMouseMoveListener_1, false);\n        }\n        else if (window.attachEvent) {\n            window.attachEvent("onmousemove", onMouseMoveListener_1);\n        }\n    }\n}\nfunction rng_get_byte() {\n    if (rng_state == null) {\n        rng_state = (0,_prng4__WEBPACK_IMPORTED_MODULE_0__.prng_newstate)();\n        // At this point, we may not have collected enough entropy.  If not, fall back to Math.random\n        while (rng_pptr < _prng4__WEBPACK_IMPORTED_MODULE_0__.rng_psize) {\n            var random = Math.floor(65536 * Math.random());\n            rng_pool[rng_pptr++] = random & 255;\n        }\n        rng_state.init(rng_pool);\n        for (rng_pptr = 0; rng_pptr < rng_pool.length; ++rng_pptr) {\n            rng_pool[rng_pptr] = 0;\n        }\n        rng_pptr = 0;\n    }\n    // TODO: allow reseeding after first request\n    return rng_state.next();\n}\nvar SecureRandom = /** @class */ (function () {\n    function SecureRandom() {\n    }\n    SecureRandom.prototype.nextBytes = function (ba) {\n        for (var i = 0; i < ba.length; ++i) {\n            ba[i] = rng_get_byte();\n        }\n    };\n    return SecureRandom;\n}());\n\n\n\n//# sourceURL=webpack://JSEncrypt/./lib/lib/jsbn/rng.js?')},"./lib/lib/jsbn/rsa.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "RSAKey": () => (/* binding */ RSAKey)\n/* harmony export */ });\n/* harmony import */ var _jsbn__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./jsbn */ "./lib/lib/jsbn/jsbn.js");\n/* harmony import */ var _rng__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rng */ "./lib/lib/jsbn/rng.js");\n// Depends on jsbn.js and rng.js\n// Version 1.1: support utf-8 encoding in pkcs1pad2\n// convert a (hex) string to a bignum object\n\n\n// function linebrk(s,n) {\n//   var ret = "";\n//   var i = 0;\n//   while(i + n < s.length) {\n//     ret += s.substring(i,i+n) + "\\n";\n//     i += n;\n//   }\n//   return ret + s.substring(i,s.length);\n// }\n// function byte2Hex(b) {\n//   if(b < 0x10)\n//     return "0" + b.toString(16);\n//   else\n//     return b.toString(16);\n// }\nfunction pkcs1pad1(s, n) {\n    if (n < s.length + 22) {\n        console.error("Message too long for RSA");\n        return null;\n    }\n    var len = n - s.length - 6;\n    var filler = "";\n    for (var f = 0; f < len; f += 2) {\n        filler += "ff";\n    }\n    var m = "0001" + filler + "00" + s;\n    return (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.parseBigInt)(m, 16);\n}\n// PKCS#1 (type 2, random) pad input string s to n bytes, and return a bigint\nfunction pkcs1pad2(s, n) {\n    if (n < s.length + 11) { // TODO: fix for utf-8\n        console.error("Message too long for RSA");\n        return null;\n    }\n    var ba = [];\n    var i = s.length - 1;\n    while (i >= 0 && n > 0) {\n        var c = s.charCodeAt(i--);\n        if (c < 128) { // encode using utf-8\n            ba[--n] = c;\n        }\n        else if ((c > 127) && (c < 2048)) {\n            ba[--n] = (c & 63) | 128;\n            ba[--n] = (c >> 6) | 192;\n        }\n        else {\n            ba[--n] = (c & 63) | 128;\n            ba[--n] = ((c >> 6) & 63) | 128;\n            ba[--n] = (c >> 12) | 224;\n        }\n    }\n    ba[--n] = 0;\n    var rng = new _rng__WEBPACK_IMPORTED_MODULE_1__.SecureRandom();\n    var x = [];\n    while (n > 2) { // random non-zero pad\n        x[0] = 0;\n        while (x[0] == 0) {\n            rng.nextBytes(x);\n        }\n        ba[--n] = x[0];\n    }\n    ba[--n] = 2;\n    ba[--n] = 0;\n    return new _jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger(ba);\n}\n// "empty" RSA key constructor\nvar RSAKey = /** @class */ (function () {\n    function RSAKey() {\n        this.n = null;\n        this.e = 0;\n        this.d = null;\n        this.p = null;\n        this.q = null;\n        this.dmp1 = null;\n        this.dmq1 = null;\n        this.coeff = null;\n    }\n    //#region PROTECTED\n    // protected\n    // RSAKey.prototype.doPublic = RSADoPublic;\n    // Perform raw public operation on "x": return x^e (mod n)\n    RSAKey.prototype.doPublic = function (x) {\n        return x.modPowInt(this.e, this.n);\n    };\n    // RSAKey.prototype.doPrivate = RSADoPrivate;\n    // Perform raw private operation on "x": return x^d (mod n)\n    RSAKey.prototype.doPrivate = function (x) {\n        if (this.p == null || this.q == null) {\n            return x.modPow(this.d, this.n);\n        }\n        // TODO: re-calculate any missing CRT params\n        var xp = x.mod(this.p).modPow(this.dmp1, this.p);\n        var xq = x.mod(this.q).modPow(this.dmq1, this.q);\n        while (xp.compareTo(xq) < 0) {\n            xp = xp.add(this.p);\n        }\n        return xp.subtract(xq).multiply(this.coeff).mod(this.p).multiply(this.q).add(xq);\n    };\n    //#endregion PROTECTED\n    //#region PUBLIC\n    // RSAKey.prototype.setPublic = RSASetPublic;\n    // Set the public key fields N and e from hex strings\n    RSAKey.prototype.setPublic = function (N, E) {\n        if (N != null && E != null && N.length > 0 && E.length > 0) {\n            this.n = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.parseBigInt)(N, 16);\n            this.e = parseInt(E, 16);\n        }\n        else {\n            console.error("Invalid RSA public key");\n        }\n    };\n    // RSAKey.prototype.encrypt = RSAEncrypt;\n    // Return the PKCS#1 RSA encryption of "text" as an even-length hex string\n    RSAKey.prototype.encrypt = function (text) {\n        var maxLength = (this.n.bitLength() + 7) >> 3;\n        var m = pkcs1pad2(text, maxLength);\n        if (m == null) {\n            return null;\n        }\n        var c = this.doPublic(m);\n        if (c == null) {\n            return null;\n        }\n        var h = c.toString(16);\n        var length = h.length;\n        // fix zero before result\n        for (var i = 0; i < maxLength * 2 - length; i++) {\n            h = "0" + h;\n        }\n        return h;\n    };\n    // RSAKey.prototype.setPrivate = RSASetPrivate;\n    // Set the private key fields N, e, and d from hex strings\n    RSAKey.prototype.setPrivate = function (N, E, D) {\n        if (N != null && E != null && N.length > 0 && E.length > 0) {\n            this.n = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.parseBigInt)(N, 16);\n            this.e = parseInt(E, 16);\n            this.d = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.parseBigInt)(D, 16);\n        }\n        else {\n            console.error("Invalid RSA private key");\n        }\n    };\n    // RSAKey.prototype.setPrivateEx = RSASetPrivateEx;\n    // Set the private key fields N, e, d and CRT params from hex strings\n    RSAKey.prototype.setPrivateEx = function (N, E, D, P, Q, DP, DQ, C) {\n        if (N != null && E != null && N.length > 0 && E.length > 0) {\n            this.n = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.parseBigInt)(N, 16);\n            this.e = parseInt(E, 16);\n            this.d = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.parseBigInt)(D, 16);\n            this.p = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.parseBigInt)(P, 16);\n            this.q = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.parseBigInt)(Q, 16);\n            this.dmp1 = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.parseBigInt)(DP, 16);\n            this.dmq1 = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.parseBigInt)(DQ, 16);\n            this.coeff = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.parseBigInt)(C, 16);\n        }\n        else {\n            console.error("Invalid RSA private key");\n        }\n    };\n    // RSAKey.prototype.generate = RSAGenerate;\n    // Generate a new random private key B bits long, using public expt E\n    RSAKey.prototype.generate = function (B, E) {\n        var rng = new _rng__WEBPACK_IMPORTED_MODULE_1__.SecureRandom();\n        var qs = B >> 1;\n        this.e = parseInt(E, 16);\n        var ee = new _jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger(E, 16);\n        for (;;) {\n            for (;;) {\n                this.p = new _jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger(B - qs, 1, rng);\n                if (this.p.subtract(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE).gcd(ee).compareTo(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE) == 0 && this.p.isProbablePrime(10)) {\n                    break;\n                }\n            }\n            for (;;) {\n                this.q = new _jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger(qs, 1, rng);\n                if (this.q.subtract(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE).gcd(ee).compareTo(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE) == 0 && this.q.isProbablePrime(10)) {\n                    break;\n                }\n            }\n            if (this.p.compareTo(this.q) <= 0) {\n                var t = this.p;\n                this.p = this.q;\n                this.q = t;\n            }\n            var p1 = this.p.subtract(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE);\n            var q1 = this.q.subtract(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE);\n            var phi = p1.multiply(q1);\n            if (phi.gcd(ee).compareTo(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE) == 0) {\n                this.n = this.p.multiply(this.q);\n                this.d = ee.modInverse(phi);\n                this.dmp1 = this.d.mod(p1);\n                this.dmq1 = this.d.mod(q1);\n                this.coeff = this.q.modInverse(this.p);\n                break;\n            }\n        }\n    };\n    // RSAKey.prototype.decrypt = RSADecrypt;\n    // Return the PKCS#1 RSA decryption of "ctext".\n    // "ctext" is an even-length hex string and the output is a plain string.\n    RSAKey.prototype.decrypt = function (ctext) {\n        var c = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.parseBigInt)(ctext, 16);\n        var m = this.doPrivate(c);\n        if (m == null) {\n            return null;\n        }\n        return pkcs1unpad2(m, (this.n.bitLength() + 7) >> 3);\n    };\n    // Generate a new random private key B bits long, using public expt E\n    RSAKey.prototype.generateAsync = function (B, E, callback) {\n        var rng = new _rng__WEBPACK_IMPORTED_MODULE_1__.SecureRandom();\n        var qs = B >> 1;\n        this.e = parseInt(E, 16);\n        var ee = new _jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger(E, 16);\n        var rsa = this;\n        // These functions have non-descript names because they were originally for(;;) loops.\n        // I don\'t know about cryptography to give them better names than loop1-4.\n        var loop1 = function () {\n            var loop4 = function () {\n                if (rsa.p.compareTo(rsa.q) <= 0) {\n                    var t = rsa.p;\n                    rsa.p = rsa.q;\n                    rsa.q = t;\n                }\n                var p1 = rsa.p.subtract(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE);\n                var q1 = rsa.q.subtract(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE);\n                var phi = p1.multiply(q1);\n                if (phi.gcd(ee).compareTo(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE) == 0) {\n                    rsa.n = rsa.p.multiply(rsa.q);\n                    rsa.d = ee.modInverse(phi);\n                    rsa.dmp1 = rsa.d.mod(p1);\n                    rsa.dmq1 = rsa.d.mod(q1);\n                    rsa.coeff = rsa.q.modInverse(rsa.p);\n                    setTimeout(function () { callback(); }, 0); // escape\n                }\n                else {\n                    setTimeout(loop1, 0);\n                }\n            };\n            var loop3 = function () {\n                rsa.q = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.nbi)();\n                rsa.q.fromNumberAsync(qs, 1, rng, function () {\n                    rsa.q.subtract(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE).gcda(ee, function (r) {\n                        if (r.compareTo(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE) == 0 && rsa.q.isProbablePrime(10)) {\n                            setTimeout(loop4, 0);\n                        }\n                        else {\n                            setTimeout(loop3, 0);\n                        }\n                    });\n                });\n            };\n            var loop2 = function () {\n                rsa.p = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.nbi)();\n                rsa.p.fromNumberAsync(B - qs, 1, rng, function () {\n                    rsa.p.subtract(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE).gcda(ee, function (r) {\n                        if (r.compareTo(_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE) == 0 && rsa.p.isProbablePrime(10)) {\n                            setTimeout(loop3, 0);\n                        }\n                        else {\n                            setTimeout(loop2, 0);\n                        }\n                    });\n                });\n            };\n            setTimeout(loop2, 0);\n        };\n        setTimeout(loop1, 0);\n    };\n    RSAKey.prototype.sign = function (text, digestMethod, digestName) {\n        var header = getDigestHeader(digestName);\n        var digest = header + digestMethod(text).toString();\n        var m = pkcs1pad1(digest, this.n.bitLength() / 4);\n        if (m == null) {\n            return null;\n        }\n        var c = this.doPrivate(m);\n        if (c == null) {\n            return null;\n        }\n        var h = c.toString(16);\n        if ((h.length & 1) == 0) {\n            return h;\n        }\n        else {\n            return "0" + h;\n        }\n    };\n    RSAKey.prototype.verify = function (text, signature, digestMethod) {\n        var c = (0,_jsbn__WEBPACK_IMPORTED_MODULE_0__.parseBigInt)(signature, 16);\n        var m = this.doPublic(c);\n        if (m == null) {\n            return null;\n        }\n        var unpadded = m.toString(16).replace(/^1f+00/, "");\n        var digest = removeDigestHeader(unpadded);\n        return digest == digestMethod(text).toString();\n    };\n    return RSAKey;\n}());\n\n// Undo PKCS#1 (type 2, random) padding and, if valid, return the plaintext\nfunction pkcs1unpad2(d, n) {\n    var b = d.toByteArray();\n    var i = 0;\n    while (i < b.length && b[i] == 0) {\n        ++i;\n    }\n    if (b.length - i != n - 1 || b[i] != 2) {\n        return null;\n    }\n    ++i;\n    while (b[i] != 0) {\n        if (++i >= b.length) {\n            return null;\n        }\n    }\n    var ret = "";\n    while (++i < b.length) {\n        var c = b[i] & 255;\n        if (c < 128) { // utf-8 decode\n            ret += String.fromCharCode(c);\n        }\n        else if ((c > 191) && (c < 224)) {\n            ret += String.fromCharCode(((c & 31) << 6) | (b[i + 1] & 63));\n            ++i;\n        }\n        else {\n            ret += String.fromCharCode(((c & 15) << 12) | ((b[i + 1] & 63) << 6) | (b[i + 2] & 63));\n            i += 2;\n        }\n    }\n    return ret;\n}\n// https://tools.ietf.org/html/rfc3447#page-43\nvar DIGEST_HEADERS = {\n    md2: "3020300c06082a864886f70d020205000410",\n    md5: "3020300c06082a864886f70d020505000410",\n    sha1: "3021300906052b0e03021a05000414",\n    sha224: "302d300d06096086480165030402040500041c",\n    sha256: "3031300d060960864801650304020105000420",\n    sha384: "3041300d060960864801650304020205000430",\n    sha512: "3051300d060960864801650304020305000440",\n    ripemd160: "3021300906052b2403020105000414"\n};\nfunction getDigestHeader(name) {\n    return DIGEST_HEADERS[name] || "";\n}\nfunction removeDigestHeader(str) {\n    for (var name_1 in DIGEST_HEADERS) {\n        if (DIGEST_HEADERS.hasOwnProperty(name_1)) {\n            var header = DIGEST_HEADERS[name_1];\n            var len = header.length;\n            if (str.substr(0, len) == header) {\n                return str.substr(len);\n            }\n        }\n    }\n    return str;\n}\n// Return the PKCS#1 RSA encryption of "text" as a Base64-encoded string\n// function RSAEncryptB64(text) {\n//  var h = this.encrypt(text);\n//  if(h) return hex2b64(h); else return null;\n// }\n// public\n// RSAKey.prototype.encrypt_b64 = RSAEncryptB64;\n\n\n//# sourceURL=webpack://JSEncrypt/./lib/lib/jsbn/rsa.js?')},"./lib/lib/jsbn/util.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "cbit": () => (/* binding */ cbit),\n/* harmony export */   "int2char": () => (/* binding */ int2char),\n/* harmony export */   "lbit": () => (/* binding */ lbit),\n/* harmony export */   "op_and": () => (/* binding */ op_and),\n/* harmony export */   "op_andnot": () => (/* binding */ op_andnot),\n/* harmony export */   "op_or": () => (/* binding */ op_or),\n/* harmony export */   "op_xor": () => (/* binding */ op_xor)\n/* harmony export */ });\nvar BI_RM = "0123456789abcdefghijklmnopqrstuvwxyz";\nfunction int2char(n) {\n    return BI_RM.charAt(n);\n}\n//#region BIT_OPERATIONS\n// (public) this & a\nfunction op_and(x, y) {\n    return x & y;\n}\n// (public) this | a\nfunction op_or(x, y) {\n    return x | y;\n}\n// (public) this ^ a\nfunction op_xor(x, y) {\n    return x ^ y;\n}\n// (public) this & ~a\nfunction op_andnot(x, y) {\n    return x & ~y;\n}\n// return index of lowest 1-bit in x, x < 2^31\nfunction lbit(x) {\n    if (x == 0) {\n        return -1;\n    }\n    var r = 0;\n    if ((x & 0xffff) == 0) {\n        x >>= 16;\n        r += 16;\n    }\n    if ((x & 0xff) == 0) {\n        x >>= 8;\n        r += 8;\n    }\n    if ((x & 0xf) == 0) {\n        x >>= 4;\n        r += 4;\n    }\n    if ((x & 3) == 0) {\n        x >>= 2;\n        r += 2;\n    }\n    if ((x & 1) == 0) {\n        ++r;\n    }\n    return r;\n}\n// return number of 1 bits in x\nfunction cbit(x) {\n    var r = 0;\n    while (x != 0) {\n        x &= x - 1;\n        ++r;\n    }\n    return r;\n}\n//#endregion BIT_OPERATIONS\n\n\n//# sourceURL=webpack://JSEncrypt/./lib/lib/jsbn/util.js?')},"./lib/lib/jsrsasign/asn1-1.0.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"KJUR\": () => (/* binding */ KJUR)\n/* harmony export */ });\n/* harmony import */ var _jsbn_jsbn__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../jsbn/jsbn */ \"./lib/lib/jsbn/jsbn.js\");\n/* harmony import */ var _yahoo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./yahoo */ \"./lib/lib/jsrsasign/yahoo.js\");\n/* asn1-1.0.13.js (c) 2013-2017 Kenji Urushima | kjur.github.com/jsrsasign/license\n */\n/*\n * asn1.js - ASN.1 DER encoder classes\n *\n * Copyright (c) 2013-2017 Kenji Urushima (kenji.urushima@gmail.com)\n *\n * This software is licensed under the terms of the MIT License.\n * https://kjur.github.io/jsrsasign/license\n *\n * The above copyright and license notice shall be\n * included in all copies or substantial portions of the Software.\n */\n\n\n/**\n * @fileOverview\n * @name asn1-1.0.js\n * @author Kenji Urushima kenji.urushima@gmail.com\n * @version asn1 1.0.13 (2017-Jun-02)\n * @since jsrsasign 2.1\n * @license <a href=\"https://kjur.github.io/jsrsasign/license/\">MIT License</a>\n */\n/**\n * kjur's class library name space\n * <p>\n * This name space provides following name spaces:\n * <ul>\n * <li>{@link KJUR.asn1} - ASN.1 primitive hexadecimal encoder</li>\n * <li>{@link KJUR.asn1.x509} - ASN.1 structure for X.509 certificate and CRL</li>\n * <li>{@link KJUR.crypto} - Java Cryptographic Extension(JCE) style MessageDigest/Signature\n * class and utilities</li>\n * </ul>\n * </p>\n * NOTE: Please ignore method summary and document of this namespace. This caused by a bug of jsdoc2.\n * @name KJUR\n * @namespace kjur's class library name space\n */\nvar KJUR = {};\n/**\n * kjur's ASN.1 class library name space\n * <p>\n * This is ITU-T X.690 ASN.1 DER encoder class library and\n * class structure and methods is very similar to\n * org.bouncycastle.asn1 package of\n * well known BouncyCaslte Cryptography Library.\n * <h4>PROVIDING ASN.1 PRIMITIVES</h4>\n * Here are ASN.1 DER primitive classes.\n * <ul>\n * <li>0x01 {@link KJUR.asn1.DERBoolean}</li>\n * <li>0x02 {@link KJUR.asn1.DERInteger}</li>\n * <li>0x03 {@link KJUR.asn1.DERBitString}</li>\n * <li>0x04 {@link KJUR.asn1.DEROctetString}</li>\n * <li>0x05 {@link KJUR.asn1.DERNull}</li>\n * <li>0x06 {@link KJUR.asn1.DERObjectIdentifier}</li>\n * <li>0x0a {@link KJUR.asn1.DEREnumerated}</li>\n * <li>0x0c {@link KJUR.asn1.DERUTF8String}</li>\n * <li>0x12 {@link KJUR.asn1.DERNumericString}</li>\n * <li>0x13 {@link KJUR.asn1.DERPrintableString}</li>\n * <li>0x14 {@link KJUR.asn1.DERTeletexString}</li>\n * <li>0x16 {@link KJUR.asn1.DERIA5String}</li>\n * <li>0x17 {@link KJUR.asn1.DERUTCTime}</li>\n * <li>0x18 {@link KJUR.asn1.DERGeneralizedTime}</li>\n * <li>0x30 {@link KJUR.asn1.DERSequence}</li>\n * <li>0x31 {@link KJUR.asn1.DERSet}</li>\n * </ul>\n * <h4>OTHER ASN.1 CLASSES</h4>\n * <ul>\n * <li>{@link KJUR.asn1.ASN1Object}</li>\n * <li>{@link KJUR.asn1.DERAbstractString}</li>\n * <li>{@link KJUR.asn1.DERAbstractTime}</li>\n * <li>{@link KJUR.asn1.DERAbstractStructured}</li>\n * <li>{@link KJUR.asn1.DERTaggedObject}</li>\n * </ul>\n * <h4>SUB NAME SPACES</h4>\n * <ul>\n * <li>{@link KJUR.asn1.cades} - CAdES long term signature format</li>\n * <li>{@link KJUR.asn1.cms} - Cryptographic Message Syntax</li>\n * <li>{@link KJUR.asn1.csr} - Certificate Signing Request (CSR/PKCS#10)</li>\n * <li>{@link KJUR.asn1.tsp} - RFC 3161 Timestamping Protocol Format</li>\n * <li>{@link KJUR.asn1.x509} - RFC 5280 X.509 certificate and CRL</li>\n * </ul>\n * </p>\n * NOTE: Please ignore method summary and document of this namespace.\n * This caused by a bug of jsdoc2.\n * @name KJUR.asn1\n * @namespace\n */\nif (typeof KJUR.asn1 == \"undefined\" || !KJUR.asn1)\n    KJUR.asn1 = {};\n/**\n * ASN1 utilities class\n * @name KJUR.asn1.ASN1Util\n * @class ASN1 utilities class\n * @since asn1 1.0.2\n */\nKJUR.asn1.ASN1Util = new function () {\n    this.integerToByteHex = function (i) {\n        var h = i.toString(16);\n        if ((h.length % 2) == 1)\n            h = '0' + h;\n        return h;\n    };\n    this.bigIntToMinTwosComplementsHex = function (bigIntegerValue) {\n        var h = bigIntegerValue.toString(16);\n        if (h.substr(0, 1) != '-') {\n            if (h.length % 2 == 1) {\n                h = '0' + h;\n            }\n            else {\n                if (!h.match(/^[0-7]/)) {\n                    h = '00' + h;\n                }\n            }\n        }\n        else {\n            var hPos = h.substr(1);\n            var xorLen = hPos.length;\n            if (xorLen % 2 == 1) {\n                xorLen += 1;\n            }\n            else {\n                if (!h.match(/^[0-7]/)) {\n                    xorLen += 2;\n                }\n            }\n            var hMask = '';\n            for (var i = 0; i < xorLen; i++) {\n                hMask += 'f';\n            }\n            var biMask = new _jsbn_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger(hMask, 16);\n            var biNeg = biMask.xor(bigIntegerValue).add(_jsbn_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger.ONE);\n            h = biNeg.toString(16).replace(/^-/, '');\n        }\n        return h;\n    };\n    /**\n     * get PEM string from hexadecimal data and header string\n     * @name getPEMStringFromHex\n     * @memberOf KJUR.asn1.ASN1Util\n     * @function\n     * @param {String} dataHex hexadecimal string of PEM body\n     * @param {String} pemHeader PEM header string (ex. 'RSA PRIVATE KEY')\n     * @return {String} PEM formatted string of input data\n     * @description\n     * This method converts a hexadecimal string to a PEM string with\n     * a specified header. Its line break will be CRLF(\"\\r\\n\").\n     * @example\n     * var pem  = KJUR.asn1.ASN1Util.getPEMStringFromHex('616161', 'RSA PRIVATE KEY');\n     * // value of pem will be:\n     * -----BEGIN PRIVATE KEY-----\n     * YWFh\n     * -----END PRIVATE KEY-----\n     */\n    this.getPEMStringFromHex = function (dataHex, pemHeader) {\n        return hextopem(dataHex, pemHeader);\n    };\n    /**\n     * generate ASN1Object specifed by JSON parameters\n     * @name newObject\n     * @memberOf KJUR.asn1.ASN1Util\n     * @function\n     * @param {Array} param JSON parameter to generate ASN1Object\n     * @return {KJUR.asn1.ASN1Object} generated object\n     * @since asn1 1.0.3\n     * @description\n     * generate any ASN1Object specified by JSON param\n     * including ASN.1 primitive or structured.\n     * Generally 'param' can be described as follows:\n     * <blockquote>\n     * {TYPE-OF-ASNOBJ: ASN1OBJ-PARAMETER}\n     * </blockquote>\n     * 'TYPE-OF-ASN1OBJ' can be one of following symbols:\n     * <ul>\n     * <li>'bool' - DERBoolean</li>\n     * <li>'int' - DERInteger</li>\n     * <li>'bitstr' - DERBitString</li>\n     * <li>'octstr' - DEROctetString</li>\n     * <li>'null' - DERNull</li>\n     * <li>'oid' - DERObjectIdentifier</li>\n     * <li>'enum' - DEREnumerated</li>\n     * <li>'utf8str' - DERUTF8String</li>\n     * <li>'numstr' - DERNumericString</li>\n     * <li>'prnstr' - DERPrintableString</li>\n     * <li>'telstr' - DERTeletexString</li>\n     * <li>'ia5str' - DERIA5String</li>\n     * <li>'utctime' - DERUTCTime</li>\n     * <li>'gentime' - DERGeneralizedTime</li>\n     * <li>'seq' - DERSequence</li>\n     * <li>'set' - DERSet</li>\n     * <li>'tag' - DERTaggedObject</li>\n     * </ul>\n     * @example\n     * newObject({'prnstr': 'aaa'});\n     * newObject({'seq': [{'int': 3}, {'prnstr': 'aaa'}]})\n     * // ASN.1 Tagged Object\n     * newObject({'tag': {'tag': 'a1',\n     *                    'explicit': true,\n     *                    'obj': {'seq': [{'int': 3}, {'prnstr': 'aaa'}]}}});\n     * // more simple representation of ASN.1 Tagged Object\n     * newObject({'tag': ['a1',\n     *                    true,\n     *                    {'seq': [\n     *                      {'int': 3},\n     *                      {'prnstr': 'aaa'}]}\n     *                   ]});\n     */\n    this.newObject = function (param) {\n        var _KJUR = KJUR, _KJUR_asn1 = _KJUR.asn1, _DERBoolean = _KJUR_asn1.DERBoolean, _DERInteger = _KJUR_asn1.DERInteger, _DERBitString = _KJUR_asn1.DERBitString, _DEROctetString = _KJUR_asn1.DEROctetString, _DERNull = _KJUR_asn1.DERNull, _DERObjectIdentifier = _KJUR_asn1.DERObjectIdentifier, _DEREnumerated = _KJUR_asn1.DEREnumerated, _DERUTF8String = _KJUR_asn1.DERUTF8String, _DERNumericString = _KJUR_asn1.DERNumericString, _DERPrintableString = _KJUR_asn1.DERPrintableString, _DERTeletexString = _KJUR_asn1.DERTeletexString, _DERIA5String = _KJUR_asn1.DERIA5String, _DERUTCTime = _KJUR_asn1.DERUTCTime, _DERGeneralizedTime = _KJUR_asn1.DERGeneralizedTime, _DERSequence = _KJUR_asn1.DERSequence, _DERSet = _KJUR_asn1.DERSet, _DERTaggedObject = _KJUR_asn1.DERTaggedObject, _newObject = _KJUR_asn1.ASN1Util.newObject;\n        var keys = Object.keys(param);\n        if (keys.length != 1)\n            throw \"key of param shall be only one.\";\n        var key = keys[0];\n        if (\":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:\".indexOf(\":\" + key + \":\") == -1)\n            throw \"undefined key: \" + key;\n        if (key == \"bool\")\n            return new _DERBoolean(param[key]);\n        if (key == \"int\")\n            return new _DERInteger(param[key]);\n        if (key == \"bitstr\")\n            return new _DERBitString(param[key]);\n        if (key == \"octstr\")\n            return new _DEROctetString(param[key]);\n        if (key == \"null\")\n            return new _DERNull(param[key]);\n        if (key == \"oid\")\n            return new _DERObjectIdentifier(param[key]);\n        if (key == \"enum\")\n            return new _DEREnumerated(param[key]);\n        if (key == \"utf8str\")\n            return new _DERUTF8String(param[key]);\n        if (key == \"numstr\")\n            return new _DERNumericString(param[key]);\n        if (key == \"prnstr\")\n            return new _DERPrintableString(param[key]);\n        if (key == \"telstr\")\n            return new _DERTeletexString(param[key]);\n        if (key == \"ia5str\")\n            return new _DERIA5String(param[key]);\n        if (key == \"utctime\")\n            return new _DERUTCTime(param[key]);\n        if (key == \"gentime\")\n            return new _DERGeneralizedTime(param[key]);\n        if (key == \"seq\") {\n            var paramList = param[key];\n            var a = [];\n            for (var i = 0; i < paramList.length; i++) {\n                var asn1Obj = _newObject(paramList[i]);\n                a.push(asn1Obj);\n            }\n            return new _DERSequence({ 'array': a });\n        }\n        if (key == \"set\") {\n            var paramList = param[key];\n            var a = [];\n            for (var i = 0; i < paramList.length; i++) {\n                var asn1Obj = _newObject(paramList[i]);\n                a.push(asn1Obj);\n            }\n            return new _DERSet({ 'array': a });\n        }\n        if (key == \"tag\") {\n            var tagParam = param[key];\n            if (Object.prototype.toString.call(tagParam) === '[object Array]' &&\n                tagParam.length == 3) {\n                var obj = _newObject(tagParam[2]);\n                return new _DERTaggedObject({ tag: tagParam[0],\n                    explicit: tagParam[1],\n                    obj: obj });\n            }\n            else {\n                var newParam = {};\n                if (tagParam.explicit !== undefined)\n                    newParam.explicit = tagParam.explicit;\n                if (tagParam.tag !== undefined)\n                    newParam.tag = tagParam.tag;\n                if (tagParam.obj === undefined)\n                    throw \"obj shall be specified for 'tag'.\";\n                newParam.obj = _newObject(tagParam.obj);\n                return new _DERTaggedObject(newParam);\n            }\n        }\n    };\n    /**\n     * get encoded hexadecimal string of ASN1Object specifed by JSON parameters\n     * @name jsonToASN1HEX\n     * @memberOf KJUR.asn1.ASN1Util\n     * @function\n     * @param {Array} param JSON parameter to generate ASN1Object\n     * @return hexadecimal string of ASN1Object\n     * @since asn1 1.0.4\n     * @description\n     * As for ASN.1 object representation of JSON object,\n     * please see {@link newObject}.\n     * @example\n     * jsonToASN1HEX({'prnstr': 'aaa'});\n     */\n    this.jsonToASN1HEX = function (param) {\n        var asn1Obj = this.newObject(param);\n        return asn1Obj.getEncodedHex();\n    };\n};\n/**\n * get dot noted oid number string from hexadecimal value of OID\n * @name oidHexToInt\n * @memberOf KJUR.asn1.ASN1Util\n * @function\n * @param {String} hex hexadecimal value of object identifier\n * @return {String} dot noted string of object identifier\n * @since jsrsasign 4.8.3 asn1 1.0.7\n * @description\n * This static method converts from hexadecimal string representation of\n * ASN.1 value of object identifier to oid number string.\n * @example\n * KJUR.asn1.ASN1Util.oidHexToInt('550406') &rarr; \"2.5.4.6\"\n */\nKJUR.asn1.ASN1Util.oidHexToInt = function (hex) {\n    var s = \"\";\n    var i01 = parseInt(hex.substr(0, 2), 16);\n    var i0 = Math.floor(i01 / 40);\n    var i1 = i01 % 40;\n    var s = i0 + \".\" + i1;\n    var binbuf = \"\";\n    for (var i = 2; i < hex.length; i += 2) {\n        var value = parseInt(hex.substr(i, 2), 16);\n        var bin = (\"00000000\" + value.toString(2)).slice(-8);\n        binbuf = binbuf + bin.substr(1, 7);\n        if (bin.substr(0, 1) == \"0\") {\n            var bi = new _jsbn_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger(binbuf, 2);\n            s = s + \".\" + bi.toString(10);\n            binbuf = \"\";\n        }\n    }\n    ;\n    return s;\n};\n/**\n * get hexadecimal value of object identifier from dot noted oid value\n * @name oidIntToHex\n * @memberOf KJUR.asn1.ASN1Util\n * @function\n * @param {String} oidString dot noted string of object identifier\n * @return {String} hexadecimal value of object identifier\n * @since jsrsasign 4.8.3 asn1 1.0.7\n * @description\n * This static method converts from object identifier value string.\n * to hexadecimal string representation of it.\n * @example\n * KJUR.asn1.ASN1Util.oidIntToHex(\"2.5.4.6\") &rarr; \"550406\"\n */\nKJUR.asn1.ASN1Util.oidIntToHex = function (oidString) {\n    var itox = function (i) {\n        var h = i.toString(16);\n        if (h.length == 1)\n            h = '0' + h;\n        return h;\n    };\n    var roidtox = function (roid) {\n        var h = '';\n        var bi = new _jsbn_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger(roid, 10);\n        var b = bi.toString(2);\n        var padLen = 7 - b.length % 7;\n        if (padLen == 7)\n            padLen = 0;\n        var bPad = '';\n        for (var i = 0; i < padLen; i++)\n            bPad += '0';\n        b = bPad + b;\n        for (var i = 0; i < b.length - 1; i += 7) {\n            var b8 = b.substr(i, 7);\n            if (i != b.length - 7)\n                b8 = '1' + b8;\n            h += itox(parseInt(b8, 2));\n        }\n        return h;\n    };\n    if (!oidString.match(/^[0-9.]+$/)) {\n        throw \"malformed oid string: \" + oidString;\n    }\n    var h = '';\n    var a = oidString.split('.');\n    var i0 = parseInt(a[0]) * 40 + parseInt(a[1]);\n    h += itox(i0);\n    a.splice(0, 2);\n    for (var i = 0; i < a.length; i++) {\n        h += roidtox(a[i]);\n    }\n    return h;\n};\n// ********************************************************************\n//  Abstract ASN.1 Classes\n// ********************************************************************\n// ********************************************************************\n/**\n * base class for ASN.1 DER encoder object\n * @name KJUR.asn1.ASN1Object\n * @class base class for ASN.1 DER encoder object\n * @property {Boolean} isModified flag whether internal data was changed\n * @property {String} hTLV hexadecimal string of ASN.1 TLV\n * @property {String} hT hexadecimal string of ASN.1 TLV tag(T)\n * @property {String} hL hexadecimal string of ASN.1 TLV length(L)\n * @property {String} hV hexadecimal string of ASN.1 TLV value(V)\n * @description\n */\nKJUR.asn1.ASN1Object = function () {\n    var isModified = true;\n    var hTLV = null;\n    var hT = '00';\n    var hL = '00';\n    var hV = '';\n    /**\n     * get hexadecimal ASN.1 TLV length(L) bytes from TLV value(V)\n     * @name getLengthHexFromValue\n     * @memberOf KJUR.asn1.ASN1Object#\n     * @function\n     * @return {String} hexadecimal string of ASN.1 TLV length(L)\n     */\n    this.getLengthHexFromValue = function () {\n        if (typeof this.hV == \"undefined\" || this.hV == null) {\n            throw \"this.hV is null or undefined.\";\n        }\n        if (this.hV.length % 2 == 1) {\n            throw \"value hex must be even length: n=\" + hV.length + \",v=\" + this.hV;\n        }\n        var n = this.hV.length / 2;\n        var hN = n.toString(16);\n        if (hN.length % 2 == 1) {\n            hN = \"0\" + hN;\n        }\n        if (n < 128) {\n            return hN;\n        }\n        else {\n            var hNlen = hN.length / 2;\n            if (hNlen > 15) {\n                throw \"ASN.1 length too long to represent by 8x: n = \" + n.toString(16);\n            }\n            var head = 128 + hNlen;\n            return head.toString(16) + hN;\n        }\n    };\n    /**\n     * get hexadecimal string of ASN.1 TLV bytes\n     * @name getEncodedHex\n     * @memberOf KJUR.asn1.ASN1Object#\n     * @function\n     * @return {String} hexadecimal string of ASN.1 TLV\n     */\n    this.getEncodedHex = function () {\n        if (this.hTLV == null || this.isModified) {\n            this.hV = this.getFreshValueHex();\n            this.hL = this.getLengthHexFromValue();\n            this.hTLV = this.hT + this.hL + this.hV;\n            this.isModified = false;\n            //alert(\"first time: \" + this.hTLV);\n        }\n        return this.hTLV;\n    };\n    /**\n     * get hexadecimal string of ASN.1 TLV value(V) bytes\n     * @name getValueHex\n     * @memberOf KJUR.asn1.ASN1Object#\n     * @function\n     * @return {String} hexadecimal string of ASN.1 TLV value(V) bytes\n     */\n    this.getValueHex = function () {\n        this.getEncodedHex();\n        return this.hV;\n    };\n    this.getFreshValueHex = function () {\n        return '';\n    };\n};\n// == BEGIN DERAbstractString ================================================\n/**\n * base class for ASN.1 DER string classes\n * @name KJUR.asn1.DERAbstractString\n * @class base class for ASN.1 DER string classes\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @property {String} s internal string of value\n * @extends KJUR.asn1.ASN1Object\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>str - specify initial ASN.1 value(V) by a string</li>\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n * </ul>\n * NOTE: 'params' can be omitted.\n */\nKJUR.asn1.DERAbstractString = function (params) {\n    KJUR.asn1.DERAbstractString.superclass.constructor.call(this);\n    var s = null;\n    var hV = null;\n    /**\n     * get string value of this string object\n     * @name getString\n     * @memberOf KJUR.asn1.DERAbstractString#\n     * @function\n     * @return {String} string value of this string object\n     */\n    this.getString = function () {\n        return this.s;\n    };\n    /**\n     * set value by a string\n     * @name setString\n     * @memberOf KJUR.asn1.DERAbstractString#\n     * @function\n     * @param {String} newS value by a string to set\n     */\n    this.setString = function (newS) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.s = newS;\n        this.hV = stohex(this.s);\n    };\n    /**\n     * set value by a hexadecimal string\n     * @name setStringHex\n     * @memberOf KJUR.asn1.DERAbstractString#\n     * @function\n     * @param {String} newHexString value by a hexadecimal string to set\n     */\n    this.setStringHex = function (newHexString) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.s = null;\n        this.hV = newHexString;\n    };\n    this.getFreshValueHex = function () {\n        return this.hV;\n    };\n    if (typeof params != \"undefined\") {\n        if (typeof params == \"string\") {\n            this.setString(params);\n        }\n        else if (typeof params['str'] != \"undefined\") {\n            this.setString(params['str']);\n        }\n        else if (typeof params['hex'] != \"undefined\") {\n            this.setStringHex(params['hex']);\n        }\n    }\n};\n_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERAbstractString, KJUR.asn1.ASN1Object);\n// == END   DERAbstractString ================================================\n// == BEGIN DERAbstractTime ==================================================\n/**\n * base class for ASN.1 DER Generalized/UTCTime class\n * @name KJUR.asn1.DERAbstractTime\n * @class base class for ASN.1 DER Generalized/UTCTime class\n * @param {Array} params associative array of parameters (ex. {'str': '130430235959Z'})\n * @extends KJUR.asn1.ASN1Object\n * @description\n * @see KJUR.asn1.ASN1Object - superclass\n */\nKJUR.asn1.DERAbstractTime = function (params) {\n    KJUR.asn1.DERAbstractTime.superclass.constructor.call(this);\n    var s = null;\n    var date = null;\n    // --- PRIVATE METHODS --------------------\n    this.localDateToUTC = function (d) {\n        utc = d.getTime() + (d.getTimezoneOffset() * 60000);\n        var utcDate = new Date(utc);\n        return utcDate;\n    };\n    /*\n     * format date string by Data object\n     * @name formatDate\n     * @memberOf KJUR.asn1.AbstractTime;\n     * @param {Date} dateObject\n     * @param {string} type 'utc' or 'gen'\n     * @param {boolean} withMillis flag for with millisections or not\n     * @description\n     * 'withMillis' flag is supported from asn1 1.0.6.\n     */\n    this.formatDate = function (dateObject, type, withMillis) {\n        var pad = this.zeroPadding;\n        var d = this.localDateToUTC(dateObject);\n        var year = String(d.getFullYear());\n        if (type == 'utc')\n            year = year.substr(2, 2);\n        var month = pad(String(d.getMonth() + 1), 2);\n        var day = pad(String(d.getDate()), 2);\n        var hour = pad(String(d.getHours()), 2);\n        var min = pad(String(d.getMinutes()), 2);\n        var sec = pad(String(d.getSeconds()), 2);\n        var s = year + month + day + hour + min + sec;\n        if (withMillis === true) {\n            var millis = d.getMilliseconds();\n            if (millis != 0) {\n                var sMillis = pad(String(millis), 3);\n                sMillis = sMillis.replace(/[0]+$/, \"\");\n                s = s + \".\" + sMillis;\n            }\n        }\n        return s + \"Z\";\n    };\n    this.zeroPadding = function (s, len) {\n        if (s.length >= len)\n            return s;\n        return new Array(len - s.length + 1).join('0') + s;\n    };\n    // --- PUBLIC METHODS --------------------\n    /**\n     * get string value of this string object\n     * @name getString\n     * @memberOf KJUR.asn1.DERAbstractTime#\n     * @function\n     * @return {String} string value of this time object\n     */\n    this.getString = function () {\n        return this.s;\n    };\n    /**\n     * set value by a string\n     * @name setString\n     * @memberOf KJUR.asn1.DERAbstractTime#\n     * @function\n     * @param {String} newS value by a string to set such like \"130430235959Z\"\n     */\n    this.setString = function (newS) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.s = newS;\n        this.hV = stohex(newS);\n    };\n    /**\n     * set value by a Date object\n     * @name setByDateValue\n     * @memberOf KJUR.asn1.DERAbstractTime#\n     * @function\n     * @param {Integer} year year of date (ex. 2013)\n     * @param {Integer} month month of date between 1 and 12 (ex. 12)\n     * @param {Integer} day day of month\n     * @param {Integer} hour hours of date\n     * @param {Integer} min minutes of date\n     * @param {Integer} sec seconds of date\n     */\n    this.setByDateValue = function (year, month, day, hour, min, sec) {\n        var dateObject = new Date(Date.UTC(year, month - 1, day, hour, min, sec, 0));\n        this.setByDate(dateObject);\n    };\n    this.getFreshValueHex = function () {\n        return this.hV;\n    };\n};\n_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERAbstractTime, KJUR.asn1.ASN1Object);\n// == END   DERAbstractTime ==================================================\n// == BEGIN DERAbstractStructured ============================================\n/**\n * base class for ASN.1 DER structured class\n * @name KJUR.asn1.DERAbstractStructured\n * @class base class for ASN.1 DER structured class\n * @property {Array} asn1Array internal array of ASN1Object\n * @extends KJUR.asn1.ASN1Object\n * @description\n * @see KJUR.asn1.ASN1Object - superclass\n */\nKJUR.asn1.DERAbstractStructured = function (params) {\n    KJUR.asn1.DERAbstractString.superclass.constructor.call(this);\n    var asn1Array = null;\n    /**\n     * set value by array of ASN1Object\n     * @name setByASN1ObjectArray\n     * @memberOf KJUR.asn1.DERAbstractStructured#\n     * @function\n     * @param {array} asn1ObjectArray array of ASN1Object to set\n     */\n    this.setByASN1ObjectArray = function (asn1ObjectArray) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.asn1Array = asn1ObjectArray;\n    };\n    /**\n     * append an ASN1Object to internal array\n     * @name appendASN1Object\n     * @memberOf KJUR.asn1.DERAbstractStructured#\n     * @function\n     * @param {ASN1Object} asn1Object to add\n     */\n    this.appendASN1Object = function (asn1Object) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.asn1Array.push(asn1Object);\n    };\n    this.asn1Array = new Array();\n    if (typeof params != \"undefined\") {\n        if (typeof params['array'] != \"undefined\") {\n            this.asn1Array = params['array'];\n        }\n    }\n};\n_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERAbstractStructured, KJUR.asn1.ASN1Object);\n// ********************************************************************\n//  ASN.1 Object Classes\n// ********************************************************************\n// ********************************************************************\n/**\n * class for ASN.1 DER Boolean\n * @name KJUR.asn1.DERBoolean\n * @class class for ASN.1 DER Boolean\n * @extends KJUR.asn1.ASN1Object\n * @description\n * @see KJUR.asn1.ASN1Object - superclass\n */\nKJUR.asn1.DERBoolean = function () {\n    KJUR.asn1.DERBoolean.superclass.constructor.call(this);\n    this.hT = \"01\";\n    this.hTLV = \"0101ff\";\n};\n_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERBoolean, KJUR.asn1.ASN1Object);\n// ********************************************************************\n/**\n * class for ASN.1 DER Integer\n * @name KJUR.asn1.DERInteger\n * @class class for ASN.1 DER Integer\n * @extends KJUR.asn1.ASN1Object\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>int - specify initial ASN.1 value(V) by integer value</li>\n * <li>bigint - specify initial ASN.1 value(V) by BigInteger object</li>\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n * </ul>\n * NOTE: 'params' can be omitted.\n */\nKJUR.asn1.DERInteger = function (params) {\n    KJUR.asn1.DERInteger.superclass.constructor.call(this);\n    this.hT = \"02\";\n    /**\n     * set value by Tom Wu's BigInteger object\n     * @name setByBigInteger\n     * @memberOf KJUR.asn1.DERInteger#\n     * @function\n     * @param {BigInteger} bigIntegerValue to set\n     */\n    this.setByBigInteger = function (bigIntegerValue) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.hV = KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(bigIntegerValue);\n    };\n    /**\n     * set value by integer value\n     * @name setByInteger\n     * @memberOf KJUR.asn1.DERInteger\n     * @function\n     * @param {Integer} integer value to set\n     */\n    this.setByInteger = function (intValue) {\n        var bi = new _jsbn_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger(String(intValue), 10);\n        this.setByBigInteger(bi);\n    };\n    /**\n     * set value by integer value\n     * @name setValueHex\n     * @memberOf KJUR.asn1.DERInteger#\n     * @function\n     * @param {String} hexadecimal string of integer value\n     * @description\n     * <br/>\n     * NOTE: Value shall be represented by minimum octet length of\n     * two's complement representation.\n     * @example\n     * new KJUR.asn1.DERInteger(123);\n     * new KJUR.asn1.DERInteger({'int': 123});\n     * new KJUR.asn1.DERInteger({'hex': '1fad'});\n     */\n    this.setValueHex = function (newHexString) {\n        this.hV = newHexString;\n    };\n    this.getFreshValueHex = function () {\n        return this.hV;\n    };\n    if (typeof params != \"undefined\") {\n        if (typeof params['bigint'] != \"undefined\") {\n            this.setByBigInteger(params['bigint']);\n        }\n        else if (typeof params['int'] != \"undefined\") {\n            this.setByInteger(params['int']);\n        }\n        else if (typeof params == \"number\") {\n            this.setByInteger(params);\n        }\n        else if (typeof params['hex'] != \"undefined\") {\n            this.setValueHex(params['hex']);\n        }\n    }\n};\n_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERInteger, KJUR.asn1.ASN1Object);\n// ********************************************************************\n/**\n * class for ASN.1 DER encoded BitString primitive\n * @name KJUR.asn1.DERBitString\n * @class class for ASN.1 DER encoded BitString primitive\n * @extends KJUR.asn1.ASN1Object\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>bin - specify binary string (ex. '10111')</li>\n * <li>array - specify array of boolean (ex. [true,false,true,true])</li>\n * <li>hex - specify hexadecimal string of ASN.1 value(V) including unused bits</li>\n * <li>obj - specify {@link KJUR.asn1.ASN1Util.newObject}\n * argument for \"BitString encapsulates\" structure.</li>\n * </ul>\n * NOTE1: 'params' can be omitted.<br/>\n * NOTE2: 'obj' parameter have been supported since\n * asn1 1.0.11, jsrsasign 6.1.1 (2016-Sep-25).<br/>\n * @example\n * // default constructor\n * o = new KJUR.asn1.DERBitString();\n * // initialize with binary string\n * o = new KJUR.asn1.DERBitString({bin: \"1011\"});\n * // initialize with boolean array\n * o = new KJUR.asn1.DERBitString({array: [true,false,true,true]});\n * // initialize with hexadecimal string (04 is unused bits)\n * o = new KJUR.asn1.DEROctetString({hex: \"04bac0\"});\n * // initialize with ASN1Util.newObject argument for encapsulated\n * o = new KJUR.asn1.DERBitString({obj: {seq: [{int: 3}, {prnstr: 'aaa'}]}});\n * // above generates a ASN.1 data like this:\n * // BIT STRING, encapsulates {\n * //   SEQUENCE {\n * //     INTEGER 3\n * //     PrintableString 'aaa'\n * //     }\n * //   }\n */\nKJUR.asn1.DERBitString = function (params) {\n    if (params !== undefined && typeof params.obj !== \"undefined\") {\n        var o = KJUR.asn1.ASN1Util.newObject(params.obj);\n        params.hex = \"00\" + o.getEncodedHex();\n    }\n    KJUR.asn1.DERBitString.superclass.constructor.call(this);\n    this.hT = \"03\";\n    /**\n     * set ASN.1 value(V) by a hexadecimal string including unused bits\n     * @name setHexValueIncludingUnusedBits\n     * @memberOf KJUR.asn1.DERBitString#\n     * @function\n     * @param {String} newHexStringIncludingUnusedBits\n     */\n    this.setHexValueIncludingUnusedBits = function (newHexStringIncludingUnusedBits) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.hV = newHexStringIncludingUnusedBits;\n    };\n    /**\n     * set ASN.1 value(V) by unused bit and hexadecimal string of value\n     * @name setUnusedBitsAndHexValue\n     * @memberOf KJUR.asn1.DERBitString#\n     * @function\n     * @param {Integer} unusedBits\n     * @param {String} hValue\n     */\n    this.setUnusedBitsAndHexValue = function (unusedBits, hValue) {\n        if (unusedBits < 0 || 7 < unusedBits) {\n            throw \"unused bits shall be from 0 to 7: u = \" + unusedBits;\n        }\n        var hUnusedBits = \"0\" + unusedBits;\n        this.hTLV = null;\n        this.isModified = true;\n        this.hV = hUnusedBits + hValue;\n    };\n    /**\n     * set ASN.1 DER BitString by binary string<br/>\n     * @name setByBinaryString\n     * @memberOf KJUR.asn1.DERBitString#\n     * @function\n     * @param {String} binaryString binary value string (i.e. '10111')\n     * @description\n     * Its unused bits will be calculated automatically by length of\n     * 'binaryValue'. <br/>\n     * NOTE: Trailing zeros '0' will be ignored.\n     * @example\n     * o = new KJUR.asn1.DERBitString();\n     * o.setByBooleanArray(\"01011\");\n     */\n    this.setByBinaryString = function (binaryString) {\n        binaryString = binaryString.replace(/0+$/, '');\n        var unusedBits = 8 - binaryString.length % 8;\n        if (unusedBits == 8)\n            unusedBits = 0;\n        for (var i = 0; i <= unusedBits; i++) {\n            binaryString += '0';\n        }\n        var h = '';\n        for (var i = 0; i < binaryString.length - 1; i += 8) {\n            var b = binaryString.substr(i, 8);\n            var x = parseInt(b, 2).toString(16);\n            if (x.length == 1)\n                x = '0' + x;\n            h += x;\n        }\n        this.hTLV = null;\n        this.isModified = true;\n        this.hV = '0' + unusedBits + h;\n    };\n    /**\n     * set ASN.1 TLV value(V) by an array of boolean<br/>\n     * @name setByBooleanArray\n     * @memberOf KJUR.asn1.DERBitString#\n     * @function\n     * @param {array} booleanArray array of boolean (ex. [true, false, true])\n     * @description\n     * NOTE: Trailing falses will be ignored in the ASN.1 DER Object.\n     * @example\n     * o = new KJUR.asn1.DERBitString();\n     * o.setByBooleanArray([false, true, false, true, true]);\n     */\n    this.setByBooleanArray = function (booleanArray) {\n        var s = '';\n        for (var i = 0; i < booleanArray.length; i++) {\n            if (booleanArray[i] == true) {\n                s += '1';\n            }\n            else {\n                s += '0';\n            }\n        }\n        this.setByBinaryString(s);\n    };\n    /**\n     * generate an array of falses with specified length<br/>\n     * @name newFalseArray\n     * @memberOf KJUR.asn1.DERBitString\n     * @function\n     * @param {Integer} nLength length of array to generate\n     * @return {array} array of boolean falses\n     * @description\n     * This static method may be useful to initialize boolean array.\n     * @example\n     * o = new KJUR.asn1.DERBitString();\n     * o.newFalseArray(3) &rarr; [false, false, false]\n     */\n    this.newFalseArray = function (nLength) {\n        var a = new Array(nLength);\n        for (var i = 0; i < nLength; i++) {\n            a[i] = false;\n        }\n        return a;\n    };\n    this.getFreshValueHex = function () {\n        return this.hV;\n    };\n    if (typeof params != \"undefined\") {\n        if (typeof params == \"string\" && params.toLowerCase().match(/^[0-9a-f]+$/)) {\n            this.setHexValueIncludingUnusedBits(params);\n        }\n        else if (typeof params['hex'] != \"undefined\") {\n            this.setHexValueIncludingUnusedBits(params['hex']);\n        }\n        else if (typeof params['bin'] != \"undefined\") {\n            this.setByBinaryString(params['bin']);\n        }\n        else if (typeof params['array'] != \"undefined\") {\n            this.setByBooleanArray(params['array']);\n        }\n    }\n};\n_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERBitString, KJUR.asn1.ASN1Object);\n// ********************************************************************\n/**\n * class for ASN.1 DER OctetString<br/>\n * @name KJUR.asn1.DEROctetString\n * @class class for ASN.1 DER OctetString\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @extends KJUR.asn1.DERAbstractString\n * @description\n * This class provides ASN.1 OctetString simple type.<br/>\n * Supported \"params\" attributes are:\n * <ul>\n * <li>str - to set a string as a value</li>\n * <li>hex - to set a hexadecimal string as a value</li>\n * <li>obj - to set a encapsulated ASN.1 value by JSON object\n * which is defined in {@link KJUR.asn1.ASN1Util.newObject}</li>\n * </ul>\n * NOTE: A parameter 'obj' have been supported\n * for \"OCTET STRING, encapsulates\" structure.\n * since asn1 1.0.11, jsrsasign 6.1.1 (2016-Sep-25).\n * @see KJUR.asn1.DERAbstractString - superclass\n * @example\n * // default constructor\n * o = new KJUR.asn1.DEROctetString();\n * // initialize with string\n * o = new KJUR.asn1.DEROctetString({str: \"aaa\"});\n * // initialize with hexadecimal string\n * o = new KJUR.asn1.DEROctetString({hex: \"616161\"});\n * // initialize with ASN1Util.newObject argument\n * o = new KJUR.asn1.DEROctetString({obj: {seq: [{int: 3}, {prnstr: 'aaa'}]}});\n * // above generates a ASN.1 data like this:\n * // OCTET STRING, encapsulates {\n * //   SEQUENCE {\n * //     INTEGER 3\n * //     PrintableString 'aaa'\n * //     }\n * //   }\n */\nKJUR.asn1.DEROctetString = function (params) {\n    if (params !== undefined && typeof params.obj !== \"undefined\") {\n        var o = KJUR.asn1.ASN1Util.newObject(params.obj);\n        params.hex = o.getEncodedHex();\n    }\n    KJUR.asn1.DEROctetString.superclass.constructor.call(this, params);\n    this.hT = \"04\";\n};\n_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DEROctetString, KJUR.asn1.DERAbstractString);\n// ********************************************************************\n/**\n * class for ASN.1 DER Null\n * @name KJUR.asn1.DERNull\n * @class class for ASN.1 DER Null\n * @extends KJUR.asn1.ASN1Object\n * @description\n * @see KJUR.asn1.ASN1Object - superclass\n */\nKJUR.asn1.DERNull = function () {\n    KJUR.asn1.DERNull.superclass.constructor.call(this);\n    this.hT = \"05\";\n    this.hTLV = \"0500\";\n};\n_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERNull, KJUR.asn1.ASN1Object);\n// ********************************************************************\n/**\n * class for ASN.1 DER ObjectIdentifier\n * @name KJUR.asn1.DERObjectIdentifier\n * @class class for ASN.1 DER ObjectIdentifier\n * @param {Array} params associative array of parameters (ex. {'oid': '2.5.4.5'})\n * @extends KJUR.asn1.ASN1Object\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>oid - specify initial ASN.1 value(V) by a oid string (ex. 2.5.4.13)</li>\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n * </ul>\n * NOTE: 'params' can be omitted.\n */\nKJUR.asn1.DERObjectIdentifier = function (params) {\n    var itox = function (i) {\n        var h = i.toString(16);\n        if (h.length == 1)\n            h = '0' + h;\n        return h;\n    };\n    var roidtox = function (roid) {\n        var h = '';\n        var bi = new _jsbn_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger(roid, 10);\n        var b = bi.toString(2);\n        var padLen = 7 - b.length % 7;\n        if (padLen == 7)\n            padLen = 0;\n        var bPad = '';\n        for (var i = 0; i < padLen; i++)\n            bPad += '0';\n        b = bPad + b;\n        for (var i = 0; i < b.length - 1; i += 7) {\n            var b8 = b.substr(i, 7);\n            if (i != b.length - 7)\n                b8 = '1' + b8;\n            h += itox(parseInt(b8, 2));\n        }\n        return h;\n    };\n    KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this);\n    this.hT = \"06\";\n    /**\n     * set value by a hexadecimal string\n     * @name setValueHex\n     * @memberOf KJUR.asn1.DERObjectIdentifier#\n     * @function\n     * @param {String} newHexString hexadecimal value of OID bytes\n     */\n    this.setValueHex = function (newHexString) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.s = null;\n        this.hV = newHexString;\n    };\n    /**\n     * set value by a OID string<br/>\n     * @name setValueOidString\n     * @memberOf KJUR.asn1.DERObjectIdentifier#\n     * @function\n     * @param {String} oidString OID string (ex. 2.5.4.13)\n     * @example\n     * o = new KJUR.asn1.DERObjectIdentifier();\n     * o.setValueOidString(\"2.5.4.13\");\n     */\n    this.setValueOidString = function (oidString) {\n        if (!oidString.match(/^[0-9.]+$/)) {\n            throw \"malformed oid string: \" + oidString;\n        }\n        var h = '';\n        var a = oidString.split('.');\n        var i0 = parseInt(a[0]) * 40 + parseInt(a[1]);\n        h += itox(i0);\n        a.splice(0, 2);\n        for (var i = 0; i < a.length; i++) {\n            h += roidtox(a[i]);\n        }\n        this.hTLV = null;\n        this.isModified = true;\n        this.s = null;\n        this.hV = h;\n    };\n    /**\n     * set value by a OID name\n     * @name setValueName\n     * @memberOf KJUR.asn1.DERObjectIdentifier#\n     * @function\n     * @param {String} oidName OID name (ex. 'serverAuth')\n     * @since 1.0.1\n     * @description\n     * OID name shall be defined in 'KJUR.asn1.x509.OID.name2oidList'.\n     * Otherwise raise error.\n     * @example\n     * o = new KJUR.asn1.DERObjectIdentifier();\n     * o.setValueName(\"serverAuth\");\n     */\n    this.setValueName = function (oidName) {\n        var oid = KJUR.asn1.x509.OID.name2oid(oidName);\n        if (oid !== '') {\n            this.setValueOidString(oid);\n        }\n        else {\n            throw \"DERObjectIdentifier oidName undefined: \" + oidName;\n        }\n    };\n    this.getFreshValueHex = function () {\n        return this.hV;\n    };\n    if (params !== undefined) {\n        if (typeof params === \"string\") {\n            if (params.match(/^[0-2].[0-9.]+$/)) {\n                this.setValueOidString(params);\n            }\n            else {\n                this.setValueName(params);\n            }\n        }\n        else if (params.oid !== undefined) {\n            this.setValueOidString(params.oid);\n        }\n        else if (params.hex !== undefined) {\n            this.setValueHex(params.hex);\n        }\n        else if (params.name !== undefined) {\n            this.setValueName(params.name);\n        }\n    }\n};\n_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERObjectIdentifier, KJUR.asn1.ASN1Object);\n// ********************************************************************\n/**\n * class for ASN.1 DER Enumerated\n * @name KJUR.asn1.DEREnumerated\n * @class class for ASN.1 DER Enumerated\n * @extends KJUR.asn1.ASN1Object\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>int - specify initial ASN.1 value(V) by integer value</li>\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n * </ul>\n * NOTE: 'params' can be omitted.\n * @example\n * new KJUR.asn1.DEREnumerated(123);\n * new KJUR.asn1.DEREnumerated({int: 123});\n * new KJUR.asn1.DEREnumerated({hex: '1fad'});\n */\nKJUR.asn1.DEREnumerated = function (params) {\n    KJUR.asn1.DEREnumerated.superclass.constructor.call(this);\n    this.hT = \"0a\";\n    /**\n     * set value by Tom Wu's BigInteger object\n     * @name setByBigInteger\n     * @memberOf KJUR.asn1.DEREnumerated#\n     * @function\n     * @param {BigInteger} bigIntegerValue to set\n     */\n    this.setByBigInteger = function (bigIntegerValue) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.hV = KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(bigIntegerValue);\n    };\n    /**\n     * set value by integer value\n     * @name setByInteger\n     * @memberOf KJUR.asn1.DEREnumerated#\n     * @function\n     * @param {Integer} integer value to set\n     */\n    this.setByInteger = function (intValue) {\n        var bi = new _jsbn_jsbn__WEBPACK_IMPORTED_MODULE_0__.BigInteger(String(intValue), 10);\n        this.setByBigInteger(bi);\n    };\n    /**\n     * set value by integer value\n     * @name setValueHex\n     * @memberOf KJUR.asn1.DEREnumerated#\n     * @function\n     * @param {String} hexadecimal string of integer value\n     * @description\n     * <br/>\n     * NOTE: Value shall be represented by minimum octet length of\n     * two's complement representation.\n     */\n    this.setValueHex = function (newHexString) {\n        this.hV = newHexString;\n    };\n    this.getFreshValueHex = function () {\n        return this.hV;\n    };\n    if (typeof params != \"undefined\") {\n        if (typeof params['int'] != \"undefined\") {\n            this.setByInteger(params['int']);\n        }\n        else if (typeof params == \"number\") {\n            this.setByInteger(params);\n        }\n        else if (typeof params['hex'] != \"undefined\") {\n            this.setValueHex(params['hex']);\n        }\n    }\n};\n_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DEREnumerated, KJUR.asn1.ASN1Object);\n// ********************************************************************\n/**\n * class for ASN.1 DER UTF8String\n * @name KJUR.asn1.DERUTF8String\n * @class class for ASN.1 DER UTF8String\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @extends KJUR.asn1.DERAbstractString\n * @description\n * @see KJUR.asn1.DERAbstractString - superclass\n */\nKJUR.asn1.DERUTF8String = function (params) {\n    KJUR.asn1.DERUTF8String.superclass.constructor.call(this, params);\n    this.hT = \"0c\";\n};\n_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERUTF8String, KJUR.asn1.DERAbstractString);\n// ********************************************************************\n/**\n * class for ASN.1 DER NumericString\n * @name KJUR.asn1.DERNumericString\n * @class class for ASN.1 DER NumericString\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @extends KJUR.asn1.DERAbstractString\n * @description\n * @see KJUR.asn1.DERAbstractString - superclass\n */\nKJUR.asn1.DERNumericString = function (params) {\n    KJUR.asn1.DERNumericString.superclass.constructor.call(this, params);\n    this.hT = \"12\";\n};\n_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERNumericString, KJUR.asn1.DERAbstractString);\n// ********************************************************************\n/**\n * class for ASN.1 DER PrintableString\n * @name KJUR.asn1.DERPrintableString\n * @class class for ASN.1 DER PrintableString\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @extends KJUR.asn1.DERAbstractString\n * @description\n * @see KJUR.asn1.DERAbstractString - superclass\n */\nKJUR.asn1.DERPrintableString = function (params) {\n    KJUR.asn1.DERPrintableString.superclass.constructor.call(this, params);\n    this.hT = \"13\";\n};\n_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERPrintableString, KJUR.asn1.DERAbstractString);\n// ********************************************************************\n/**\n * class for ASN.1 DER TeletexString\n * @name KJUR.asn1.DERTeletexString\n * @class class for ASN.1 DER TeletexString\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @extends KJUR.asn1.DERAbstractString\n * @description\n * @see KJUR.asn1.DERAbstractString - superclass\n */\nKJUR.asn1.DERTeletexString = function (params) {\n    KJUR.asn1.DERTeletexString.superclass.constructor.call(this, params);\n    this.hT = \"14\";\n};\n_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERTeletexString, KJUR.asn1.DERAbstractString);\n// ********************************************************************\n/**\n * class for ASN.1 DER IA5String\n * @name KJUR.asn1.DERIA5String\n * @class class for ASN.1 DER IA5String\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @extends KJUR.asn1.DERAbstractString\n * @description\n * @see KJUR.asn1.DERAbstractString - superclass\n */\nKJUR.asn1.DERIA5String = function (params) {\n    KJUR.asn1.DERIA5String.superclass.constructor.call(this, params);\n    this.hT = \"16\";\n};\n_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERIA5String, KJUR.asn1.DERAbstractString);\n// ********************************************************************\n/**\n * class for ASN.1 DER UTCTime\n * @name KJUR.asn1.DERUTCTime\n * @class class for ASN.1 DER UTCTime\n * @param {Array} params associative array of parameters (ex. {'str': '130430235959Z'})\n * @extends KJUR.asn1.DERAbstractTime\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>str - specify initial ASN.1 value(V) by a string (ex.'130430235959Z')</li>\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n * <li>date - specify Date object.</li>\n * </ul>\n * NOTE: 'params' can be omitted.\n * <h4>EXAMPLES</h4>\n * @example\n * d1 = new KJUR.asn1.DERUTCTime();\n * d1.setString('130430125959Z');\n *\n * d2 = new KJUR.asn1.DERUTCTime({'str': '130430125959Z'});\n * d3 = new KJUR.asn1.DERUTCTime({'date': new Date(Date.UTC(2015, 0, 31, 0, 0, 0, 0))});\n * d4 = new KJUR.asn1.DERUTCTime('130430125959Z');\n */\nKJUR.asn1.DERUTCTime = function (params) {\n    KJUR.asn1.DERUTCTime.superclass.constructor.call(this, params);\n    this.hT = \"17\";\n    /**\n     * set value by a Date object<br/>\n     * @name setByDate\n     * @memberOf KJUR.asn1.DERUTCTime#\n     * @function\n     * @param {Date} dateObject Date object to set ASN.1 value(V)\n     * @example\n     * o = new KJUR.asn1.DERUTCTime();\n     * o.setByDate(new Date(\"2016/12/31\"));\n     */\n    this.setByDate = function (dateObject) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.date = dateObject;\n        this.s = this.formatDate(this.date, 'utc');\n        this.hV = stohex(this.s);\n    };\n    this.getFreshValueHex = function () {\n        if (typeof this.date == \"undefined\" && typeof this.s == \"undefined\") {\n            this.date = new Date();\n            this.s = this.formatDate(this.date, 'utc');\n            this.hV = stohex(this.s);\n        }\n        return this.hV;\n    };\n    if (params !== undefined) {\n        if (params.str !== undefined) {\n            this.setString(params.str);\n        }\n        else if (typeof params == \"string\" && params.match(/^[0-9]{12}Z$/)) {\n            this.setString(params);\n        }\n        else if (params.hex !== undefined) {\n            this.setStringHex(params.hex);\n        }\n        else if (params.date !== undefined) {\n            this.setByDate(params.date);\n        }\n    }\n};\n_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERUTCTime, KJUR.asn1.DERAbstractTime);\n// ********************************************************************\n/**\n * class for ASN.1 DER GeneralizedTime\n * @name KJUR.asn1.DERGeneralizedTime\n * @class class for ASN.1 DER GeneralizedTime\n * @param {Array} params associative array of parameters (ex. {'str': '20130430235959Z'})\n * @property {Boolean} withMillis flag to show milliseconds or not\n * @extends KJUR.asn1.DERAbstractTime\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>str - specify initial ASN.1 value(V) by a string (ex.'20130430235959Z')</li>\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n * <li>date - specify Date object.</li>\n * <li>millis - specify flag to show milliseconds (from 1.0.6)</li>\n * </ul>\n * NOTE1: 'params' can be omitted.\n * NOTE2: 'withMillis' property is supported from asn1 1.0.6.\n */\nKJUR.asn1.DERGeneralizedTime = function (params) {\n    KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this, params);\n    this.hT = \"18\";\n    this.withMillis = false;\n    /**\n     * set value by a Date object\n     * @name setByDate\n     * @memberOf KJUR.asn1.DERGeneralizedTime#\n     * @function\n     * @param {Date} dateObject Date object to set ASN.1 value(V)\n     * @example\n     * When you specify UTC time, use 'Date.UTC' method like this:<br/>\n     * o1 = new DERUTCTime();\n     * o1.setByDate(date);\n     *\n     * date = new Date(Date.UTC(2015, 0, 31, 23, 59, 59, 0)); #2015JAN31 23:59:59\n     */\n    this.setByDate = function (dateObject) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.date = dateObject;\n        this.s = this.formatDate(this.date, 'gen', this.withMillis);\n        this.hV = stohex(this.s);\n    };\n    this.getFreshValueHex = function () {\n        if (this.date === undefined && this.s === undefined) {\n            this.date = new Date();\n            this.s = this.formatDate(this.date, 'gen', this.withMillis);\n            this.hV = stohex(this.s);\n        }\n        return this.hV;\n    };\n    if (params !== undefined) {\n        if (params.str !== undefined) {\n            this.setString(params.str);\n        }\n        else if (typeof params == \"string\" && params.match(/^[0-9]{14}Z$/)) {\n            this.setString(params);\n        }\n        else if (params.hex !== undefined) {\n            this.setStringHex(params.hex);\n        }\n        else if (params.date !== undefined) {\n            this.setByDate(params.date);\n        }\n        if (params.millis === true) {\n            this.withMillis = true;\n        }\n    }\n};\n_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERGeneralizedTime, KJUR.asn1.DERAbstractTime);\n// ********************************************************************\n/**\n * class for ASN.1 DER Sequence\n * @name KJUR.asn1.DERSequence\n * @class class for ASN.1 DER Sequence\n * @extends KJUR.asn1.DERAbstractStructured\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>array - specify array of ASN1Object to set elements of content</li>\n * </ul>\n * NOTE: 'params' can be omitted.\n */\nKJUR.asn1.DERSequence = function (params) {\n    KJUR.asn1.DERSequence.superclass.constructor.call(this, params);\n    this.hT = \"30\";\n    this.getFreshValueHex = function () {\n        var h = '';\n        for (var i = 0; i < this.asn1Array.length; i++) {\n            var asn1Obj = this.asn1Array[i];\n            h += asn1Obj.getEncodedHex();\n        }\n        this.hV = h;\n        return this.hV;\n    };\n};\n_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERSequence, KJUR.asn1.DERAbstractStructured);\n// ********************************************************************\n/**\n * class for ASN.1 DER Set\n * @name KJUR.asn1.DERSet\n * @class class for ASN.1 DER Set\n * @extends KJUR.asn1.DERAbstractStructured\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>array - specify array of ASN1Object to set elements of content</li>\n * <li>sortflag - flag for sort (default: true). ASN.1 BER is not sorted in 'SET OF'.</li>\n * </ul>\n * NOTE1: 'params' can be omitted.<br/>\n * NOTE2: sortflag is supported since 1.0.5.\n */\nKJUR.asn1.DERSet = function (params) {\n    KJUR.asn1.DERSet.superclass.constructor.call(this, params);\n    this.hT = \"31\";\n    this.sortFlag = true; // item shall be sorted only in ASN.1 DER\n    this.getFreshValueHex = function () {\n        var a = new Array();\n        for (var i = 0; i < this.asn1Array.length; i++) {\n            var asn1Obj = this.asn1Array[i];\n            a.push(asn1Obj.getEncodedHex());\n        }\n        if (this.sortFlag == true)\n            a.sort();\n        this.hV = a.join('');\n        return this.hV;\n    };\n    if (typeof params != \"undefined\") {\n        if (typeof params.sortflag != \"undefined\" &&\n            params.sortflag == false)\n            this.sortFlag = false;\n    }\n};\n_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERSet, KJUR.asn1.DERAbstractStructured);\n// ********************************************************************\n/**\n * class for ASN.1 DER TaggedObject\n * @name KJUR.asn1.DERTaggedObject\n * @class class for ASN.1 DER TaggedObject\n * @extends KJUR.asn1.ASN1Object\n * @description\n * <br/>\n * Parameter 'tagNoNex' is ASN.1 tag(T) value for this object.\n * For example, if you find '[1]' tag in a ASN.1 dump,\n * 'tagNoHex' will be 'a1'.\n * <br/>\n * As for optional argument 'params' for constructor, you can specify *ANY* of\n * following properties:\n * <ul>\n * <li>explicit - specify true if this is explicit tag otherwise false\n *     (default is 'true').</li>\n * <li>tag - specify tag (default is 'a0' which means [0])</li>\n * <li>obj - specify ASN1Object which is tagged</li>\n * </ul>\n * @example\n * d1 = new KJUR.asn1.DERUTF8String({'str':'a'});\n * d2 = new KJUR.asn1.DERTaggedObject({'obj': d1});\n * hex = d2.getEncodedHex();\n */\nKJUR.asn1.DERTaggedObject = function (params) {\n    KJUR.asn1.DERTaggedObject.superclass.constructor.call(this);\n    this.hT = \"a0\";\n    this.hV = '';\n    this.isExplicit = true;\n    this.asn1Object = null;\n    /**\n     * set value by an ASN1Object\n     * @name setString\n     * @memberOf KJUR.asn1.DERTaggedObject#\n     * @function\n     * @param {Boolean} isExplicitFlag flag for explicit/implicit tag\n     * @param {Integer} tagNoHex hexadecimal string of ASN.1 tag\n     * @param {ASN1Object} asn1Object ASN.1 to encapsulate\n     */\n    this.setASN1Object = function (isExplicitFlag, tagNoHex, asn1Object) {\n        this.hT = tagNoHex;\n        this.isExplicit = isExplicitFlag;\n        this.asn1Object = asn1Object;\n        if (this.isExplicit) {\n            this.hV = this.asn1Object.getEncodedHex();\n            this.hTLV = null;\n            this.isModified = true;\n        }\n        else {\n            this.hV = null;\n            this.hTLV = asn1Object.getEncodedHex();\n            this.hTLV = this.hTLV.replace(/^../, tagNoHex);\n            this.isModified = false;\n        }\n    };\n    this.getFreshValueHex = function () {\n        return this.hV;\n    };\n    if (typeof params != \"undefined\") {\n        if (typeof params['tag'] != \"undefined\") {\n            this.hT = params['tag'];\n        }\n        if (typeof params['explicit'] != \"undefined\") {\n            this.isExplicit = params['explicit'];\n        }\n        if (typeof params['obj'] != \"undefined\") {\n            this.asn1Object = params['obj'];\n            this.setASN1Object(this.isExplicit, this.hT, this.asn1Object);\n        }\n    }\n};\n_yahoo__WEBPACK_IMPORTED_MODULE_1__.YAHOO.lang.extend(KJUR.asn1.DERTaggedObject, KJUR.asn1.ASN1Object);\n\n\n//# sourceURL=webpack://JSEncrypt/./lib/lib/jsrsasign/asn1-1.0.js?")},"./lib/lib/jsrsasign/yahoo.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "YAHOO": () => (/* binding */ YAHOO)\n/* harmony export */ });\n/*!\nCopyright (c) 2011, Yahoo! Inc. All rights reserved.\nCode licensed under the BSD License:\nhttp://developer.yahoo.com/yui/license.html\nversion: 2.9.0\n*/\nvar YAHOO = {};\nYAHOO.lang = {\n    /**\n     * Utility to set up the prototype, constructor and superclass properties to\n     * support an inheritance strategy that can chain constructors and methods.\n     * Static members will not be inherited.\n     *\n     * @method extend\n     * @static\n     * @param {Function} subc   the object to modify\n     * @param {Function} superc the object to inherit\n     * @param {Object} overrides  additional properties/methods to add to the\n     *                              subclass prototype.  These will override the\n     *                              matching items obtained from the superclass\n     *                              if present.\n     */\n    extend: function (subc, superc, overrides) {\n        if (!superc || !subc) {\n            throw new Error("YAHOO.lang.extend failed, please check that " +\n                "all dependencies are included.");\n        }\n        var F = function () { };\n        F.prototype = superc.prototype;\n        subc.prototype = new F();\n        subc.prototype.constructor = subc;\n        subc.superclass = superc.prototype;\n        if (superc.prototype.constructor == Object.prototype.constructor) {\n            superc.prototype.constructor = superc;\n        }\n        if (overrides) {\n            var i;\n            for (i in overrides) {\n                subc.prototype[i] = overrides[i];\n            }\n            /*\n             * IE will not enumerate native functions in a derived object even if the\n             * function was overridden.  This is a workaround for specific functions\n             * we care about on the Object prototype.\n             * @property _IEEnumFix\n             * @param {Function} r  the object to receive the augmentation\n             * @param {Function} s  the object that supplies the properties to augment\n             * @static\n             * @private\n             */\n            var _IEEnumFix = function () { }, ADD = ["toString", "valueOf"];\n            try {\n                if (/MSIE/.test(navigator.userAgent)) {\n                    _IEEnumFix = function (r, s) {\n                        for (i = 0; i < ADD.length; i = i + 1) {\n                            var fname = ADD[i], f = s[fname];\n                            if (typeof f === \'function\' && f != Object.prototype[fname]) {\n                                r[fname] = f;\n                            }\n                        }\n                    };\n                }\n            }\n            catch (ex) { }\n            ;\n            _IEEnumFix(subc.prototype, overrides);\n        }\n    }\n};\n\n\n//# sourceURL=webpack://JSEncrypt/./lib/lib/jsrsasign/yahoo.js?')},"./node_modules/process/browser.js":module=>{eval("// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n//# sourceURL=webpack://JSEncrypt/./node_modules/process/browser.js?")}},__webpack_module_cache__={};function __webpack_require__(n){var e=__webpack_module_cache__[n];if(void 0!==e)return e.exports;var t=__webpack_module_cache__[n]={exports:{}};return __webpack_modules__[n](t,t.exports,__webpack_require__),t.exports}__webpack_require__.d=(n,e)=>{for(var t in e)__webpack_require__.o(e,t)&&!__webpack_require__.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},__webpack_require__.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),__webpack_require__.r=n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./lib/index.js");return __webpack_exports__=__webpack_exports__.default,__webpack_exports__})(),module.exports=factory()},function(n,e){(function(e){n.exports=e}).call(this,{})},function(n,e,t){"use strict";t.r(e);var r={};t.r(r),t.d(r,"shimGetUserMedia",(function(){return C})),t.d(r,"shimGetDisplayMedia",(function(){return I})),t.d(r,"shimMediaStream",(function(){return A})),t.d(r,"shimOnTrack",(function(){return D})),t.d(r,"shimGetSendersWithDtmf",(function(){return O})),t.d(r,"shimGetStats",(function(){return P})),t.d(r,"shimSenderReceiverGetStats",(function(){return k})),t.d(r,"shimAddTrackRemoveTrackWithNative",(function(){return B})),t.d(r,"shimAddTrackRemoveTrack",(function(){return j})),t.d(r,"shimPeerConnection",(function(){return N})),t.d(r,"fixNegotiationNeeded",(function(){return M}));var i={};t.r(i),t.d(i,"shimGetUserMedia",(function(){return U})),t.d(i,"shimGetDisplayMedia",(function(){return L})),t.d(i,"shimOnTrack",(function(){return K})),t.d(i,"shimPeerConnection",(function(){return J})),t.d(i,"shimSenderGetStats",(function(){return V})),t.d(i,"shimReceiverGetStats",(function(){return H})),t.d(i,"shimRemoveStream",(function(){return q})),t.d(i,"shimRTCDataChannel",(function(){return W})),t.d(i,"shimAddTransceiver",(function(){return F})),t.d(i,"shimGetParameters",(function(){return G})),t.d(i,"shimCreateOffer",(function(){return z})),t.d(i,"shimCreateAnswer",(function(){return X}));var s={};t.r(s),t.d(s,"shimLocalStreamsAPI",(function(){return Y})),t.d(s,"shimRemoteStreamsAPI",(function(){return Q})),t.d(s,"shimCallbacksAPI",(function(){return Z})),t.d(s,"shimGetUserMedia",(function(){return $})),t.d(s,"shimConstraints",(function(){return nn})),t.d(s,"shimRTCIceServerUrls",(function(){return en})),t.d(s,"shimTrackEventTransceiver",(function(){return tn})),t.d(s,"shimCreateOfferLegacy",(function(){return rn})),t.d(s,"shimAudioContext",(function(){return sn}));var a={};t.r(a),t.d(a,"shimRTCIceCandidate",(function(){return cn})),t.d(a,"shimRTCIceCandidateRelayProtocol",(function(){return un})),t.d(a,"shimMaxMessageSize",(function(){return ln})),t.d(a,"shimSendThrowTypeError",(function(){return pn})),t.d(a,"shimConnectionState",(function(){return dn})),t.d(a,"removeExtmapAllowMixed",(function(){return fn})),t.d(a,"shimAddIceCandidateNullOrEmpty",(function(){return hn})),t.d(a,"shimParameterlessSetLocalDescription",(function(){return gn}));var o=t(3),c=t.n(o),u=t(2),l=t.n(u),p=t(1),d=t.n(p),f=function(n){var e=n.url+"?json="+encodeURIComponent(JSON.stringify(n.jsonData)),t=15e3;return void 0!==n.jsonData.Timeout&&(t=n.jsonData.Timeout),new Promise((function(n,r){d()(e,{jsonpCallback:"callbackName",timeout:t}).then((function(e){var t=e.json();t.then((function(n){console.log(n)})),n(t)})).catch((function(n){return r(n)}))}))},h=function(){function n(e){var t=this;this.attachEventCallbacks={success:n.noop,error:n.noop,message:n.noop},this.statusConfig={},this.isGetJsonpStateProcess=!1,this.attachEvent=function(n){t.attachEventCallbacks=n},this.handleEvent=function(n){n.forEach((function(n){t.eventProcess(n)}))},this.eventProcess=function(n){t.attachEventCallbacks.message(n)},this.initStatus(e)}return n.prototype.initStatus=function(n){var e=this;this.fetchByJsonpGet({url:n.url,jsonData:{Command:"Action",User:n.agentNumber,Action:"GetWSSupport"}}).then((function(t){t&&t.Succeed&&e.RegisterByJsonp(n)}))},n.prototype.RegisterByWs=function(e,t,r){var i=this,s=this,a=e.url,o=a.indexOf("//");(a=a.substring(o+2,a.length)).indexOf(":")>-1&&(a=a.split(":")[0]),a.indexOf("/")>-1&&(a=a.split("/")[0]);var c="ws://"+a+":"+t+"/websocket";"https:"===document.location.protocol&&(c="wss://"+a+":"+(r=r||"443")+"/websocket");var u=!1,l=!1,p=function(){try{"WebSocket"in window&&(i.ws=new WebSocket(c)),f.initConnect()}catch(n){f.reconnect(),console.log(n)}},d={timeout:5e3,timeoutObj:null,serverTimeoutObj:null,reset:function(){return window.clearTimeout(this.timeoutObj),window.clearTimeout(this.serverTimeoutObj),this},start:function(){var n=this;this.timeoutObj=window.setTimeout((function(){1===s.ws.readyState&&s.ws.send(JSON.stringify({Action:"Ping",SessionID:s.statusConfig.SessionID})),n.serverTimeoutObj=window.setTimeout((function(){s.ws.close()}),8*n.timeout)}),this.timeout)}},f={initConnect:function(){i.ws.onclose=function(){l||f.reconnect(),console.log("ws\u8fde\u63a5\u5173\u95ed!"+(new Date).toUTCString())},i.ws.onerror=function(n){f.reconnect()},s.ws.onopen=function(){d.reset().start(),0;var n,t,r,i,a,o,c,u=(n=new Date,t=n.getFullYear(),r=n.getMonth(),i=n.getDate(),a=n.getHours(),o=n.getMinutes(),c=n.getSeconds(),t+"-"+(r=r+1>9?r+1:"0"+(r+1))+"-"+(i=i>9?i:"0"+i)+" "+(a=a>9?a:"0"+a)+":"+(o=o>9?o:"0"+o)+":"+(c=c>9?c:"0"+c)),l={ipMessage:e.ipMessage,User:e.agentNumber,Monitor:!1,ExtenType:e.loginType,Command:"Action",Action:"Login",Password:e.password,ActionID:"Login"+Math.random(),BusyType:e.busyType,currentTime:u,AppVersion:"service",IsHideTel:!1};console.log("\u767b\u9646-----------------------------",l),s.ws.send(JSON.stringify(l))},s.ws.onmessage=function(t){i.attachEventCallbacks.success=s.attachEventCallbacks.success&&"function"==typeof s.attachEventCallbacks.success?s.attachEventCallbacks.success:n.noop,i.attachEventCallbacks.error=s.attachEventCallbacks.error&&"function"==typeof s.attachEventCallbacks.error?s.attachEventCallbacks.error:n.noop,i.attachEventCallbacks.message=s.attachEventCallbacks.message&&"function"==typeof s.attachEventCallbacks.message?s.attachEventCallbacks.message:n.noop;var r=JSON.parse(t.data);if(r.Pong||"Ping"===r.Response)r.Pong&&"Ping"===r.Response&&d.reset().start();else{if(d.reset().start(),"Login"===r.Response){if(i.LoginInfo=r,r.UserID&&(i.statusConfig.UserID=r.UserID),r.SessionID)i.statusConfig.SessionID=r.SessionID;else if(!r.Succeed){var a=r.Result;a&&e.fail({success:!1,code:a,message:"\u521d\u59cb\u5316\u5931\u8d25"})}return r}if(r.Response&&"PushState"===r.Response.Response){if(r.Event[0]&&"Kick"===r.Event[0].Event){if(!r.Response||"ekick"!==r.Response.Comments&&"ukick"!==r.Response.Comments){if(r.Response&&"restartKick"===r.Response.Comments)return}else;return i.eventProcess({Event:"kick"}),l=!0,void s.ws.close()}console.log(r.Event,"event===========================data"),i.handleEvent(r.Event)}}}},reconnect:function(){u||(u=!0,window.setTimeout((function(){p(),u=!1}),2e3))}};p()},n.prototype.RegisterByJsonp=function(n){var e=this,t=this,r=n.url,i={Command:"Action",Action:"Login",ActionID:"Login"+Math.random(),ExtenType:n.loginType,Password:n.password,BusyType:n.busyType,Monitor:!1,User:n.agentNumber,AppVersion:"service"};this.fetchByJsonpGet({url:r,jsonData:i}).then((function(r){var i=r;if(i.Succeed)i.SessionID&&(e.statusConfig.SessionID=i.SessionID,e.statusConfig.UserID=i.UserID,e.LoginInfo=i,n.success(),t.getJsonpState(n));else{var s=i.Result;s&&n.fail({success:!1,code:s,message:"\u521d\u59cb\u5316\u5931\u8d25"})}})).catch((function(){}))},n.prototype.getJsonpState=function(n){var e=this,t=this;if(!this.isGetJsonpStateProcess){this.isGetJsonpStateProcess=!0;var r={Command:"Action",Action:"GetState",ActionID:"GetState"+Math.random(),SessionID:t.statusConfig.SessionID,User:n.agentNumber};this.fetchByJsonpGet({url:n.url,jsonData:r}).then((function(r){if(r){var i=r,s=i.Response;if(s||(s=i),s.Succeed&&!s.HasEvent);else if(s.Succeed){if(s.Kick){var a="";if(s.Comments&&(a=s.Comments),"ukick"==a||"ekick"==a)e.eventProcess({Event:"kick"});else{if("restartKick"==a)return void window.setTimeout((function(){t.RegisterByJsonp(n)}),6e4);e.eventProcess({Event:"kick"})}return void(e.isGetJsonpStateProcess=!1)}var o=i.Event;null!=o&&e.handleEvent(o)}else if(s.Expired)return t.RegisterByJsonp(n),void(e.isGetJsonpStateProcess=!1);e.isGetJsonpStateProcess=!1,t.getJsonpState(n)}}))}},n.prototype.fetchByJsonpGet=function(n){var e=n.url+"?json="+encodeURIComponent(JSON.stringify(n.jsonData)),t=15e3;return void 0!==n.jsonData.Timeout&&(t=n.jsonData.Timeout),new Promise((function(n,r){d()(e,{jsonpCallback:"callbackName",timeout:t}).then((function(e){var t=e.json();t.then((function(n){console.log(n)})),n(t)})).catch((function(n){return r(n)}))}))},n.noop=function(){},n}();let g=!0,m=!0;function b(n,e,t){const r=n.match(e);return r&&r.length>=t&&parseInt(r[t],10)}function y(n,e,t){if(!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(n,r){if(n!==e)return i.apply(this,arguments);const s=n=>{const e=t(n);e&&(r.handleEvent?r.handleEvent(e):r(e))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(r,s),i.apply(this,[n,s])};const s=r.removeEventListener;r.removeEventListener=function(n,t){if(n!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(t))return s.apply(this,arguments);const r=this._eventMap[e].get(t);return this._eventMap[e].delete(t),0===this._eventMap[e].size&&delete this._eventMap[e],0===Object.keys(this._eventMap).length&&delete this._eventMap,s.apply(this,[n,r])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(n){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),n&&this.addEventListener(e,this["_on"+e]=n)},enumerable:!0,configurable:!0})}function _(n){return"boolean"!=typeof n?new Error("Argument type: "+typeof n+". Please use a boolean."):(g=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function v(n){return"boolean"!=typeof n?new Error("Argument type: "+typeof n+". Please use a boolean."):(m=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function S(){if("object"==typeof window){if(g)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function E(n,e){m&&console.warn(n+" is deprecated, please use "+e+" instead.")}function T(n){return"[object Object]"===Object.prototype.toString.call(n)}function R(n){return T(n)?Object.keys(n).reduce((function(e,t){const r=T(n[t]),i=r?R(n[t]):n[t],s=r&&!Object.keys(i).length;return void 0===i||s?e:Object.assign(e,{[t]:i})}),{}):n}function w(n,e,t){const r=t?"outbound-rtp":"inbound-rtp",i=new Map;if(null===e)return i;const s=[];return n.forEach(n=>{"track"===n.type&&n.trackIdentifier===e.id&&s.push(n)}),s.forEach(e=>{n.forEach(t=>{t.type===r&&t.trackId===e.id&&function n(e,t,r){t&&!r.has(t.id)&&(r.set(t.id,t),Object.keys(t).forEach(i=>{i.endsWith("Id")?n(e,e.get(t[i]),r):i.endsWith("Ids")&&t[i].forEach(t=>{n(e,e.get(t),r)})}))}(n,t,i)})}),i}const x=S;function C(n,e){const t=n&&n.navigator;if(!t.mediaDevices)return;const r=function(n){if("object"!=typeof n||n.mandatory||n.optional)return n;const e={};return Object.keys(n).forEach(t=>{if("require"===t||"advanced"===t||"mediaSource"===t)return;const r="object"==typeof n[t]?n[t]:{ideal:n[t]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const i=function(n,e){return n?n+e.charAt(0).toUpperCase()+e.slice(1):"deviceId"===e?"sourceId":e};if(void 0!==r.ideal){e.optional=e.optional||[];let n={};"number"==typeof r.ideal?(n[i("min",t)]=r.ideal,e.optional.push(n),n={},n[i("max",t)]=r.ideal,e.optional.push(n)):(n[i("",t)]=r.ideal,e.optional.push(n))}void 0!==r.exact&&"number"!=typeof r.exact?(e.mandatory=e.mandatory||{},e.mandatory[i("",t)]=r.exact):["min","max"].forEach(n=>{void 0!==r[n]&&(e.mandatory=e.mandatory||{},e.mandatory[i(n,t)]=r[n])})}),n.advanced&&(e.optional=(e.optional||[]).concat(n.advanced)),e},i=function(n,i){if(e.version>=61)return i(n);if((n=JSON.parse(JSON.stringify(n)))&&"object"==typeof n.audio){const e=function(n,e,t){e in n&&!(t in n)&&(n[t]=n[e],delete n[e])};e((n=JSON.parse(JSON.stringify(n))).audio,"autoGainControl","googAutoGainControl"),e(n.audio,"noiseSuppression","googNoiseSuppression"),n.audio=r(n.audio)}if(n&&"object"==typeof n.video){let s=n.video.facingMode;s=s&&("object"==typeof s?s:{ideal:s});const a=e.version<66;if(s&&("user"===s.exact||"environment"===s.exact||"user"===s.ideal||"environment"===s.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||a)){let e;if(delete n.video.facingMode,"environment"===s.exact||"environment"===s.ideal?e=["back","rear"]:"user"!==s.exact&&"user"!==s.ideal||(e=["front"]),e)return t.mediaDevices.enumerateDevices().then(t=>{let a=(t=t.filter(n=>"videoinput"===n.kind)).find(n=>e.some(e=>n.label.toLowerCase().includes(e)));return!a&&t.length&&e.includes("back")&&(a=t[t.length-1]),a&&(n.video.deviceId=s.exact?{exact:a.deviceId}:{ideal:a.deviceId}),n.video=r(n.video),x("chrome: "+JSON.stringify(n)),i(n)})}n.video=r(n.video)}return x("chrome: "+JSON.stringify(n)),i(n)},s=function(n){return e.version>=64?n:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[n.name]||n.name,message:n.message,constraint:n.constraint||n.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(n,e,r){i(n,n=>{t.webkitGetUserMedia(n,e,n=>{r&&r(s(n))})})}.bind(t),t.mediaDevices.getUserMedia){const n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return i(e,e=>n(e).then(n=>{if(e.audio&&!n.getAudioTracks().length||e.video&&!n.getVideoTracks().length)throw n.getTracks().forEach(n=>{n.stop()}),new DOMException("","NotFoundError");return n},n=>Promise.reject(s(n))))}}}function I(n,e){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&("function"==typeof e?n.navigator.mediaDevices.getDisplayMedia=function(t){return e(t).then(e=>{const r=t.video&&t.video.width,i=t.video&&t.video.height,s=t.video&&t.video.frameRate;return t.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxFrameRate:s||3}},r&&(t.video.mandatory.maxWidth=r),i&&(t.video.mandatory.maxHeight=i),n.navigator.mediaDevices.getUserMedia(t)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function A(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function D(n){if("object"==typeof n&&n.RTCPeerConnection&&!("ontrack"in n.RTCPeerConnection.prototype)){Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=e=>{e.stream.addEventListener("addtrack",t=>{let r;r=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(n=>n.track&&n.track.id===t.track.id):{track:t.track};const i=new Event("track");i.track=t.track,i.receiver=r,i.transceiver={receiver:r},i.streams=[e.stream],this.dispatchEvent(i)}),e.stream.getTracks().forEach(t=>{let r;r=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(n=>n.track&&n.track.id===t.id):{track:t};const i=new Event("track");i.track=t,i.receiver=r,i.transceiver={receiver:r},i.streams=[e.stream],this.dispatchEvent(i)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else y(n,"track",n=>(n.transceiver||Object.defineProperty(n,"transceiver",{value:{receiver:n.receiver}}),n))}function O(n){if("object"==typeof n&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype){const e=function(n,e){return{track:e,get dtmf(){return void 0===this._dtmf&&("audio"===e.kind?this._dtmf=n.createDTMFSender(e):this._dtmf=null),this._dtmf},_pc:n}};if(!n.RTCPeerConnection.prototype.getSenders){n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const t=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(n,r){let i=t.apply(this,arguments);return i||(i=e(this,n),this._senders.push(i)),i};const r=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(n){r.apply(this,arguments);const e=this._senders.indexOf(n);-1!==e&&this._senders.splice(e,1)}}const t=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(n){this._senders=this._senders||[],t.apply(this,[n]),n.getTracks().forEach(n=>{this._senders.push(e(this,n))})};const r=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(n){this._senders=this._senders||[],r.apply(this,[n]),n.getTracks().forEach(n=>{const e=this._senders.find(e=>e.track===n);e&&this._senders.splice(this._senders.indexOf(e),1)})}}else if("object"==typeof n&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)){const e=n.RTCPeerConnection.prototype.getSenders;n.RTCPeerConnection.prototype.getSenders=function(){const n=e.apply(this,[]);return n.forEach(n=>n._pc=this),n},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function P(n){if(!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[n,t,r]=arguments;if(arguments.length>0&&"function"==typeof n)return e.apply(this,arguments);if(0===e.length&&(0===arguments.length||"function"!=typeof n))return e.apply(this,[]);const i=function(n){const e={};return n.result().forEach(n=>{const t={id:n.id,timestamp:n.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[n.type]||n.type};n.names().forEach(e=>{t[e]=n.stat(e)}),e[t.id]=t}),e},s=function(n){return new Map(Object.keys(n).map(e=>[e,n[e]]))};if(arguments.length>=2){const r=function(n){t(s(i(n)))};return e.apply(this,[r,n])}return new Promise((n,t)=>{e.apply(this,[function(e){n(s(i(e)))},t])}).then(t,r)}}function k(n){if(!("object"==typeof n&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver))return;if(!("getStats"in n.RTCRtpSender.prototype)){const e=n.RTCPeerConnection.prototype.getSenders;e&&(n.RTCPeerConnection.prototype.getSenders=function(){const n=e.apply(this,[]);return n.forEach(n=>n._pc=this),n});const t=n.RTCPeerConnection.prototype.addTrack;t&&(n.RTCPeerConnection.prototype.addTrack=function(){const n=t.apply(this,arguments);return n._pc=this,n}),n.RTCRtpSender.prototype.getStats=function(){const n=this;return this._pc.getStats().then(e=>w(e,n.track,!0))}}if(!("getStats"in n.RTCRtpReceiver.prototype)){const e=n.RTCPeerConnection.prototype.getReceivers;e&&(n.RTCPeerConnection.prototype.getReceivers=function(){const n=e.apply(this,[]);return n.forEach(n=>n._pc=this),n}),y(n,"track",n=>(n.receiver._pc=n.srcElement,n)),n.RTCRtpReceiver.prototype.getStats=function(){const n=this;return this._pc.getStats().then(e=>w(e,n.track,!1))}}if(!("getStats"in n.RTCRtpSender.prototype)||!("getStats"in n.RTCRtpReceiver.prototype))return;const e=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){const n=arguments[0];let e,t,r;return this.getSenders().forEach(t=>{t.track===n&&(e?r=!0:e=t)}),this.getReceivers().forEach(e=>(e.track===n&&(t?r=!0:t=e),e.track===n)),r||e&&t?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):e?e.getStats():t?t.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function B(n){n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(n=>this._shimmedLocalStreams[n][0])};const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(n,t){if(!t)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=e.apply(this,arguments);return this._shimmedLocalStreams[t.id]?-1===this._shimmedLocalStreams[t.id].indexOf(r)&&this._shimmedLocalStreams[t.id].push(r):this._shimmedLocalStreams[t.id]=[t,r],r};const t=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(n){this._shimmedLocalStreams=this._shimmedLocalStreams||{},n.getTracks().forEach(n=>{if(this.getSenders().find(e=>e.track===n))throw new DOMException("Track already exists.","InvalidAccessError")});const e=this.getSenders();t.apply(this,arguments);const r=this.getSenders().filter(n=>-1===e.indexOf(n));this._shimmedLocalStreams[n.id]=[n].concat(r)};const r=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(n){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[n.id],r.apply(this,arguments)};const i=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(n){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},n&&Object.keys(this._shimmedLocalStreams).forEach(e=>{const t=this._shimmedLocalStreams[e].indexOf(n);-1!==t&&this._shimmedLocalStreams[e].splice(t,1),1===this._shimmedLocalStreams[e].length&&delete this._shimmedLocalStreams[e]}),i.apply(this,arguments)}}function j(n,e){if(!n.RTCPeerConnection)return;if(n.RTCPeerConnection.prototype.addTrack&&e.version>=65)return B(n);const t=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){const n=t.apply(this);return this._reverseStreams=this._reverseStreams||{},n.map(n=>this._reverseStreams[n.id])};const r=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(e){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},e.getTracks().forEach(n=>{if(this.getSenders().find(e=>e.track===n))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[e.id]){const t=new n.MediaStream(e.getTracks());this._streams[e.id]=t,this._reverseStreams[t.id]=e,e=t}r.apply(this,[e])};const i=n.RTCPeerConnection.prototype.removeStream;function s(n,e){let t=e.sdp;return Object.keys(n._reverseStreams||[]).forEach(e=>{const r=n._reverseStreams[e],i=n._streams[r.id];t=t.replace(new RegExp(i.id,"g"),r.id)}),new RTCSessionDescription({type:e.type,sdp:t})}function a(n,e){let t=e.sdp;return Object.keys(n._reverseStreams||[]).forEach(e=>{const r=n._reverseStreams[e],i=n._streams[r.id];t=t.replace(new RegExp(r.id,"g"),i.id)}),new RTCSessionDescription({type:e.type,sdp:t})}n.RTCPeerConnection.prototype.removeStream=function(n){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[n.id]||n]),delete this._reverseStreams[this._streams[n.id]?this._streams[n.id].id:n.id],delete this._streams[n.id]},n.RTCPeerConnection.prototype.addTrack=function(e,t){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find(n=>n===e))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const i=this.getSenders().find(n=>n.track===e);if(i)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const s=this._streams[t.id];if(s)s.addTrack(e),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const r=new n.MediaStream([e]);this._streams[t.id]=r,this._reverseStreams[r.id]=t,this.addStream(r)}return this.getSenders().find(n=>n.track===e)},["createOffer","createAnswer"].forEach((function(e){const t=n.RTCPeerConnection.prototype[e],r={[e](){const n=arguments;return arguments.length&&"function"==typeof arguments[0]?t.apply(this,[e=>{const t=s(this,e);n[0].apply(null,[t])},e=>{n[1]&&n[1].apply(null,e)},arguments[2]]):t.apply(this,arguments).then(n=>s(this,n))}};n.RTCPeerConnection.prototype[e]=r[e]}));const o=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=a(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};const c=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get(){const n=c.get.apply(this);return""===n.type?n:s(this,n)}}),n.RTCPeerConnection.prototype.removeTrack=function(n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!n._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(n._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let e;this._streams=this._streams||{},Object.keys(this._streams).forEach(t=>{this._streams[t].getTracks().find(e=>n.track===e)&&(e=this._streams[t])}),e&&(1===e.getTracks().length?this.removeStream(this._reverseStreams[e.id]):e.removeTrack(n.track),this.dispatchEvent(new Event("negotiationneeded")))}}function N(n,e){!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),n.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(e){const t=n.RTCPeerConnection.prototype[e],r={[e](){return arguments[0]=new("addIceCandidate"===e?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}};n.RTCPeerConnection.prototype[e]=r[e]}))}function M(n,e){y(n,"negotiationneeded",n=>{const t=n.target;if(!(e.version<72||t.getConfiguration&&"plan-b"===t.getConfiguration().sdpSemantics)||"stable"===t.signalingState)return n})}function U(n,e){const t=n&&n.navigator,r=n&&n.MediaStreamTrack;if(t.getUserMedia=function(n,e,r){E("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(n).then(e,r)},!(e.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const n=function(n,e,t){e in n&&!(t in n)&&(n[t]=n[e],delete n[e])},e=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(t){return"object"==typeof t&&"object"==typeof t.audio&&(t=JSON.parse(JSON.stringify(t)),n(t.audio,"autoGainControl","mozAutoGainControl"),n(t.audio,"noiseSuppression","mozNoiseSuppression")),e(t)},r&&r.prototype.getSettings){const e=r.prototype.getSettings;r.prototype.getSettings=function(){const t=e.apply(this,arguments);return n(t,"mozAutoGainControl","autoGainControl"),n(t,"mozNoiseSuppression","noiseSuppression"),t}}if(r&&r.prototype.applyConstraints){const e=r.prototype.applyConstraints;r.prototype.applyConstraints=function(t){return"audio"===this.kind&&"object"==typeof t&&(t=JSON.parse(JSON.stringify(t)),n(t,"autoGainControl","mozAutoGainControl"),n(t,"noiseSuppression","mozNoiseSuppression")),e.apply(this,[t])}}}}function L(n,e){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(n.navigator.mediaDevices.getDisplayMedia=function(t){if(!t||!t.video){const n=new DOMException("getDisplayMedia without video constraints is undefined");return n.name="NotFoundError",n.code=8,Promise.reject(n)}return!0===t.video?t.video={mediaSource:e}:t.video.mediaSource=e,n.navigator.mediaDevices.getUserMedia(t)})}function K(n){"object"==typeof n&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function J(n,e){if("object"!=typeof n||!n.RTCPeerConnection&&!n.mozRTCPeerConnection)return;!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(e){const t=n.RTCPeerConnection.prototype[e],r={[e](){return arguments[0]=new("addIceCandidate"===e?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}};n.RTCPeerConnection.prototype[e]=r[e]}));const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[n,i,s]=arguments;return r.apply(this,[n||null]).then(n=>{if(e.version<53&&!i)try{n.forEach(n=>{n.type=t[n.type]||n.type})}catch(e){if("TypeError"!==e.name)throw e;n.forEach((e,r)=>{n.set(r,Object.assign({},e,{type:t[e.type]||e.type}))})}return n}).then(i,s)}}function V(n){if("object"!=typeof n||!n.RTCPeerConnection||!n.RTCRtpSender)return;if(n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)return;const e=n.RTCPeerConnection.prototype.getSenders;e&&(n.RTCPeerConnection.prototype.getSenders=function(){const n=e.apply(this,[]);return n.forEach(n=>n._pc=this),n});const t=n.RTCPeerConnection.prototype.addTrack;t&&(n.RTCPeerConnection.prototype.addTrack=function(){const n=t.apply(this,arguments);return n._pc=this,n}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function H(n){if("object"!=typeof n||!n.RTCPeerConnection||!n.RTCRtpSender)return;if(n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)return;const e=n.RTCPeerConnection.prototype.getReceivers;e&&(n.RTCPeerConnection.prototype.getReceivers=function(){const n=e.apply(this,[]);return n.forEach(n=>n._pc=this),n}),y(n,"track",n=>(n.receiver._pc=n.srcElement,n)),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function q(n){n.RTCPeerConnection&&!("removeStream"in n.RTCPeerConnection.prototype)&&(n.RTCPeerConnection.prototype.removeStream=function(n){E("removeStream","removeTrack"),this.getSenders().forEach(e=>{e.track&&n.getTracks().includes(e.track)&&this.removeTrack(e)})})}function W(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function F(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype.addTransceiver;e&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let n=arguments[1]&&arguments[1].sendEncodings;void 0===n&&(n=[]),n=[...n];const t=n.length>0;t&&n.forEach(n=>{if("rid"in n){if(!/^[a-z0-9]{0,16}$/i.test(n.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in n&&!(parseFloat(n.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in n&&!(parseFloat(n.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const r=e.apply(this,arguments);if(t){const{sender:e}=r,t=e.getParameters();(!("encodings"in t)||1===t.encodings.length&&0===Object.keys(t.encodings[0]).length)&&(t.encodings=n,e.sendEncodings=n,this.setParametersPromises.push(e.setParameters(t).then(()=>{delete e.sendEncodings}).catch(()=>{delete e.sendEncodings})))}return r})}function G(n){if("object"!=typeof n||!n.RTCRtpSender)return;const e=n.RTCRtpSender.prototype.getParameters;e&&(n.RTCRtpSender.prototype.getParameters=function(){const n=e.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}function z(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function X(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function Y(n){if("object"==typeof n&&n.RTCPeerConnection){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(n){this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(t=>e.call(this,t,n)),n.getVideoTracks().forEach(t=>e.call(this,t,n))},n.RTCPeerConnection.prototype.addTrack=function(n,...t){return t&&t.forEach(n=>{this._localStreams?this._localStreams.includes(n)||this._localStreams.push(n):this._localStreams=[n]}),e.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const e=this._localStreams.indexOf(n);if(-1===e)return;this._localStreams.splice(e,1);const t=n.getTracks();this.getSenders().forEach(n=>{t.includes(n.track)&&this.removeTrack(n)})})}}function Q(n){if("object"==typeof n&&n.RTCPeerConnection&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(n=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(n))return;this._remoteStreams.push(n);const e=new Event("addstream");e.stream=n,this.dispatchEvent(e)})})}});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){const n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(e=>{if(n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.indexOf(e)>=0)return;n._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,n.dispatchEvent(t)})}),e.apply(n,arguments)}}}function Z(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype,t=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,s=e.setRemoteDescription,a=e.addIceCandidate;e.createOffer=function(n,e){const r=arguments.length>=2?arguments[2]:arguments[0],i=t.apply(this,[r]);return e?(i.then(n,e),Promise.resolve()):i},e.createAnswer=function(n,e){const t=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[t]);return e?(i.then(n,e),Promise.resolve()):i};let o=function(n,e,t){const r=i.apply(this,[n]);return t?(r.then(e,t),Promise.resolve()):r};e.setLocalDescription=o,o=function(n,e,t){const r=s.apply(this,[n]);return t?(r.then(e,t),Promise.resolve()):r},e.setRemoteDescription=o,o=function(n,e,t){const r=a.apply(this,[n]);return t?(r.then(e,t),Promise.resolve()):r},e.addIceCandidate=o}function $(n){const e=n&&n.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,t=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=n=>t(nn(n))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(n,t,r){e.mediaDevices.getUserMedia(n).then(t,r)}.bind(e))}function nn(n){return n&&void 0!==n.video?Object.assign({},n,{video:R(n.video)}):n}function en(n){if(!n.RTCPeerConnection)return;const e=n.RTCPeerConnection;n.RTCPeerConnection=function(n,t){if(n&&n.iceServers){const e=[];for(let t=0;t<n.iceServers.length;t++){let r=n.iceServers[t];void 0===r.urls&&r.url?(E("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,e.push(r)):e.push(n.iceServers[t])}n.iceServers=e}return new e(n,t)},n.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get:()=>e.generateCertificate})}function tn(n){"object"==typeof n&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function rn(n){const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(n){if(n){void 0!==n.offerToReceiveAudio&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);const e=this.getTransceivers().find(n=>"audio"===n.receiver.track.kind);!1===n.offerToReceiveAudio&&e?"sendrecv"===e.direction?e.setDirection?e.setDirection("sendonly"):e.direction="sendonly":"recvonly"===e.direction&&(e.setDirection?e.setDirection("inactive"):e.direction="inactive"):!0!==n.offerToReceiveAudio||e||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==n.offerToReceiveVideo&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);const t=this.getTransceivers().find(n=>"video"===n.receiver.track.kind);!1===n.offerToReceiveVideo&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==n.offerToReceiveVideo||t||this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function sn(n){"object"!=typeof n||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}var an=t(0),on=t.n(an);function cn(n){if(!n.RTCIceCandidate||n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)return;const e=n.RTCIceCandidate;n.RTCIceCandidate=function(n){if("object"==typeof n&&n.candidate&&0===n.candidate.indexOf("a=")&&((n=JSON.parse(JSON.stringify(n))).candidate=n.candidate.substring(2)),n.candidate&&n.candidate.length){const t=new e(n),r=on.a.parseCandidate(n.candidate);for(const n in r)n in t||Object.defineProperty(t,n,{value:r[n]});return t.toJSON=function(){return{candidate:t.candidate,sdpMid:t.sdpMid,sdpMLineIndex:t.sdpMLineIndex,usernameFragment:t.usernameFragment}},t}return new e(n)},n.RTCIceCandidate.prototype=e.prototype,y(n,"icecandidate",e=>(e.candidate&&Object.defineProperty(e,"candidate",{value:new n.RTCIceCandidate(e.candidate),writable:"false"}),e))}function un(n){!n.RTCIceCandidate||n.RTCIceCandidate&&"relayProtocol"in n.RTCIceCandidate.prototype||y(n,"icecandidate",n=>{if(n.candidate){const e=on.a.parseCandidate(n.candidate.candidate);"relay"===e.type&&(n.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[e.priority>>24])}return n})}function ln(n,e){if(!n.RTCPeerConnection)return;"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const t=function(n){if(!n||!n.sdp)return!1;const e=on.a.splitSections(n.sdp);return e.shift(),e.some(n=>{const e=on.a.parseMLine(n);return e&&"application"===e.kind&&-1!==e.protocol.indexOf("SCTP")})},r=function(n){const e=n.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===e||e.length<2)return-1;const t=parseInt(e[1],10);return t!=t?-1:t},i=function(n){let t=65536;return"firefox"===e.browser&&(t=e.version<57?-1===n?16384:2147483637:e.version<60?57===e.version?65535:65536:2147483637),t},s=function(n,t){let r=65536;"firefox"===e.browser&&57===e.version&&(r=65535);const i=on.a.matchPrefix(n.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substring(19),10):"firefox"===e.browser&&-1!==t&&(r=2147483637),r},a=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===e.browser&&e.version>=76){const{sdpSemantics:n}=this.getConfiguration();"plan-b"===n&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(t(arguments[0])){const n=r(arguments[0]),e=i(n),t=s(arguments[0],n);let a;a=0===e&&0===t?Number.POSITIVE_INFINITY:0===e||0===t?Math.max(e,t):Math.min(e,t);const o={};Object.defineProperty(o,"maxMessageSize",{get:()=>a}),this._sctp=o}return a.apply(this,arguments)}}function pn(n){if(!n.RTCPeerConnection||!("createDataChannel"in n.RTCPeerConnection.prototype))return;function e(n,e){const t=n.send;n.send=function(){const r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===n.readyState&&e.sctp&&i>e.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+e.sctp.maxMessageSize+" bytes)");return t.apply(n,arguments)}}const t=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){const n=t.apply(this,arguments);return e(n,this),n},y(n,"datachannel",n=>(e(n.channel,n.target),n))}function dn(n){if(!n.RTCPeerConnection||"connectionState"in n.RTCPeerConnection.prototype)return;const e=n.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const t=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=n=>{const e=n.target;if(e._lastConnectionState!==e.connectionState){e._lastConnectionState=e.connectionState;const t=new Event("connectionstatechange",n);e.dispatchEvent(t)}return n},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),t.apply(this,arguments)}})}function fn(n,e){if(!n.RTCPeerConnection)return;if("chrome"===e.browser&&e.version>=71)return;if("safari"===e.browser&&e.version>=605)return;const t=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(e){if(e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")){const t=e.sdp.split("\n").filter(n=>"a=extmap-allow-mixed"!==n.trim()).join("\n");n.RTCSessionDescription&&e instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:e.type,sdp:t}):e.sdp=t}return t.apply(this,arguments)}}function hn(n,e){if(!n.RTCPeerConnection||!n.RTCPeerConnection.prototype)return;const t=n.RTCPeerConnection.prototype.addIceCandidate;t&&0!==t.length&&(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===e.browser&&e.version<78||"firefox"===e.browser&&e.version<68||"safari"===e.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function gn(n,e){if(!n.RTCPeerConnection||!n.RTCPeerConnection.prototype)return;const t=n.RTCPeerConnection.prototype.setLocalDescription;t&&0!==t.length&&(n.RTCPeerConnection.prototype.setLocalDescription=function(){let n=arguments[0]||{};if("object"!=typeof n||n.type&&n.sdp)return t.apply(this,arguments);if(n={type:n.type,sdp:n.sdp},!n.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":n.type="offer";break;default:n.type="answer"}if(n.sdp||"offer"!==n.type&&"answer"!==n.type)return t.apply(this,[n]);const e="offer"===n.type?this.createOffer:this.createAnswer;return e.apply(this).then(n=>t.apply(this,[n]))})}var mn=function({window:n}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const t=S,o=function(n){const e={browser:null,version:null};if(void 0===n||!n.navigator)return e.browser="Not a browser.",e;const{navigator:t}=n;if(t.mozGetUserMedia)e.browser="firefox",e.version=b(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===n.isSecureContext&&n.webkitRTCPeerConnection)e.browser="chrome",e.version=b(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!n.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return e.browser="Not a supported browser.",e;e.browser="safari",e.version=b(t.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype}return e}(n),c={browserDetails:o,commonShim:a,extractVersion:b,disableLog:_,disableWarnings:v,sdp:an};switch(o.browser){case"chrome":if(!r||!N||!e.shimChrome)return t("Chrome shim is not included in this adapter release."),c;if(null===o.version)return t("Chrome shim can not determine version, not shimming."),c;t("adapter.js shimming chrome."),c.browserShim=r,hn(n,o),gn(n),C(n,o),A(n),N(n,o),D(n),j(n,o),O(n),P(n),k(n),M(n,o),cn(n),un(n),dn(n),ln(n,o),pn(n),fn(n,o);break;case"firefox":if(!i||!J||!e.shimFirefox)return t("Firefox shim is not included in this adapter release."),c;t("adapter.js shimming firefox."),c.browserShim=i,hn(n,o),gn(n),U(n,o),J(n,o),K(n),q(n),V(n),H(n),W(n),F(n),G(n),z(n),X(n),cn(n),dn(n),ln(n,o),pn(n);break;case"safari":if(!s||!e.shimSafari)return t("Safari shim is not included in this adapter release."),c;t("adapter.js shimming safari."),c.browserShim=s,hn(n,o),gn(n),en(n),rn(n),Z(n),Y(n),Q(n),tn(n),$(n),sn(n),cn(n),un(n),ln(n,o),pn(n),fn(n,o);break;default:t("Unsupported browser!")}return c}({window:"undefined"==typeof window?void 0:window});function bn(n){if(void 0===bn.initDone)return n.error("Library not initialized"),{};if(!bn.isWebrtcSupported())return n.error("WebRTC not supported by this browser"),{};if(bn.log("Library initialized: "+bn.initDone),(n=n||{}).success="function"==typeof n.success?n.success:bn.noop,n.error="function"==typeof n.error?n.error:bn.noop,n.destroyed="function"==typeof n.destroyed?n.destroyed:bn.noop,null===n.server||void 0===n.server)return n.error("Invalid gateway url"),{};var e=!1,t=null,r={},i=null,s=null,a=0,o=n.server;bn.isArray(o)?(bn.log("Multiple servers provided ("+o.length+"), will use the first that works"),o=null,s=n.server,bn.debug(s)):0===o.indexOf("ws")?(e=!0,bn.log("Using WebSockets to contact Janus: "+o)):(e=!1,bn.log("Using REST API to contact Janus: "+o));var c=n.iceServers;null==c&&(c=[{urls:"stun:stun.l.google.com:19302"}]);var u=n.iceTransportPolicy,l=n.bundlePolicy,p=n.ipv6;null==p&&(p=!1);var d=!1;void 0!==n.withCredentials&&null!==n.withCredentials&&(d=!0===n.withCredentials);var f=null;void 0!==n.max_poll_events&&null!==n.max_poll_events&&(f=n.max_poll_events),f<1&&(f=1);var h=null;void 0!==n.token&&null!==n.token&&(h=n.token);var g=null;void 0!==n.apisecret&&null!==n.apisecret&&(g=n.apisecret),this.destroyOnUnload=!0,void 0!==n.destroyOnUnload&&null!==n.destroyOnUnload&&(this.destroyOnUnload=!0===n.destroyOnUnload);var m=!1,b=null,y={},_=this,v=0,S={};function E(){if(null!=b)if(bn.debug("Long poll..."),m){var e=o+"/"+b+"?rid="+(new Date).getTime();null!=f&&(e=e+"&maxev="+f),null!=h&&(e=e+"&token="+h),null!=g&&(e=e+"&apisecret="+g),bn.httpAPICall(e,{verb:"GET",withCredentials:d,success:T,timeout:6e4,error:function(e,t){if(bn.error(e+": "+t),++v>3)return m=!1,void n.error("Lost connection to the gateway (is it down?)");E()}})}else bn.warn("Is the gateway down? (connected=false)")}function T(n,t){if(v=0,e||null==b||!0===t||setTimeout(E,200),e||!bn.isArray(n))if("keepalive"!==n.janus)if("ack"!==n.janus)if("success"!==n.janus){if("webrtcup"===n.janus)return bn.debug("Got a webrtcup event on session "+b),bn.debug(n),null==(r=n.sender)?void bn.warn("Missing sender..."):null==(s=y[r])?void bn.debug("This handle is not attached to this session"):void s.webrtcState(!0);if("hangup"===n.janus){if(bn.debug("Got a hangup event on session "+b),bn.debug(n),null==(r=n.sender))return void bn.warn("Missing sender...");if(null==(s=y[r]))return void bn.debug("This handle is not attached to this session");s.webrtcState(!1,n.reason),s.hangup()}else if("detached"===n.janus){if(bn.debug("Got a detached event on session "+b),bn.debug(n),null==(r=n.sender))return void bn.warn("Missing sender...");if(null==(s=y[r]))return;s.detached=!0,s.ondetached(),s.detach()}else if("media"===n.janus){if(bn.debug("Got a media event on session "+b),bn.debug(n),null==(r=n.sender))return void bn.warn("Missing sender...");if(null==(s=y[r]))return void bn.debug("This handle is not attached to this session");s.mediaState(n.type,n.receiving)}else if("slowlink"===n.janus){if(bn.debug("Got a slowlink event on session "+b),bn.debug(n),null==(r=n.sender))return void bn.warn("Missing sender...");if(null==(s=y[r]))return void bn.debug("This handle is not attached to this session");s.slowLink(n.uplink,n.nacks)}else{if("error"===n.janus){if(bn.error("Ooops: "+n.error.code+" "+n.error.reason),bn.debug(n),null!=(u=n.transaction))null!=(l=S[u])&&l(n),delete S[u];return}if("event"===n.janus){var r;if(bn.debug("Got a plugin event on session "+b),bn.debug(n),null==(r=n.sender))return void bn.warn("Missing sender...");var i=n.plugindata;if(null==i)return void bn.warn("Missing plugindata...");bn.debug("  -- Event is coming from "+r+" ("+i.plugin+")");var s,a=i.data;if(bn.debug(a),null==(s=y[r]))return void bn.warn("This handle is not attached to this session");var o=n.jsep;null!=o&&(bn.debug("Handling SDP as well..."),bn.debug(o));var c=s.onmessage;null!=c?(bn.debug("Notifying application..."),c(a,o)):bn.debug("No provided notification callback")}else bn.warn("Unkown message/event  '"+n.janus+"' on session "+b),bn.debug(n)}}else{var u,l;bn.debug("Got a success on session "+b),bn.debug(n),null!=(u=n.transaction)&&(null!=(l=S[u])&&l(n),delete S[u])}else bn.debug("Got an ack on session "+b),bn.debug(n),null!=(u=n.transaction)&&(null!=(l=S[u])&&l(n),delete S[u]);else bn.vdebug("Got a keepalive on session "+b);else for(var p=0;p<n.length;p++)T(n[p],!0)}function R(){if(null!==o&&e&&m){i=setTimeout(R,3e4);var n={janus:"keepalive",session_id:b,transaction:bn.randomString(12)};null!=h&&(n.token=h),null!=g&&(n.apisecret=g),t.send(JSON.stringify(n))}}function w(s){!b&&window.localStorage.getItem("rtcSessionId")&&(b=window.localStorage.getItem("rtcSessionId"),m=!0),(s=s||{}).success="function"==typeof s.success?s.success:bn.noop;var a=!0;if(void 0!==s.asyncRequest&&null!==s.asyncRequest&&(a=!0===s.asyncRequest),bn.log("Destroying session "+b+" (async="+a+")"),!m)return bn.warn("Is the gateway down? (connected=false)"),void s.success();if(null==b)return bn.warn("No session to destroy"),s.success(),void n.destroyed();delete bn.sessions[b];var c={janus:"destroy",transaction:bn.randomString(12)};if(null!=h&&(c.token=h),null!=g&&(c.apisecret=g),e){c.session_id=b;var u=function(){for(var n in r)t.removeEventListener(n,r[n]);t.removeEventListener("message",l),t.removeEventListener("error",p),i&&clearTimeout(i)},l=function(e){var t=JSON.parse(e.data);t.session_id==c.session_id&&t.transaction==c.transaction&&(u(),s.success(),n.destroyed())},p=function(e){u(),s.error("Failed to destroy the gateway: Is the gateway down?"),n.destroyed()};return t.addEventListener("message",l),t.addEventListener("error",p),void t.send(JSON.stringify(c))}bn.httpAPICall(o+"/"+b,{verb:"POST",async:a,withCredentials:d,body:c,success:function(e){bn.log("Destroyed session:"),bn.debug(e),b=null,m=!1,window.localStorage.removeItem("rtcSessionId"),"success"!==e.janus&&bn.error("Ooops: "+e.error.code+" "+e.error.reason),s.success(),n.destroyed()},error:function(e,t){bn.error(e+": "+t),b=null,m=!1,localStorage.removeItem("rtcSessionId"),s.success(),n.destroyed()}})}function x(n,r){if((r=r||{}).success="function"==typeof r.success?r.success:bn.noop,r.error="function"==typeof r.error?r.error:bn.noop,!m)return bn.warn("Is the gateway down? (connected=false)"),void r.error("Is the gateway down? (connected=false)");var i=r.message,s=r.jsep,a=bn.randomString(12),c={janus:"message",body:i,transaction:a};if(null!=h&&(c.token=h),null!=g&&(c.apisecret=g),null!=s&&(c.jsep=s),bn.debug("Sending message to plugin (handle="+n+"):"),bn.debug(c),e)return c.session_id=b,c.handle_id=n,S[a]=function(n){if(bn.debug("Message sent!"),bn.debug(n),"success"===n.janus){var e=n.plugindata;if(null==e)return bn.warn("Request succeeded, but missing plugindata..."),void r.success();bn.log("Synchronous transaction successful ("+e.plugin+")");var t=e.data;return bn.debug(t),void r.success(t)}"ack"===n.janus?r.success():void 0!==n.error&&null!==n.error?(bn.error("Ooops: "+n.error.code+" "+n.error.reason),r.error(n.error.code+" "+n.error.reason)):(bn.error("Unknown error"),r.error("Unknown error"))},void t.send(JSON.stringify(c));bn.httpAPICall(o+"/"+b+"/"+n,{verb:"POST",withCredentials:d,body:c,success:function(n){if(bn.debug("Message sent!"),bn.debug(n),"success"===n.janus){var e=n.plugindata;if(null==e)return bn.warn("Request succeeded, but missing plugindata..."),void r.success();bn.log("Synchronous transaction successful ("+e.plugin+")");var t=e.data;return bn.debug(t),void r.success(t)}"ack"===n.janus?r.success():void 0!==n.error&&null!==n.error?(bn.error("Ooops: "+n.error.code+" "+n.error.reason),r.error(n.error.code+" "+n.error.reason)):(bn.error("Unknown error"),r.error("Unknown error"))},error:function(n,e){bn.error(n+": "+e),r.error(n+": "+e)}})}function C(n,r){if((r=r||{}).success="function"==typeof r.success?r.success:bn.noop,r.error="function"==typeof r.error?r.error:bn.noop,!m)return bn.warn("Is the gateway down? (connected=false)"),void r.error("Is the gateway down? (connected=false)");var i=r.message,s=r.jsep,a=bn.randomString(12),c={janus:"log",body:i,transaction:a};if(null!=h&&(c.token=h),null!=g&&(c.apisecret=g),null!=s&&(c.jsep=s),bn.debug("Sending message to plugin (handle="+n+"):"),bn.debug(c),e)return c.session_id=b,c.handle_id=n,S[a]=function(n){if(bn.debug("Message sent!"),bn.debug(n),"success"===n.janus){var e=n.plugindata;if(null==e)return bn.warn("Request succeeded, but missing plugindata..."),void r.success();bn.log("Synchronous transaction successful ("+e.plugin+")");var t=e.data;return bn.debug(t),void r.success(t)}"ack"===n.janus?r.success():void 0!==n.error&&null!==n.error?(bn.error("Ooops: "+n.error.code+" "+n.error.reason),r.error(n.error.code+" "+n.error.reason)):(bn.error("Unknown error"),r.error("Unknown error"))},void t.send(JSON.stringify(c));bn.httpAPICall(o+"/"+b+"/"+n,{verb:"POST",withCredentials:d,body:c,success:function(n){if(bn.debug("Message sent!"),bn.debug(n),"success"===n.janus){var e=n.plugindata;if(null==e)return bn.warn("Request succeeded, but missing plugindata..."),void r.success();bn.log("Synchronous transaction successful ("+e.plugin+")");var t=e.data;return bn.debug(t),void r.success(t)}"ack"===n.janus?r.success():void 0!==n.error&&null!==n.error?(bn.error("Ooops: "+n.error.code+" "+n.error.reason),r.error(n.error.code+" "+n.error.reason)):(bn.error("Unknown error"),r.error("Unknown error"))},error:function(n,e){bn.error(n+": "+e),r.error(n+": "+e)}})}function I(n,r){if(m){var i={janus:"trickle",candidate:r,transaction:bn.randomString(12)};if(null!=h&&(i.token=h),null!=g&&(i.apisecret=g),bn.vdebug("Sending trickle candidate (handle="+n+"):"),bn.vdebug(i),e)return i.session_id=b,i.handle_id=n,void t.send(JSON.stringify(i));bn.httpAPICall(o+"/"+b+"/"+n,{verb:"POST",withCredentials:d,body:i,success:function(n){bn.vdebug("Candidate sent!"),bn.vdebug(n),"ack"===n.janus||bn.error("Ooops: "+n.error.code+" "+n.error.reason)},error:function(n,e){bn.error(n+": "+e)}})}else bn.warn("Is the gateway down? (connected=false)")}function A(n,e){(e=e||{}).success="function"==typeof e.success?e.success:bn.noop,e.error="function"==typeof e.error?e.error:bn.noop;var t=y[n];if(null==t||null===t.webrtcStuff||void 0===t.webrtcStuff)return bn.warn("Invalid handle"),void e.error("Invalid handle");var r=t.webrtcStuff,i=e.text;if(null==i)return bn.warn("Invalid text"),void e.error("Invalid text");bn.log("Sending string on data channel: "+i),r.dataChannel.send(i),e.success()}function D(n,e){(e=e||{}).success="function"==typeof e.success?e.success:bn.noop,e.error="function"==typeof e.error?e.error:bn.noop;var t=y[n];if(null==t||null===t.webrtcStuff||void 0===t.webrtcStuff)return bn.warn("Invalid handle"),void e.error("Invalid handle");var r=t.webrtcStuff;if(null===r.dtmfSender||void 0===r.dtmfSender){if(void 0!==r.myStream&&null!==r.myStream){var i=r.myStream.getAudioTracks();if(null!=i&&i.length>0){var s=i[0];r.dtmfSender=r.pc.createDTMFSender(s),bn.log("Created DTMF Sender"),r.dtmfSender.ontonechange=function(n){bn.debug("Sent DTMF tone: "+n.tone)}}}if(null===r.dtmfSender||void 0===r.dtmfSender)return bn.warn("Invalid DTMF configuration"),void e.error("Invalid DTMF configuration")}var a=e.dtmf;if(null==a)return bn.warn("Invalid DTMF parameters"),void e.error("Invalid DTMF parameters");var o=a.tones;if(null==o)return bn.warn("Invalid DTMF string"),void e.error("Invalid DTMF string");var c=a.duration;null==c&&(c=500);var u=a.gap;null==u&&(u=50),bn.debug("Sending DTMF string "+o+" (duration "+c+"ms, gap "+u+"ms)"),r.dtmfSender.insertDTMF(o,c,u)}function O(n,r){(r=r||{}).success="function"==typeof r.success?r.success:bn.noop,r.error="function"==typeof r.error?r.error:bn.noop,bn.warn(r);var i=!0;if(void 0!==r.asyncRequest&&null!==r.asyncRequest&&(i=!0===r.asyncRequest),bn.log("Destroying handle "+n+" (async="+i+")"),V(n),y[n].detached)return delete y[n],void r.success();if(!m)return bn.warn("Is the gateway down? (connected=false)"),void r.error("Is the gateway down? (connected=false)");var s={janus:"detach",transaction:bn.randomString(12)};if(null!=h&&(s.token=h),null!=g&&(s.apisecret=g),e)return s.session_id=b,s.handle_id=n,t.send(JSON.stringify(s)),delete y[n],void r.success();bn.httpAPICall(o+"/"+b+"/"+n,{verb:"POST",async:i,withCredentials:d,body:s,success:function(e){bn.log("Destroyed handle:"),bn.debug(e),"success"!==e.janus&&bn.error("Ooops: "+e.error.code+" "+e.error.reason),delete y[n],r.success()},error:function(e,t){bn.error(e+": "+t),delete y[n],r.success()}})}function P(n,e,t,r,i){var s=y[n];if(null==s||null===s.webrtcStuff||void 0===s.webrtcStuff)return bn.warn("Invalid handle"),void r.error("Invalid handle");var a=s.webrtcStuff;bn.debug("streamsDone:",i),a.myStream=i;var o={iceServers:c,iceTransportPolicy:u,bundlePolicy:l},d={optional:[{DtlsSrtpKeyAgreement:!0}]};if(!0===p&&d.optional.push({googIPv6:!0}),"edge"===bn.webRTCAdapter.browserDetails.browser&&(o.bundlePolicy="max-bundle"),bn.log("Creating PeerConnection"),bn.debug(d),a.pc=new RTCPeerConnection(o,d),bn.debug(a.pc),a.pc.getStats&&(a.volume.value=0,a.bitrate.value="0 kbits/sec"),bn.log("Preparing local SDP and gathering candidates (trickle="+a.trickle+")"),a.pc.oniceconnectionstatechange=function(n){a.pc&&s.iceState(a.pc.iceConnectionState)},a.pc.onicecandidate=function(e){if(null==e.candidate||"edge"===bn.webRTCAdapter.browserDetails.browser&&e.candidate.candidate.indexOf("endOfCandidates")>0)bn.log("End of candidates."),a.iceDone=!0,!0===a.trickle?I(n,{completed:!0}):function(n,e){(e=e||{}).success="function"==typeof e.success?e.success:bn.noop,e.error="function"==typeof e.error?e.error:bn.noop;var t=y[n];if(null==t||null===t.webrtcStuff||void 0===t.webrtcStuff)return void bn.warn("Invalid handle, not sending anything");var r=t.webrtcStuff;if(bn.log("Sending offer/answer SDP..."),null===r.mySdp||void 0===r.mySdp)return void bn.warn("Local SDP instance is invalid, not sending anything...");if(r.mySdp={type:r.pc.localDescription.type,sdp:r.pc.localDescription.sdp},r.sdpSent)return void bn.log("Offer/Answer SDP already sent, not sending it again");!1===r.trickle&&(r.mySdp.trickle=!1);bn.debug(e),r.sdpSent=!0,e.success(r.mySdp)}(n,r);else{var t={candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex};!0===a.trickle&&I(n,t)}},null!=i&&(bn.log("Adding local stream"),i.getTracks().forEach(n=>a.pc.addTrack(n,i)),s.onlocalstream(i)),a.pc.ontrack=function(n){bn.log("Handling Remote Track"),bn.debug(n),n.streams&&(a.remoteStream=n.streams[0],s.onremotestream(a.remoteStream))},function(n){if(bn.debug("isDataEnabled:",n),"edge"==bn.webRTCAdapter.browserDetails.browser)return bn.warn("Edge doesn't support data channels yet"),!1;return null!=n&&!0===n.data}(t)){bn.log("Creating data channel");var f=function(){var n=null!==a.dataChannel?a.dataChannel.readyState:"null";bn.log("State change on data channel: "+n),"open"===n&&s.ondataopen()};a.dataChannel=a.pc.createDataChannel("JanusDataChannel",{ordered:!1}),a.dataChannel.onmessage=function(n){bn.log("Received message on data channel: "+n.data),s.ondata(n.data)},a.dataChannel.onopen=f,a.dataChannel.onclose=f,a.dataChannel.onerror=function(n){bn.error("Got error on data channel:",n)}}null==e?j(n,t,r):a.pc.setRemoteDescription(new RTCSessionDescription(e),(function(){bn.log("Remote description accepted!"),N(n,t,r)}),r.error)}function k(n,e){(e=e||{}).success="function"==typeof e.success?e.success:bn.noop,e.error="function"==typeof e.error?e.error:J;var t=e.jsep,r=e.media,i=y[n];if(null==i||null===i.webrtcStuff||void 0===i.webrtcStuff)return bn.warn("Invalid handle"),void e.error("Invalid handle");var s,a=i.webrtcStuff;if(void 0!==a.pc&&null!==a.pc)return bn.log("Updating existing media session"),void(null==t?j(n,r,e):a.pc.setRemoteDescription(new RTCSessionDescription(t),(function(){bn.log("Remote description accepted!"),N(n,r,e)}),e.error));if(a.trickle=(s=e.trickle,bn.debug("isTrickleEnabled:",s),null==s||!0===s),null!==e.stream&&void 0!==e.stream){var o=e.stream;return bn.log("MediaStream provided by the application"),bn.debug(o),a.streamExternal=!0,void P(n,t,r,e,o)}if(H(r)||W(r)){var c={mandatory:{},optional:[]};i.consentDialog(!0);var u=H(r);!0===u&&null!=r&&null!=r&&"object"==typeof r.audio&&(u=r.audio);var l=W(r);if(!0===l&&null!=r&&null!=r)if(!(!0===e.simulcast)||t||void 0!==r.video&&!1!==r.video||(r.video="hires"),r.video&&"screen"!=r.video&&"window"!=r.video){var p=0,d=0,f=0;if("lowres"===r.video)d=240,f=240,p=320;else if("lowres-16:9"===r.video)d=180,f=180,p=320;else if("hires"===r.video||"hires-16:9"===r.video){if(d=720,f=720,p=1280,navigator.mozGetUserMedia)(h=parseInt(window.navigator.userAgent.match(/Firefox\/(.*)/)[1],10))<38&&(bn.warn(r.video+" unsupported, falling back to stdres (old Firefox)"),d=480,f=480,p=640)}else"stdres"===r.video?(d=480,f=480,p=640):"stdres-16:9"===r.video?(d=360,f=360,p=640):(bn.log("Default video setting is stdres 4:3"),d=480,f=480,p=640);if(bn.log("Adding media constraint:",r.video),navigator.mozGetUserMedia){var h=parseInt(window.navigator.userAgent.match(/Firefox\/(.*)/)[1],10);l=h<38?{require:["height","width"],height:{max:f,min:d},width:{max:p,min:p}}:{height:{ideal:d},width:{ideal:p}}}else l={mandatory:{maxHeight:f,minHeight:d,maxWidth:p,minWidth:p},optional:[]};"object"==typeof r.video&&(l=r.video),bn.debug(l)}else if("screen"===r.video||"window"===r.video){if(r.screenshareFrameRate||(r.screenshareFrameRate=3),"https:"!==window.location.protocol)return bn.warn("Screen sharing only works on HTTPS, try the https:// version of this page"),i.consentDialog(!1),void e.error("Screen sharing only works on HTTPS, try the https:// version of this page");var g={};function m(s,a){i.consentDialog(!1),s?e.error({code:s.code,name:s.name,message:s.message}):P(n,t,r,e,a)}function b(n,e,t){bn.log("Adding media constraint (screen capture)"),bn.debug(n),navigator.mediaDevices.getUserMedia(n).then((function(n){t?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(t){n.addTrack(t.getAudioTracks()[0]),e(null,n)})):e(null,n)})).catch((function(n){i.consentDialog(!1),e(n)}))}if("chrome"===bn.webRTCAdapter.browserDetails.browser){var _=bn.webRTCAdapter.browserDetails.version,v=33;if(window.navigator.userAgent.match("Linux")&&(v=35),_>=26&&_<=v)b(c={video:{mandatory:{googLeakyBucket:!0,maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:r.screenshareFrameRate,maxFrameRate:r.screenshareFrameRate,chromeMediaSource:"screen"}},audio:H(r)},m);else{var S=window.setTimeout((function(){return(E=new Error("NavigatorUserMediaError")).name='The required Chrome extension is not installed: click <a href="#">here</a> to install it. (NOTE: this will need you to refresh the page)',i.consentDialog(!1),e.error(E)}),1e3);g[S]=[m,null],window.postMessage({type:"janusGetScreen",id:S},"*")}}else if(window.navigator.userAgent.match("Firefox")){if(!(parseInt(window.navigator.userAgent.match(/Firefox\/(.*)/)[1],10)>=33)){var E=new Error("NavigatorUserMediaError");return E.name="Your version of Firefox does not support screen sharing, please install Firefox 33 (or more recent versions)",i.consentDialog(!1),void e.error(E)}b(c={video:{mozMediaSource:r.video,mediaSource:r.video},audio:H(r)},(function(n,e){if(m(n,e),!n)var t=e.currentTime,r=window.setInterval((function(){e||window.clearInterval(r),e.currentTime==t&&(window.clearInterval(r),e.onended&&e.onended()),t=e.currentTime}),500)}))}return void window.addEventListener("message",(function(n){if(n.origin==window.location.origin)if("janusGotScreen"==n.data.type&&g[n.data.id]){var t=g[n.data.id][0];if(delete g[n.data.id],""===n.data.sourceId){var s=new Error("NavigatorUserMediaError");s.name="You cancelled the request for permission, giving up...",i.consentDialog(!1),e.error(s)}else(c={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:r.screenshareFrameRate,maxFrameRate:r.screenshareFrameRate},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}}).video.mandatory.chromeMediaSourceId=n.data.sourceId,b(c,t,H(r))}else"janusGetScreenPending"==n.data.type&&window.clearTimeout(n.data.id)}))}null!=r&&"screen"===r.video||navigator.mediaDevices.enumerateDevices().then((function(s){var a=s.some((function(n){return"audioinput"===n.kind})),o=s.some((function(n){return"videoinput"===n.kind})),c=H(r),p=W(r),d=function(n){return bn.debug("isAudioSendRequired:",n),null!=n&&(!1!==n.audio&&!1!==n.audioSend&&(void 0!==n.failIfNoAudio&&null!==n.failIfNoAudio&&!0===n.failIfNoAudio))}(r),f=function(n){return bn.debug("isVideoSendRequired:",n),null!=n&&(!1!==n.video&&!1!==n.videoSend&&(void 0!==n.failIfNoVideo&&null!==n.failIfNoVideo&&!0===n.failIfNoVideo))}(r);if(c||p||d||f){var h=!!c&&a,g=!!p&&o;if(!h&&!g)return i.consentDialog(!1),e.error("No capture device found"),!1;if(!h&&d)return i.consentDialog(!1),e.error("Audio capture is required, but no capture device found"),!1;if(!g&&f)return i.consentDialog(!1),e.error("Video capture is required, but no capture device found"),!1}navigator.mediaDevices.getUserMedia({audio:!!a&&u,video:!!o&&l}).then((function(s){i.consentDialog(!1),P(n,t,r,e,s)})).catch((function(n){i.consentDialog(!1),e.error({code:n.code,name:n.name,message:n.message})}))})).catch((function(n){i.consentDialog(!1),e.error("enumerateDevices error",n)}))}else P(n,t,r,e)}function B(n,e){(e=e||{}).success="function"==typeof e.success?e.success:bn.noop,e.error="function"==typeof e.error?e.error:J;var t=e.jsep,r=y[n];if(null==r||null===r.webrtcStuff||void 0===r.webrtcStuff)return bn.warn("Invalid handle"),void e.error("Invalid handle");var i=r.webrtcStuff;if(null!=t){if(null===i.pc)return bn.warn("Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep"),void e.error("No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep");i.pc.setRemoteDescription(new RTCSessionDescription(t),(function(){bn.log("Remote description accepted!"),e.success()}),e.error)}else e.error("Invalid JSEP")}function j(n,e,t){(t=t||{}).success="function"==typeof t.success?t.success:bn.noop,t.error="function"==typeof t.error?t.error:bn.noop;var r=y[n];if(null==r||null===r.webrtcStuff||void 0===r.webrtcStuff)return bn.warn("Invalid handle"),void t.error("Invalid handle");var i=r.webrtcStuff,s=!0===t.simulcast;s?bn.log("Creating offer (iceDone="+i.iceDone+", simulcast="+s+")"):bn.log("Creating offer (iceDone="+i.iceDone+")");var a=null;a="firefox"==bn.webRTCAdapter.browserDetails.browser||"edge"==bn.webRTCAdapter.browserDetails.browser?{offerToReceiveAudio:q(e),offerToReceiveVideo:F(e)}:{mandatory:{OfferToReceiveAudio:q(e),OfferToReceiveVideo:F(e)}},bn.debug(a);var o=W(e);if(o&&s&&"firefox"===mn.browserDetails.browser){bn.log("Enabling Simulcasting for Firefox (RID)");var c=i.pc.getSenders()[1];bn.log(c);var u=c.getParameters();bn.log(u),c.setParameters({encodings:[{rid:"high",active:!0,priority:"high",maxBitrate:1e6},{rid:"medium",active:!0,priority:"medium",maxBitrate:3e5},{rid:"low",active:!0,priority:"low",maxBitrate:1e5}]})}i.pc.createOffer((function(n){if(bn.debug(n),null!==i.mySdp&&void 0!==i.mySdp||(bn.log("Setting local description"),o&&s&&("chrome"===mn.browserDetails.browser?(bn.log("Enabling Simulcasting for Chrome (SDP munging)"),n.sdp=function(n){for(var e=n.split("\r\n"),t=!1,r=[-1],i=-1,s=null,a=null,o=null,c=null,u=-1,l=0;l<e.length;l++){if(d=e[l].match(/m=(\w+) */)){if("video"===d[1]){if(!(r[0]<0)){u=l;break}t=!0}else if(r[0]>-1){u=l;break}}else if(t){var p=e[l].match(/a=ssrc-group:FID (\d+) (\d+)/);if(p)r[0]=p[1],i=p[2],e.splice(l,1),l--;else{if(r[0]){if((h=e[l].match("a=ssrc:"+r[0]+" cname:(.+)"))&&(s=h[1]),(h=e[l].match("a=ssrc:"+r[0]+" msid:(.+)"))&&(a=h[1]),(h=e[l].match("a=ssrc:"+r[0]+" mslabel:(.+)"))&&(o=h[1]),(h=e[l].match("a=ssrc:"+r+" label:(.+)"))&&(c=h[1]),0===e[l].indexOf("a=ssrc:"+i)){e.splice(l,1),l--;continue}if(0===e[l].indexOf("a=ssrc:"+r[0])){e.splice(l,1),l--;continue}}0!=e[l].length||(e.splice(l,1),l--)}}}if(r[0]<0){u=-1,t=!1;for(l=0;l<e.length;l++){var d;if(d=e[l].match(/m=(\w+) */)){if("video"===d[1]){if(!(r[0]<0)){u=l;break}t=!0}else if(r[0]>-1){u=l;break}}else if(t){if(r[0]<0){var f=e[l].match(/a=ssrc:(\d+)/);if(f){r[0]=f[1],e.splice(l,1),l--;continue}}else{var h;if((h=e[l].match("a=ssrc:"+r[0]+" cname:(.+)"))&&(s=h[1]),(h=e[l].match("a=ssrc:"+r[0]+" msid:(.+)"))&&(a=h[1]),(h=e[l].match("a=ssrc:"+r[0]+" mslabel:(.+)"))&&(o=h[1]),(h=e[l].match("a=ssrc:"+r+" label:(.+)"))&&(c=h[1]),0===e[l].indexOf("a=ssrc:"+i)){e.splice(l,1),l--;continue}if(0===e[l].indexOf("a=ssrc:"+r[0])){e.splice(l,1),l--;continue}}0!=e[l].length||(e.splice(l,1),l--)}}}if(r[0]<0)return bn.warn("Couldn't find the video SSRC, simulcasting NOT enabled"),n;u<0&&(u=e.length);r[1]=Math.floor(4294967295*Math.random()),r[2]=Math.floor(4294967295*Math.random());for(l=0;l<r.length;l++)s&&(e.splice(u,0,"a=ssrc:"+r[l]+" cname:"+s),u++),a&&(e.splice(u,0,"a=ssrc:"+r[l]+" msid:"+a),u++),o&&(e.splice(u,0,"a=ssrc:"+r[l]+" mslabel:"+a),u++),c&&(e.splice(u,0,"a=ssrc:"+r[l]+" label:"+a),u++);e.splice(u,0,"a=ssrc-group:SIM "+r[0]+" "+r[1]+" "+r[2]),(n=e.join("\r\n")).endsWith("\r\n")||(n+="\r\n");return n}(n.sdp)):"firefox"!==mn.browserDetails.browser&&bn.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")),i.mySdp=n.sdp,i.pc.setLocalDescription(n)),i.iceDone||i.trickle)if(i.sdpSent)bn.log("Offer already sent, not sending it again");else{bn.log("Offer ready"),bn.debug(t),i.sdpSent=!0;var e={type:n.type,sdp:n.sdp};t.success(e)}else bn.log("Waiting for all candidates...")}),t.error,a)}function N(n,e,t){(t=t||{}).success="function"==typeof t.success?t.success:bn.noop,t.error="function"==typeof t.error?t.error:bn.noop;var r=y[n];if(null==r||null===r.webrtcStuff||void 0===r.webrtcStuff)return bn.warn("Invalid handle"),void t.error("Invalid handle");var i=r.webrtcStuff,s=!0===t.simulcast;s?bn.log("Creating answer (iceDone="+i.iceDone+", simulcast="+s+")"):bn.log("Creating answer (iceDone="+i.iceDone+")");var a=null;a="firefox"==bn.webRTCAdapter.browserDetails.browser||"edge"==bn.webRTCAdapter.browserDetails.browser?{offerToReceiveAudio:q(e),offerToReceiveVideo:F(e)}:{mandatory:{OfferToReceiveAudio:q(e),OfferToReceiveVideo:F(e)}},bn.debug(a);var o=W(e);if(o&&s&&"firefox"===mn.browserDetails.browser){bn.log("Enabling Simulcasting for Firefox (RID)");var c=i.pc.getSenders()[1];bn.log(c);var u=c.getParameters();bn.log(u),c.setParameters({encodings:[{rid:"high",active:!0,priority:"high",maxBitrate:1e6},{rid:"medium",active:!0,priority:"medium",maxBitrate:3e5},{rid:"low",active:!0,priority:"low",maxBitrate:1e5}]})}i.pc.createAnswer((function(n){if(bn.debug(n),null!==i.mySdp&&void 0!==i.mySdp||(bn.log("Setting local description"),o&&s&&("chrome"===mn.browserDetails.browser?bn.warn("simulcast=true, but this is an answer, and video breaks in Chrome if we enable it"):"firefox"!==mn.browserDetails.browser&&bn.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")),i.mySdp=n.sdp,i.pc.setLocalDescription(n)),i.iceDone||i.trickle)if(i.sdpSent)bn.log("Answer already sent, not sending it again");else{i.sdpSent=!0;var e={type:n.type,sdp:n.sdp};t.success(e)}else bn.log("Waiting for all candidates...")}),t.error,a)}function M(n){var e=y[n];if(null==e||null===e.webrtcStuff||void 0===e.webrtcStuff)return bn.warn("Invalid handle"),0;var t=e.webrtcStuff;return t.pc.getStats&&"chrome"==bn.webRTCAdapter.browserDetails.browser?null===t.remoteStream||void 0===t.remoteStream?(bn.warn("Remote stream unavailable"),0):null===t.volume.timer||void 0===t.volume.timer?(bn.log("Starting volume monitor"),t.volume.timer=setInterval((function(){t.pc.getStats((function(n){for(var e=n.result(),r=0;r<e.length;r++){var i=e[r];"ssrc"==i.type&&i.stat("audioOutputLevel")&&(t.volume.value=i.stat("audioOutputLevel"))}}))}),200),0):t.volume.value:(bn.log("Getting the remote volume unsupported by browser"),0)}function U(n,e){var t=y[n];if(null==t||null===t.webrtcStuff||void 0===t.webrtcStuff)return bn.warn("Invalid handle"),!0;var r=t.webrtcStuff;return null===r.pc||void 0===r.pc?(bn.warn("Invalid PeerConnection"),!0):void 0===r.myStream||null===r.myStream?(bn.warn("Invalid local MediaStream"),!0):e?null===r.myStream.getVideoTracks()||void 0===r.myStream.getVideoTracks()||0===r.myStream.getVideoTracks().length?(bn.warn("No video track"),!0):!r.myStream.getVideoTracks()[0].enabled:null===r.myStream.getAudioTracks()||void 0===r.myStream.getAudioTracks()||0===r.myStream.getAudioTracks().length?(bn.warn("No audio track"),!0):!r.myStream.getAudioTracks()[0].enabled}function L(n,e,t){var r=y[n];if(null==r||null===r.webrtcStuff||void 0===r.webrtcStuff)return bn.warn("Invalid handle"),!1;var i=r.webrtcStuff;return null===i.pc||void 0===i.pc?(bn.warn("Invalid PeerConnection"),!1):void 0===i.myStream||null===i.myStream?(bn.warn("Invalid local MediaStream"),!1):e?null===i.myStream.getVideoTracks()||void 0===i.myStream.getVideoTracks()||0===i.myStream.getVideoTracks().length?(bn.warn("No video track"),!1):(i.myStream.getVideoTracks()[0].enabled=!t,!0):null===i.myStream.getAudioTracks()||void 0===i.myStream.getAudioTracks()||0===i.myStream.getAudioTracks().length?(bn.warn("No audio track"),!1):(i.myStream.getAudioTracks()[0].enabled=!t,!0)}function K(n){var e=y[n];if(null==e||null===e.webrtcStuff||void 0===e.webrtcStuff)return bn.warn("Invalid handle"),"Invalid handle";var t=e.webrtcStuff;return null===t.pc||void 0===t.pc?"Invalid PeerConnection":t.pc.getStats?null===t.bitrate.timer||void 0===t.bitrate.timer?(bn.log("Starting bitrate timer (via getStats)"),t.bitrate.timer=setInterval((function(){t.pc.getStats().then((function(n){n.forEach((function(n){if(n){var e=!1;if(("video"===n.mediaType||n.id.toLowerCase().indexOf("video")>-1)&&"inbound-rtp"===n.type&&n.id.indexOf("rtcp")<0?e=!0:"ssrc"!=n.type||!n.bytesReceived||"VP8"!==n.googCodecName&&""!==n.googCodecName||(e=!0),e)if(t.bitrate.bsnow=n.bytesReceived,t.bitrate.tsnow=n.timestamp,null===t.bitrate.bsbefore||null===t.bitrate.tsbefore)t.bitrate.bsbefore=t.bitrate.bsnow,t.bitrate.tsbefore=t.bitrate.tsnow;else{var r=t.bitrate.tsnow-t.bitrate.tsbefore;"safari"==mn.browserDetails.browser&&(r/=1e3);var i=Math.round(8*(t.bitrate.bsnow-t.bitrate.bsbefore)/r);t.bitrate.value=i+" kbits/sec",t.bitrate.bsbefore=t.bitrate.bsnow,t.bitrate.tsbefore=t.bitrate.tsnow}}}))}))}),1e3),"0 kbits/sec"):t.bitrate.value:(bn.warn("Getting the video bitrate unsupported by browser"),"Feature unsupported by browser")}function J(n){bn.error("WebRTC error:",n)}function V(n,r){bn.log("Cleaning WebRTC stuff");var i=y[n];if(null!=i){var s=i.webrtcStuff;if(null!=s){if(!0===r){var a={janus:"hangup",transaction:bn.randomString(12)};null!=h&&(a.token=h),null!=g&&(a.apisecret=g),bn.debug("Sending hangup request (handle="+n+"):"),bn.debug(a),e?(a.session_id=b,a.handle_id=n,t.send(JSON.stringify(a))):bn.httpAPICall(o+"/"+b+"/"+n,{verb:"POST",withCredentials:d,data:a})}s.remoteStream=null,s.volume.timer&&clearInterval(s.volume.timer),s.volume.value=null,s.bitrate.timer&&clearInterval(s.bitrate.timer),s.bitrate.timer=null,s.bitrate.bsnow=null,s.bitrate.bsbefore=null,s.bitrate.tsnow=null,s.bitrate.tsbefore=null,s.bitrate.value=null;try{if(!s.streamExternal&&null!==s.myStream&&void 0!==s.myStream){bn.log("Stopping local stream tracks");var c=s.myStream.getTracks();for(var u in c){var l=c[u];bn.log(l),null!=l&&l.stop()}}}catch(n){}s.streamExternal=!1,s.myStream=null;try{s.pc.close()}catch(n){}s.pc=null,s.mySdp=null,s.iceDone=!1,s.sdpSent=!1,s.dataChannel=null,s.dtmfSender=null}i.oncleanup()}}function H(n){return bn.debug("isAudioSendEnabled:",n),null==n||!1!==n.audio&&(void 0===n.audioSend||null===n.audioSend||!0===n.audioSend)}function q(n){return bn.debug("isAudioRecvEnabled:",n),null==n||!1!==n.audio&&(void 0===n.audioRecv||null===n.audioRecv||!0===n.audioRecv)}function W(n){return bn.debug("isVideoSendEnabled:",n),null==n||!1!==n.video&&(void 0===n.videoSend||null===n.videoSend||!0===n.videoSend)}function F(n){return bn.debug("isVideoRecvEnabled:",n),null==n||!1!==n.video&&(void 0===n.videoRecv||null===n.videoRecv||!0===n.videoRecv)}w({success:function(){!function c(u){var l=bn.randomString(12),p={janus:"create",transaction:l};null!=h&&(p.token=h);null!=g&&(p.apisecret=g);null===o&&bn.isArray(s)&&(0===(o=s[a]).indexOf("ws")?(e=!0,bn.log("Server #"+(a+1)+": trying WebSockets to contact Janus ("+o+")")):(e=!1,bn.log("Server #"+(a+1)+": trying REST API to contact Janus ("+o+")")));if(e){for(var f in t=bn.newWebSocket(o,"janus-protocol"),r={error:function(){if(bn.error("Error connecting to the Janus WebSockets server... "+o),bn.isArray(s))return++a==s.length?void u.error("Error connecting to any of the provided Janus servers: Is the gateway down?"):(o=null,void setTimeout((function(){c(u)}),200));u.error("Error connecting to the Janus WebSockets server: Is the gateway down?")},open:function(){S[l]=function(n){if(bn.debug(n),"success"!==n.janus)return bn.error("Ooops: "+n.error.code+" "+n.error.reason),void u.error(n.error.reason);i=setTimeout(R,3e4),m=!0,b=n.data.id,bn.log("Created session: "+b),bn.sessions[b]=_,u.success()},t.send(JSON.stringify(p))},message:function(n){T(JSON.parse(n.data))},close:function(){null!==o&&m&&n.error("Lost connection to the gateway (is it down?)")}})t.addEventListener(f,r[f]);return}bn.httpAPICall(o,{verb:"POST",withCredentials:d,body:p,success:function(n){if(bn.debug(n),"success"!==n.janus)return bn.error("Ooops: "+n.error.code+" "+n.error.reason),void u.error(n.error.reason);m=!0,b=n.data.id,bn.log("Created session: "+b),bn.sessions[b]=_,window.localStorage.setItem("rtcSessionId",b),E(),u.success()},error:function(n,e){if(bn.error(n+": "+e),bn.isArray(s))return++a==s.length?void u.error("Error connecting to any of the provided Janus servers: Is the gateway down?"):(o=null,void setTimeout((function(){c(u)}),200));""===e?u.error(n+": Is the gateway down?"):u.error(n+": "+e)}})}(n)}}),this.getServer=function(){return o},this.isConnected=function(){return m},this.getSessionId=function(){return b},this.destroy=function(n){w(n)},this.attach=function(n){!function(n){if((n=n||{}).success="function"==typeof n.success?n.success:bn.noop,n.error="function"==typeof n.error?n.error:bn.noop,n.consentDialog="function"==typeof n.consentDialog?n.consentDialog:bn.noop,n.iceState="function"==typeof n.iceState?n.iceState:bn.noop,n.mediaState="function"==typeof n.mediaState?n.mediaState:bn.noop,n.webrtcState="function"==typeof n.webrtcState?n.webrtcState:bn.noop,n.slowLink="function"==typeof n.slowLink?n.slowLink:bn.noop,n.onmessage="function"==typeof n.onmessage?n.onmessage:bn.noop,n.onlocalstream="function"==typeof n.onlocalstream?n.onlocalstream:bn.noop,n.onremotestream="function"==typeof n.onremotestream?n.onremotestream:bn.noop,n.ondata="function"==typeof n.ondata?n.ondata:bn.noop,n.ondataopen="function"==typeof n.ondataopen?n.ondataopen:bn.noop,n.oncleanup="function"==typeof n.oncleanup?n.oncleanup:bn.noop,n.ondetached="function"==typeof n.ondetached?n.ondetached:bn.noop,!m)return bn.warn("Is the gateway down? (connected=false)"),void n.error("Is the gateway down? (connected=false)");var r=n.plugin;if(null==r)return bn.error("Invalid plugin"),void n.error("Invalid plugin");var i=n.opaqueId,s=bn.randomString(12),a={janus:"attach",plugin:r,opaque_id:i,transaction:s};null!=h&&(a.token=h);null!=g&&(a.apisecret=g);"chrome"!=mn.browserDetails.browser&&"firefox"!=mn.browserDetails.browser&&"safari"!=mn.browserDetails.browser||(a["force-bundle"]=!0,a["force-rtcp-mux"]=!0);if(e)return S[s]=function(e){if(bn.debug(e),"success"!==e.janus)return bn.error("Ooops: "+e.error.code+" "+e.error.reason),void n.error("Ooops: "+e.error.code+" "+e.error.reason);var t=e.data.id;bn.log("Created handle: "+t);var i={session:_,plugin:r,id:t,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,pc:null,dataChannel:null,dtmfSender:null,trickle:!0,iceDone:!1,sdpSent:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return t},getPlugin:function(){return r},getVolume:function(){return M(t)},isAudioMuted:function(){return U(t,!1)},muteAudio:function(){return L(t,!1,!0)},unmuteAudio:function(){return L(t,!1,!1)},isVideoMuted:function(){return U(t,!0)},muteVideo:function(){return L(t,!0,!0)},unmuteVideo:function(){return L(t,!0,!1)},getBitrate:function(){return K(t)},send:function(n){x(t,n)},sendLog:function(n){C(t,n)},data:function(n){A(t,n)},dtmf:function(n){D(t,n)},consentDialog:n.consentDialog,iceState:n.iceState,mediaState:n.mediaState,webrtcState:n.webrtcState,slowLink:n.slowLink,onmessage:n.onmessage,createOffer:function(n){k(t,n)},createAnswer:function(n){k(t,n)},handleRemoteJsep:function(n){B(t,n)},onlocalstream:n.onlocalstream,onremotestream:n.onremotestream,ondata:n.ondata,ondataopen:n.ondataopen,oncleanup:n.oncleanup,ondetached:n.ondetached,hangup:function(n){V(t,!0===n)},detach:function(n){O(t,n)}};y[t]=i,n.success(i)},a.session_id=b,void t.send(JSON.stringify(a));bn.httpAPICall(o+"/"+b,{verb:"POST",withCredentials:d,body:a,success:function(e){if(bn.debug(e),"success"!==e.janus)return bn.error("Ooops: "+e.error.code+" "+e.error.reason),void n.error("Ooops: "+e.error.code+" "+e.error.reason);var t=e.data.id;bn.log("Created handle: "+t);var i={session:_,plugin:r,id:t,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,pc:null,dataChannel:null,dtmfSender:null,trickle:!0,iceDone:!1,sdpSent:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return t},getPlugin:function(){return r},getVolume:function(){return M(t)},isAudioMuted:function(){return U(t,!1)},muteAudio:function(){return L(t,!1,!0)},unmuteAudio:function(){return L(t,!1,!1)},isVideoMuted:function(){return U(t,!0)},muteVideo:function(){return L(t,!0,!0)},unmuteVideo:function(){return L(t,!0,!1)},getBitrate:function(){return K(t)},send:function(n){x(t,n)},sendLog:function(n){C(t,n)},data:function(n){A(t,n)},dtmf:function(n){D(t,n)},consentDialog:n.consentDialog,iceState:n.iceState,mediaState:n.mediaState,webrtcState:n.webrtcState,slowLink:n.slowLink,onmessage:n.onmessage,createOffer:function(n){k(t,n)},createAnswer:function(n){k(t,n)},handleRemoteJsep:function(n){B(t,n)},onlocalstream:n.onlocalstream,onremotestream:n.onremotestream,ondata:n.ondata,ondataopen:n.ondataopen,oncleanup:n.oncleanup,ondetached:n.ondetached,hangup:function(n){V(t,!0===n)},detach:function(n){O(t,n)}};y[t]=i,n.success(i)},error:function(n,e){bn.error(n+": "+e)}})}(n)}}bn.sessions={},bn.extensionId="hapfgfdkleiggjjpfpenajgdnfckjpaj",bn.isExtensionEnabled=function(){if(window.navigator.userAgent.match("Chrome")){var n=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),e=33;return window.navigator.userAgent.match("Linux")&&(e=35),n>=26&&n<=e||bn.checkJanusExtension()}return!0},bn.useDefaultDependencies=function(n){var e=n&&n.fetch||fetch,t=n&&n.Promise||Promise,r=n&&n.WebSocket||WebSocket;return{newWebSocket:function(n,e){return new r(n,e)},isArray:function(n){return Array.isArray(n)},checkJanusExtension:function(){return null!==document.querySelector("#janus-extension-installed")},webRTCAdapter:n&&n.adapter||mn,httpAPICall:function(n,r){var i={method:r.verb,cache:"no-cache"};void 0!==r.withCredentials&&(i.credentials=!0===r.withCredentials?"include":r.withCredentials?r.withCredentials:"omit"),void 0!==r.body&&(i.body=JSON.stringify(r.body));var s=e(n,i).catch((function(n){return t.reject({message:"Probably a network error, is the gateway down?",error:n})}));if(void 0!==r.timeout){var a=new t((function(n,e){var t=setTimeout((function(){return clearTimeout(t),e({message:"Request timed out",timeout:r.timeout})}),r.timeout)}));s=t.race([s,a])}return s.then((function(n){return n.ok?typeof r.success==typeof bn.noop?n.json().then((function(n){r.success(n)})).catch((function(e){return t.reject({message:"Failed to parse response body",error:e,response:n})})):void 0:t.reject({message:"API call failed",response:n})})).catch((function(n){typeof r.error==typeof bn.noop&&r.error(n.message||"<< internal error >>",n)})),s}}},bn.useOldDependencies=function(n){var e=n&&n.jQuery||jQuery,t=n&&n.WebSocket||WebSocket;return{newWebSocket:function(n,e){return new t(n,e)},isArray:function(n){return e.isArray(n)},checkJanusExtension:function(){return e("#janus-extension-installed").length>0},webRTCAdapter:n&&n.adapter||mn,httpAPICall:function(n,t){var r=void 0!==t.body?{contentType:"application/json",data:JSON.stringify(t.body)}:{},i=void 0!==t.withCredentials?{xhrFields:{withCredentials:t.withCredentials}}:{};return e.ajax(e.extend(r,i,{url:n,type:t.verb,cache:!1,dataType:"json",async:t.async,timeout:t.timeout,success:function(n){typeof t.success==typeof bn.noop&&t.success(n)},error:function(n,e,r){typeof t.error==typeof bn.noop&&t.error(e,r)}}))}}},bn.noop=function(){},bn.init=function(n){if((n=n||{}).callback="function"==typeof n.callback?n.callback:bn.noop,!0===bn.initDone)n.callback();else{if("undefined"!=typeof console&&void 0!==console.log||(console={log:function(){}}),bn.trace=bn.noop,bn.debug=bn.noop,bn.vdebug=bn.noop,bn.log=bn.noop,bn.warn=bn.noop,bn.error=bn.noop,!0===n.debug||"all"===n.debug)bn.trace=console.trace.bind(console),bn.debug=console.debug.bind(console),bn.vdebug=console.debug.bind(console),bn.log=console.log.bind(console),bn.warn=console.warn.bind(console),bn.error=console.error.bind(console);else if(Array.isArray(n.debug))for(var e in n.debug){var t=n.debug[e];switch(t){case"trace":bn.trace=console.trace.bind(console);break;case"debug":bn.debug=console.debug.bind(console);break;case"vdebug":bn.vdebug=console.debug.bind(console);break;case"log":bn.log=console.log.bind(console);break;case"warn":bn.warn=console.warn.bind(console);break;case"error":bn.error=console.error.bind(console);break;default:console.error("Unknown debugging option '"+t+"' (supported: 'trace', 'debug', 'vdebug', 'log', warn', 'error')")}}bn.log("Initializing library");var r=n.dependencies||bn.useDefaultDependencies();bn.isArray=r.isArray,bn.webRTCAdapter=r.webRTCAdapter,bn.httpAPICall=r.httpAPICall,bn.checkJanusExtension=r.checkJanusExtension,bn.newWebSocket=r.newWebSocket,bn.listDevices=function(n,e){n="function"==typeof n?n:bn.noop,null==e&&(e={audio:!0,video:!0}),navigator.mediaDevices?navigator.mediaDevices.getUserMedia(e).then((function(e){navigator.mediaDevices.enumerateDevices().then((function(t){bn.debug(t),n(t);try{var r=e.getTracks();for(var i in r){var s=r[i];null!=s&&s.stop()}}catch(n){}}))})).catch((function(e){bn.error(e),n([])})):(bn.warn("navigator.mediaDevices unavailable"),n([]))},bn.attachMediaStream=function(n,e){"chrome"===bn.webRTCAdapter.browserDetails.browser?bn.webRTCAdapter.browserDetails.version>=43?n.srcObject=e:void 0!==n.src?n.src=URL.createObjectURL(e):bn.error("Error attaching stream to element"):n.srcObject=e},bn.reattachMediaStream=function(n,e){"chrome"===bn.webRTCAdapter.browserDetails.browser?bn.webRTCAdapter.browserDetails.version>=43?n.srcObject=e.srcObject:void 0!==n.src?n.src=e.src:bn.error("Error reattaching stream to element"):n.srcObject=e.srcObject};var i=window.onbeforeunload;window.onbeforeunload=function(){for(var n in bn.log("Closing window"),bn.sessions)null!==bn.sessions[n]&&void 0!==bn.sessions[n]&&bn.sessions[n].destroyOnUnload&&(bn.log("Destroying session "+n),bn.sessions[n].destroy({asyncRequest:!1}));i&&"function"==typeof i&&i()},bn.initDone=!0,n.callback()}},bn.isWebrtcSupported=function(){return void 0!==window.RTCPeerConnection&&null!==window.RTCPeerConnection&&void 0!==navigator.getUserMedia&&null!==navigator.getUserMedia},bn.randomString=function(n){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",r=0;r<n;r++){var i=Math.floor(Math.random()*e.length);t+=e.substring(i,i+1)}return t};var yn=function(){function n(n){var e=this;this.started=!1,this._janus=null,this.sipcall=null,this.current_jsep=null,this.registered=!1,this.reconnect_set_time_out=null,this.current_result=null,this.initWebSipPhone=function(n,t,r,i,s){var a=e;bn.init({callback:function(){a.started||(a.started=!0,bn.isWebrtcSupported()&&(a._janus=new bn({withCredentials:!0,server:"https://janus-ykf.7moor.com/janus",success:function(){a._janus.attach({plugin:"janus.plugin.sip",opaqueId:"7moorSip-"+bn.randomString(12),success:function(n){a.sipcall=n,bn.log("Plugin attached! ("+a.sipcall.getPlugin()+", id="+a.sipcall.getId()+")")},error:function(n){},consentDialog:function(n){bn.debug("Consent dialog should be "+(n?"on":"off")+" now")},onmessage:function(n,e){a.current_jsep=e,bn.debug(" ::: Got a message :::"),bn.debug(n);var t=n.error;if(null!=t&&null!=t)return a.registered&&a.sipcall.hangup(),void alert(t);var r=n.result;if(a.current_result=r,null!=r&&void 0!==r.event&&null!==r.event){var i=r.event;if("registration_failed"===i)return void bn.warn("Registration failed: "+r.code+" "+r.reason);if("registered"===i)bn.log("Successfully registered as "+r.username+"!"),a.registered||(a.registered=!0);else if("calling"===i)bn.log("Waiting for the peer to answer...");else if("incomingcall"===i){bn.log("Incoming call from "+r.username+"!"),"asterisk"===r.displayname.replace(/"/g,"")&&console.log("\u5728\u8fd9\u91cc\u81ea\u52a8\u5e94\u7b54")}else if("accepting"===i);else if("progress"===i)bn.log("There's early media from "+r.username+", wairing for the call!"),bn.log(e),null!=e&&a.sipcall.handleRemoteJsep({jsep:e,error:a.doHangup});else if("accepted"===i){(s=document.getElementById("webrtc_calleering"))&&s.pause(),bn.log(r.username+" accepted the call!"),bn.log(e),null!=e&&a.sipcall.handleRemoteJsep({jsep:e,error:a.doHangup})}else if("hangup"===i){var s;(s=document.getElementById("webrtc_calleering"))&&s.pause(),bn.log("Call hung up ("+r.code+" "+r.reason+")!"),a.sipcall.hangup()}}},onlocalstream:function(n){bn.debug(" ::: Got a local stream :::"),bn.debug(n);var e=document.querySelectorAll("body")[0];if(0===document.querySelectorAll("#myvideo").length){var t=document.createElement("video");t.setAttribute("id","myvideo"),t.setAttribute("autoplay",!0),t.setAttribute("muted","muted"),t.className="rounded centered",e.appendChild(t)}if(bn.attachMediaStream(document.getElementById("myvideo"),n),document.getElementById("myvideo").muted="muted",0===document.querySelectorAll("#waitingvideo").length){var r=document.createElement("video");r.setAttribute("id","waitingvideo"),r.className="rounded centered",e.appendChild(r)}n.getVideoTracks()},onremotestream:function(n){bn.debug(" ::: Got a remote stream :::"),bn.debug(n);var e=document.querySelectorAll("body")[0];if(0===document.querySelectorAll("#remotevideo").length){var t=document.createElement("video");t.setAttribute("id","remotevideo"),t.setAttribute("autoplay",!0),e.appendChild(t)}bn.attachMediaStream(document.getElementById("remotevideo"),n)},oncleanup:function(){bn.log(" ::: Got a cleanup notification :::")}})},error:function(n){bn.error(n),("Lost connection to the gateway (is it down?)"===n||n&&-1!==n.indexOf("Probably a network error, is the gateway down?"))&&(a.started=!1,a.reconnect_set_time_out&&clearTimeout(a.reconnect_set_time_out),a.reconnect_set_time_out=setTimeout((function(){}),2e3))},destroyed:function(){}})))}})},this.doHangup=function(){e.sipcall.send({message:{request:"hangup"}}),e.sipcall.hangup()};document.location.protocol;this.getInitConfig(n)}return n.prototype.getInitConfig=function(n){var e=this;n.agentNumber,(new Date).getTime();return window.fetch("https://txwebphone.7moor.com/action",{method:"POST",body:"action=softphone.loginNoCode&data="+JSON.stringify({loginName:"1000@testwj",password:"3e6c7d141e32189c917761138b026b74",kickToken:"1000@testwj-168690523550"}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(n){return n.json()})).then((function(n){console.log(n,"uuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuu");var t=n.media_ip+":"+n.media_port;e.initWebSipPhone("sip:"+t,"sip:"+n.sip_id+"@"+t,n.sip_id,n.sip_pwd,n.sip_id)})).catch((function(n){console.log(n)}))},n}(),_n=function(){return(_n=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}).apply(this,arguments)},vn=function(n,e,t,r){return new(t||(t=Promise))((function(i,s){function a(n){try{c(r.next(n))}catch(n){s(n)}}function o(n){try{c(r.throw(n))}catch(n){s(n)}}function c(n){var e;n.done?i(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(a,o)}c((r=r.apply(n,e||[])).next())}))},Sn=function(n,e){var t,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(n,a)}catch(n){s=[6,n],r=0}finally{t=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},En=function(){function n(e){var t=this;if(this.businessRequestObj={},this.userInfo={},this.accountInfo={},this.getStatusConfig={},this.channelMap={Channel:"",LinkedChannel:"",exten:""},this.eventAddInfo={ThreeWayCallParties:[],eventTipKey:""},this.attachEventCallbacks={success:h.noop,error:h.noop,message:h.noop},this.currentType="unregister",this.busyType="0",this.attachRegistrationStatus=!1,this.attachCurrentEvent=null,this.attachEvent=function(n){t.attachEventCallbacks=n,t.attachRegistrationStatus||(t.attachRegistrationStatus=!0,t.attachCurrentEvent&&(t.attachMessage(t.attachCurrentEvent),t.attachCurrentEvent=null))},this._callApi=function(){var e=t;return{dialout:function(t){return vn(this,void 0,void 0,(function(){var r,i;return Sn(this,(function(s){return t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,r=t.calleeNumber,"dialout"!==(i=t.CallType?t.CallType:"dialout")&&"inner"!==i&&(i="dialout"),null===t.calleeNumber||void 0===t.calleeNumber?(t.fail({success:!1,message:"calleeNumber is is required!"}),[2]):("dialout"===i&&(r="9"+r),f({url:e.getStatusConfig.url,jsonData:{Command:"Action",Action:"Originate",ActionID:"Originate"+Math.random(),Channel:"SIP/"+e.statusVm.LoginInfo.SipNum,Context:e.statusVm.LoginInfo.Account,Exten:r,Priority:"1",UserID:e.statusVm.LoginInfo.UserID,Timeout:6e4,Async:"true",CallType:i,PBX:e.statusVm.LoginInfo.PBX,Account:e.statusVm.LoginInfo.Account,SessionID:e.statusVm.LoginInfo.SessionID}}).then((function(n){n&&n.Succeed?t.success():t.fail({message:n.Message})})),[2])}))}))},hangup:function(t){return vn(this,void 0,void 0,(function(){var r;return Sn(this,(function(i){return t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,r=e.channelMap.Channel,t.Channel&&(r=t.Channel),f({url:e.getStatusConfig.url,jsonData:{Command:"Action",Action:"Hangup",ActionID:"Hangup"+Math.random(),Channel:r,PBX:e.statusVm.LoginInfo.PBX,Account:e.statusVm.LoginInfo.Account,SessionID:e.statusVm.LoginInfo.SessionID}}).then((function(n){n&&n.Succeed&&t.success()})),[2]}))}))},hold:function(t){return vn(this,void 0,void 0,(function(){return Sn(this,(function(r){return t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,f({url:e.getStatusConfig.url,jsonData:{Command:"Action",Action:"Hold",ActionID:"Hold"+Math.random(),Channel:e.channelMap.Channel,UserID:e.statusVm.LoginInfo.UserID,PBX:e.statusVm.LoginInfo.PBX,Account:e.statusVm.LoginInfo.Account,SessionID:e.statusVm.LoginInfo.SessionID}}).then((function(n){n&&n.Succeed&&(e.callApi.saveLastType(),e.currentType="hold",e.attachMessage({type:e.currentType}),t.success())})),[2]}))}))},unhold:function(t){return vn(this,void 0,void 0,(function(){return Sn(this,(function(r){return t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,f({url:e.getStatusConfig.url,jsonData:{Command:"Action",Action:"Unhold",ActionID:"Unhold"+Math.random(),Channel:e.channelMap.Channel,UserID:e.statusVm.LoginInfo.UserID,PBX:e.statusVm.LoginInfo.PBX,Account:e.statusVm.LoginInfo.Account,SessionID:e.statusVm.LoginInfo.SessionID}}).then((function(n){n&&n.Succeed&&(e.callApi.restoreType(),t.success())})),[2]}))}))},transfer:function(t){return vn(this,void 0,void 0,(function(){return Sn(this,(function(r){return t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,null===t.TransferNumber||void 0===t.TransferNumber?(t.fail({success:!1,message:"TransferNumber is is required!"}),[2]):(null!==t.type&&void 0!==t.type||(t.type="out"),"out"!==t.type&&"in"!==t.type&&(t.type="out"),"out"===t.type&&(t.TransferNumber="9"+t.TransferNumber),e.callApi.saveLastType(),e.currentType="transferWaiting",e.attachMessage({type:e.currentType}),f({url:e.getStatusConfig.url,jsonData:{Command:"Action",Action:"Transfer",ActionID:"Transfer"+Math.random(),Channel:e.channelMap.LinkedChannel,ExtraChannel:e.channelMap.Channel,UserID:e.statusVm.LoginInfo.UserID,Context:e.statusVm.LoginInfo.Account,PBX:e.statusVm.LoginInfo.PBX,Account:e.statusVm.LoginInfo.Account,SessionID:e.statusVm.LoginInfo.SessionID,TransferReason:t.TransferReason||"",Exten:t.TransferNumber}}).then((function(n){n&&n.Succeed?t.success():t.fail({success:!1,message:n.Message})})),[2])}))}))},canceltransfer:function(t){return vn(this,void 0,void 0,(function(){var r;return Sn(this,(function(i){return t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,r={Command:"Action",Action:"CancelTransfer",ActionID:"CancelTransfer"+Math.random(),Channel:e.channelMap.LinkedChannel,PBX:e.statusVm.LoginInfo.PBX,Account:e.statusVm.LoginInfo.Account,SessionID:e.statusVm.LoginInfo.SessionID},f({url:e.getStatusConfig.url,jsonData:r}).then((function(n){n&&n.Succeed?(e.callApi.restoreType(),t.success()):t.fail({success:!1,message:n.Message})})),[2]}))}))},consult:function(t){return vn(this,void 0,void 0,(function(){return Sn(this,(function(r){return t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,null===t.ConsultNumber||void 0===t.ConsultNumber?(t.fail({success:!1,message:"ConsultNumber is is required!"}),[2]):(null!==t.type&&void 0!==t.type||(t.type="out"),"out"!==t.type&&"in"!==t.type&&(t.type="out"),"out"===t.type&&(t.ConsultNumber="9"+t.ConsultNumber),e.channelMap.exten=t.ConsultNumber,f({url:e.getStatusConfig.url,jsonData:{Command:"Action",Action:"Consult",Version:"New",ActionID:"Consult"+Math.random(),FromExten:e.statusVm.LoginInfo.SipNum,Timeout:6e4,UserID:e.statusVm.LoginInfo.UserID,PBX:e.statusVm.LoginInfo.PBX,Account:e.statusVm.LoginInfo.Account,SessionID:e.statusVm.LoginInfo.SessionID,Exten:t.ConsultNumber}}).then((function(n){n&&n.Succeed?(e.callApi.saveLastType(),e.currentType="consultWaiting",e.attachMessage({type:e.currentType}),t.success()):t.fail({success:!1,message:n.Message})})),[2])}))}))},endconsult:function(t){return vn(this,void 0,void 0,(function(){return Sn(this,(function(r){return t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,f({url:e.getStatusConfig.url,jsonData:{Command:"Action",Action:"StopConsult",ActionID:"StopConsult"+Math.random(),FromExten:e.statusVm.LoginInfo.SipNum,Timeout:6e4,UserID:e.statusVm.LoginInfo.UserID,PBX:e.statusVm.LoginInfo.PBX,Account:e.statusVm.LoginInfo.Account,SessionID:e.statusVm.LoginInfo.SessionID}}).then((function(n){n&&n.Succeed?(void 0!==n.Message&&"Idle"===n.Message?e.currentType="peerstate":e.callApi.restoreType(),e.attachMessage({type:e.currentType}),t.success()):t.fail({success:!1,message:n.Message})})),[2]}))}))},cancelconsult:function(t){return vn(this,void 0,void 0,(function(){return Sn(this,(function(r){return t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,f({url:e.getStatusConfig.url,jsonData:{Command:"Action",ConsultExten:e.channelMap.exten,Action:"CancelConsult",FromExten:e.userInfo.exten,Timeout:6e4,ActionID:"CancelConsult"+Math.random(),Channel:e.channelMap.LinkedChannel,UserID:e.statusVm.LoginInfo.UserID,PBX:e.statusVm.LoginInfo.PBX,Account:e.statusVm.LoginInfo.Account,SessionID:e.statusVm.LoginInfo.SessionID}}).then((function(n){n&&n.Succeed?(e.callApi.restoreType(),t.success()):t.fail({success:!1,message:n.Message})})),[2]}))}))},transferconsult:function(t){return vn(this,void 0,void 0,(function(){return Sn(this,(function(r){return t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,f({url:e.getStatusConfig.url,jsonData:{Command:"Action",Action:"Transfer",ActionID:"Transfer"+Math.random(),Channel:e.channelMap.LinkedChannel,ExtraChannel:e.channelMap.Channel,UserID:e.statusVm.LoginInfo.UserID,Context:e.statusVm.LoginInfo.Account,PBX:e.statusVm.LoginInfo.PBX,Account:e.statusVm.LoginInfo.Account,SessionID:e.statusVm.LoginInfo.SessionID,TransferReason:t.TransferReason||"",Exten:"912345"}}).then((function(n){n&&n.Succeed?t.success():t.fail({success:!1,message:n.Message})})),[2]}))}))},threewaycall:function(t){return vn(this,void 0,void 0,(function(){return Sn(this,(function(r){return t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,f({url:e.getStatusConfig.url,jsonData:{Command:"Action",Action:"ThreeWayCall",ActionID:"ThreeWayCall"+Math.random(),FromExten:e.statusVm.LoginInfo.SipNum,Exten:e.channelMap.exten,Timeout:6e4,UserID:e.statusVm.LoginInfo.UserID,PBX:e.statusVm.LoginInfo.PBX,Account:e.statusVm.LoginInfo.Account,SessionID:e.statusVm.LoginInfo.SessionID}}).then((function(n){if(n&&n.Succeed){e.currentType="threeWayTalking";var r={type:e.currentType};n.ThreeWayCallParties&&n.ThreeWayCallParties.length>0?(r.ThreeWayCallParties=n.ThreeWayCallParties,e.eventAddInfo.ThreeWayCallParties=n.ThreeWayCallParties):e.eventAddInfo.ThreeWayCallParties=[],e.attachMessage(r),t.success()}else t.fail({success:!1,message:n.Message})})),[2]}))}))},getthreewaycalluser:function(t){return vn(this,void 0,void 0,(function(){return Sn(this,(function(r){return t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,t.success({data:e.eventAddInfo.ThreeWayCallParties}),[2]}))}))},transferSatisfaction:function(t){return vn(this,void 0,void 0,(function(){var r;return Sn(this,(function(i){return t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,null!==t.Exten&&void 0!==t.Exten||(t.Exten=""),r=e.statusVm.LoginInfo.Account+"-investigate",t.Exten&&""!==t.Exten&&(r=e.statusVm.LoginInfo.Account+"-"+t.Exten+"-satisfaction"),f({url:e.getStatusConfig.url,jsonData:{Command:"Action",Action:"Transfer",ActionID:"Transfer"+Math.random(),Exten:"s",Channel:e.channelMap.LinkedChannel,Timeout:6e4,CallType:"investigate",UserID:e.statusVm.LoginInfo.UserID,PBX:e.statusVm.LoginInfo.PBX,Account:e.statusVm.LoginInfo.Account,SessionID:e.statusVm.LoginInfo.SessionID,Context:r}}).then((function(n){n&&n.Succeed?t.success():t.fail({success:!1,message:n.Message})})),[2]}))}))},getInvestigateList:function(t){return vn(this,void 0,void 0,(function(){return Sn(this,(function(r){return t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,n.request(e.initConfig.serviceAddress+"/sdk/v1/action",{verb:"POST",body:_n(_n({action:"common.getDicCache"},e.businessRequestObj),{data:{type:"investigateList"}}),headers:{"Content-Type":"application/json"},success:function(n){if(n.success){var e=[];if(n.data&&n.data.length>0)for(var r in n.data)n.data[r].SatisfactionGarde&&"child"===n.data[r].SatisfactionGarde||e.push({DisplayName:n.data[r].DisplayName,Exten:n.data[r].Exten});t.success({data:e})}else t.fail({success:!1,message:n.message})}}),[2]}))}))},getIvrMenuList:function(t){return vn(this,void 0,void 0,(function(){return Sn(this,(function(r){return t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,n.request(e.initConfig.serviceAddress+"/sdk/v1/action",{verb:"POST",body:_n(_n({action:"common.getDicCache"},e.businessRequestObj),{data:{type:"ivrMenu"}}),headers:{"Content-Type":"application/json"},success:function(n){if(n.success){var e=[];if(n.data&&n.data.length>0)for(var r in n.data)n.data[r].SatisfactionGarde&&"child"===n.data[r].SatisfactionGarde||e.push({DisplayName:n.data[r].DisplayName,Exten:n.data[r].Exten});t.success({data:e||[]})}else t.fail({success:!1,message:n.message})}}),[2]}))}))},toIvrMenu:function(t){return vn(this,void 0,void 0,(function(){return Sn(this,(function(r){return t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,null===t.Exten||void 0===t.Exten?(t.fail({success:!1,message:"Exten is is required!"}),[2]):(f({url:e.getStatusConfig.url,jsonData:{Command:"Action",Action:"IvrMenu",ActionID:"IvrMenu"+Math.random(),Channel:e.channelMap.LinkedChannel,Context:t.Exten,PBX:e.statusVm.LoginInfo.PBX,Account:e.statusVm.LoginInfo.Account}}).then((function(n){n&&n.Succeed?(e.callApi.saveLastType(),e.currentType="ivrWaiting",e.attachMessage({type:e.currentType}),t.success()):t.fail({success:!1,message:n.Message})})),[2])}))}))},saveLastType:function(){e.lastType=e.currentType},restoreType:function(){e.currentType=e.lastType,e.lastType="",e.attachMessage({type:e.currentType})}}},this._agentApi=function(){var e=t;return{getAgentPhoneBarList:function(t){return vn(this,void 0,void 0,(function(){var r,i,s;return Sn(this,(function(a){return t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,r=null,e.statusVm&&e.statusVm.LoginInfo&&e.statusVm.LoginInfo.PhonebarConfig&&(r=e.statusVm.LoginInfo.PhonebarConfig),r?(i=r.split(","),s=[],i.forEach((function(n){var e=n.split(":");"99"!==e[0]&&s.push({label:e[1],value:e[0]})})),t.success({data:s,success:!0})):t.fail({success:!1,message:"get phonebar list error"}),[2]}))}))},updateAgentStatus:function(t){return vn(this,void 0,void 0,(function(){var r,i;return Sn(this,(function(s){return t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,(r=t.statusValue+"")?(i=!0,"0"===r&&(i=!1),f({url:e.getStatusConfig.url,jsonData:{Command:"Action",Action:"Busy",ActionID:"Busy"+Math.random(),Exten:e.statusVm.LoginInfo.UserID,Busy:i,BusyType:r,PBX:e.statusVm.LoginInfo.PBX,Account:e.statusVm.LoginInfo.Account,SessionID:e.statusVm.LoginInfo.SessionID}}).then((function(n){n&&n.Succeed&&t.success()})),[2]):(t.fail({success:!1,message:"statusValue is required"}),[2])}))}))},getUserStatus:function(){return vn(this,void 0,void 0,(function(){return Sn(this,(function(n){return[2,new Promise((function(n){var t={Action:"GetAccUserStatus",ActionID:"Busy"+Math.random(),PBX:e.statusVm.LoginInfo.PBX,Account:e.statusVm.LoginInfo.Account,WithReserve:!0};f({url:e.getStatusConfig.url,jsonData:t}).then((function(e){e&&e.Succeed?n({success:!0,data:e.UserStatus||[]}):n({success:!1})}))}))]}))}))},getOnlineAgents:function(t){return vn(this,void 0,void 0,(function(){var r;return Sn(this,(function(i){switch(i.label){case 0:return t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,[4,e.agentApi.getUserStatus()];case 1:return(r=i.sent()).success?(n.request(e.initConfig.serviceAddress+"/sdk/v1/action",{verb:"POST",body:_n(_n({action:"common.getDicCache"},e.businessRequestObj),{data:{type:"agents"}}),headers:{"Content-Type":"application/json"},success:function(n){if(n.success){r.agent;var i=n.data||[],s=r.data,a=e.userInfo._id,o=[];s.length>0&&s.forEach((function(n){var e=n.id;i.some((function(t){if(t._id===e&&t._id!==a){if("true"!==n.isBusy){var r={exten:t.exten,DisplayName:t.displayName+"["+t.exten+"]"};o.push(r)}return!0}}))})),t.success({data:o})}else t.fail({success:!1,message:n.message})}}),[2]):(t.fail(),[2])}}))}))},getAgentInfo:function(t){return vn(this,void 0,void 0,(function(){return Sn(this,(function(r){return t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,e.userInfo?t.success({success:!0,data:e.userInfo}):t.fail({success:!1,message:"init fail!"}),[2]}))}))},getGatewaySips:function(t){return vn(this,void 0,void 0,(function(){return Sn(this,(function(r){return t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,n.request(e.initConfig.serviceAddress+"/sdk/v1/action",{verb:"POST",body:_n(_n({action:"app.sip.getUnboundGatewaySips"},e.businessRequestObj),{data:{}}),headers:{"Content-Type":"application/json"},success:function(n){if(n.success){var e=n.data||[];t.success({data:e})}else t.fail({success:!1,message:n.message})}}),[2]}))}))},bindGatewaySip:function(t){return vn(this,void 0,void 0,(function(){return Sn(this,(function(r){return t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,null===t.sipNumber||void 0===t.sipNumber?(t.fail({success:!1,message:"sipNumber is is required!"}),[2]):(n.request(e.initConfig.serviceAddress+"/sdk/v1/action",{verb:"POST",body:_n(_n({action:"app.sip.bindGatewaySip"},e.businessRequestObj),{data:{sip:t.sipNumber}}),headers:{"Content-Type":"application/json"},success:function(n){n.success?(e.userInfo.gatewayExten=t.sipNumber,t.success({})):t.fail({success:!1,message:n.message})}}),[2])}))}))},updateAgentMobile:function(t){return vn(this,void 0,void 0,(function(){return Sn(this,(function(r){return t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,null===t.mobile||void 0===t.mobile?(t.fail({success:!1,message:"sipNumber is is required!"}),[2]):(n.request(e.initConfig.serviceAddress+"/sdk/v1/action",{verb:"POST",body:_n(_n({action:"app.user.bindPhone"},e.businessRequestObj),{data:{mobile:t.mobile}}),headers:{"Content-Type":"application/json"},success:function(n){n.success?(e.userInfo.mobile=t.mobile,t.success({})):t.fail({success:!1,message:n.message})}}),[2])}))}))},changeLoginType:function(t){return vn(this,void 0,void 0,(function(){var r;return Sn(this,(function(i){if(t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,null===t.loginType||void 0===t.loginType)return t.fail({success:!1,message:"loginType is required!"}),[2];if(r="","Local"===t.loginType)r=e.userInfo.mobileExten;else if("gateway"===t.loginType)r=e.userInfo.gatewayExten;else{if("sip"!==t.loginType)return t.fail({success:!1,message:"loginType is error!"}),[2];r=e.userInfo.sipExten}return f({url:e.getStatusConfig.url,jsonData:{Command:"Action",Action:"SetExtenType",ActionID:"SetExtenType"+Math.random(),PBX:e.statusVm.LoginInfo.PBX,Account:e.statusVm.LoginInfo.Account,User:e.statusVm.LoginInfo.UserID,ExtenType:t.loginType,LoginExten:r}}).then((function(n){e.userInfo.loginType=t.loginType,n&&n.Succeed&&t.success()})),[2]}))}))},Logout:function(t){return vn(this,void 0,void 0,(function(){return Sn(this,(function(r){return t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,null!==t.offlineAnswering&&void 0!==t.offlineAnswering||(t.offlineAnswering=!0),f({url:e.getStatusConfig.url,jsonData:{ipMessage:e.getStatusConfig.ipMessage,Command:"Action",Action:"Logoff",ActionID:"Logoff"+Math.random(),QueueRemove:t.offlineAnswering,User:e.statusVm.LoginInfo.UserID,PBX:e.statusVm.LoginInfo.PBX,Account:e.statusVm.LoginInfo.Account,SessionID:e.statusVm.LoginInfo.SessionID}}).then((function(n){n&&n.Succeed&&t.success()})),[2]}))}))},getExplicitRules:function(t){return vn(this,void 0,void 0,(function(){var r,i,s,a;return Sn(this,(function(o){return t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,r=e.userInfo.dialoutPolicy,i=[],r&&Object.keys(r).forEach((function(n){"agentNumberFlag"===n&&r[n]&&i.push({label:"\u4e13\u5c5e\u53f7\u7801",value:"agentNumber"}),"intelligentDisplayFlag"===n&&r[n]&&i.push({label:"\u667a\u80fd\u5916\u663e",value:"intelligentDisplay"}),"accountNumberFlag"===n&&r[n]&&i.push({label:"\u4f01\u4e1a\u53f7\u7801",value:"accountNumber"}),"advancedPolicy"===n&&r[n]&&i.push({label:"\u9ad8\u7ea7\u7b56\u7565",value:"advancedPolicy"})})),s=e.userInfo.small,a=!0,"1"===s?(i=[{label:"\u5c0f\u53f7\u6a21\u5f0f",value:"small"}],a=!1):"3"===s&&i.push({label:"\u5c0f\u53f7\u6a21\u5f0f",value:"small"}),i.length>0&&a&&i.push({label:"\u5e38\u89c4\u7ebf\u8def",value:"normal"}),t.success({data:i}),[2]}))}))},getExplicitDataByType:function(t){return vn(this,void 0,void 0,(function(){var r,i,s,a,o,c,u,l,p;return Sn(this,(function(d){return t.success=t&&"function"==typeof t.success?t.success:n.noop,t.fail=t&&"function"==typeof t.fail?t.fail:n.noop,null===t.type||void 0===t.type?(t.fail({success:!1,message:"type is is required!"}),[2]):("agentNumber"===t.type?(a=e.userInfo.dialoutPolicy,r=a.agentNumber||[],i=r.map((function(n){return n})),s=i.join(","),n.request(e.initConfig.serviceAddress+"/sdk/v1/action",{verb:"POST",body:_n(_n({action:"config.numberManage.queryByServiceNum"},e.businessRequestObj),{data:{numberStr:s}}),headers:{"Content-Type":"application/json"},success:function(n){if(n.success){var e=(n.list||[]).filter((function(n){var e=n.status,t=!1;t="inUse"===e||"outUse"!==e&&("trial"===e||"gift"===e);var r=n.lineStatus;return"normal"===r&&t})).map((function(n){return n.number})).map((function(n){return{label:n,value:n}}));t.success({data:e})}else t.fail({success:!1,message:n.message})}})):"intelligentDisplay"===t.type?(a=e.userInfo.dialoutPolicy,o=a.intelligentDisplay||[],c={Account:e.accountInfo.account},n.request(e.initConfig.serviceAddress+"/sdk/v1/action",{verb:"POST",body:_n(_n({action:"config.callerGroup.queryBizGroups"},e.businessRequestObj),{data:c}),headers:{"Content-Type":"application/json"},success:function(n){if(n.success){var e=[];(n.list||[]).filter((function(n){return n.Enable})).forEach((function(n){o.indexOf(n._id)>-1&&e.push({label:n.DisplayName,value:n._id})}))(t.success)({data:e})}else t.fail({success:!1,message:n.message})}})):"small"===t.type?(u=e.accountInfo.smallType,p=[],"B1"===u?p=[{label:"\u968f\u673a\u62bd\u53d6",value:u}]:"B2"===u?p=[{label:"\u5f52\u5c5e\u5730",value:u}]:"A"===u&&n.request(e.initConfig.serviceAddress+"/sdk/v1/action",{verb:"POST",body:_n(_n({action:"app.smallnum.fetchUserSmallNumList"},e.businessRequestObj),{data:{}}),headers:{"Content-Type":"application/json"},success:function(n){if(n.success){var e=[];n.data&&n.data.length>0&&(e=n.data.map((function(n){return{label:"\u5ea7\u5e2d\u7ed1\u5b9a\uff08"+n.num+"\uff09",value:n.num,city:n.province+"-"+n.city}}))),t.success({data:e})}else t.fail({success:!1,message:n.message})}}),console.log(p,"hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhi",u),"B1"!==u&&"B2"!==u||t.success({data:p})):"advancedPolicy"===t&&((l=e.userInfo).senior&&"match"===l.senior?(p=[{label:"\u5f52\u5c5e\u5730\u968f\u673a",value:""}],t.success({data:p})):n.request(e.initConfig.serviceAddress+"/sdk/v1/action",{verb:"POST",body:_n(_n({action:"app.user.fetchPooledCallerNumbers"},e.businessRequestObj),{data:{}}),headers:{"Content-Type":"application/json"},success:function(n){if(n.success){var e=n.data.chosen||"",r=n.data.pool||[],i=r.map((function(n){return e&&e===n&&!0,{label:n,value:n}}));t.success({data:i})}else t.fail({success:!1,message:n.message})}})),[2])}))}))}}},e.error="function"==typeof e.error?e.error:n.noop,e.success="function"==typeof e.success?e.success:n.noop,null!==e.agentNumber&&void 0!==e.agentNumber)if(this.getStatusConfig.agentNumber=e.agentNumber,null!==e.password&&void 0!==e.password)if(this.getStatusConfig.password=e.password,null!==e.lang&&void 0!==e.lang||(e.lang="zh_CN"),null!==e.proxy_url&&void 0!==e.proxy_url){if(this.getStatusConfig.url=e.proxy_url,!e.serviceAddress){if(null===e.accountId||void 0===e.password)return void e.error({message:"Invalid accountId"});var r=e.accountId.substring(0,1);if("N"===r)e.serviceAddress="https://kf.7moor.com";else{if("T"!==r)return void e.error({message:"accountId format error"});e.serviceAddress="https://ykf.7moor.com"}}null!==e.loginType&&void 0!==e.loginType||(e.loginType="Local"),null!==e.busyType&&void 0!==e.busyType||(e.busyType="0"),this.getStatusConfig.loginType=e.loginType,this.getStatusConfig.busyType=e.busyType;var i=n.useDefaultDependencies({});n.request=i.request,this.getpublickey(e)}else e.error({message:"Invalid proxy_url"});else e.error({message:"Invalid password"});else e.error({message:"Invalid agentNumber"})}return n.noop=function(){},n.prototype.getpublickey=function(e){return vn(this,void 0,void 0,(function(){var t=this;return Sn(this,(function(r){return n.request(e.serviceAddress+"/sdk/v1/public-key",{verb:"GET",body:{},success:function(n){if(n.success){t.getStatusConfig.ipMessage=n.ipMessage;var r=(s=n.secret,a=n.num,o=e.password,u=l()(o)+":"+a,(p=new c.a).setPublicKey(s),p.encrypt(u)),i={};n.token1?i.identifyCode=i.token1:i={},t.login(_n(_n({loginName:e.agentNumber,safeKey:r,extenType:e.loginType},i),{lang:e.lang}),e)}var s,a,o,u,p},error:function(n){console.log(n,"hhhhhhhhhhhhhhhhhhh")}}),[2]}))}))},n.prototype.login=function(e,t){return vn(this,void 0,void 0,(function(){var r=this;return Sn(this,(function(i){return n.request(t.serviceAddress+"/sdk/v1/login",{verb:"POST",body:e,headers:{"Content-Type":"application/json"},success:function(n){return vn(r,void 0,void 0,(function(){return Sn(this,(function(e){return this.businessRequestObj.sessionId=n.sessionId,this.businessRequestObj.lang=t.lang,this.userInfo=n.user,this.userInfo.loginType=t.loginType,this.accountInfo=n.account,this.initConfig=t,this.initStatus(t),[2]}))}))}}),[2]}))}))},n.prototype.initStatus=function(n){return vn(this,void 0,void 0,(function(){var e,t=this;return Sn(this,(function(r){return e=this,this.attachEventCallbacks.success=e.attachEventCallbacks.success&&"function"==typeof e.attachEventCallbacks.success?e.attachEventCallbacks.success:h.noop,this.attachEventCallbacks.error=e.attachEventCallbacks.error&&"function"==typeof e.attachEventCallbacks.error?e.attachEventCallbacks.error:h.noop,this.attachEventCallbacks.message=e.attachEventCallbacks.message&&"function"==typeof e.attachEventCallbacks.message?e.attachEventCallbacks.message:h.noop,this.getStatusConfig.success=n.success||h.noop,this.statusVm=new h(this.getStatusConfig),this.statusVm.attachEvent({message:function(n){var r=t.currentType,i=t.busyType||"0";if("UserStatus"===n.Event&&t.statusVm.LoginInfo.UserID===n.UserID&&"Unregistered"===n.PeerStatus&&(t.currentType="unregister","sip"===e.userInfo.loginType&&new yn(t.getStatusConfig)),"kick"===n.Event&&(t.currentType="kick"),"TransferSuccess"===n.Event&&t.statusVm.LoginInfo.UserID===n.UserID&&(t.eventAddInfo.eventTipKey="TransferSuccess"),"ivrWaiting"===e.currentType)if("IvrMenuEnd"===n.Event){if(n.VAL_OF_IVR_MENU)return"DTSF"===n.VAL_OF_IVR_MENU?(e.eventAddInfo.eventTipKey="ivrFaild",void e.callApi.restoreType()):(e.eventAddInfo.eventTipKey="ivrSuccess",void e.callApi.restoreType())}else"ChannelStatus"===n.Event?n.Exten===e.statusVm.LoginInfo.SipNum&&"Hangup"===n.ChannelStatus&&(t.currentType="peerstate"):"UserBusy"===n.Event&&e.statusVm.LoginInfo.UserID===n.UserID&&(e.busyType=n.BusyType,e.currentType="peerstate");if("ConsultSuccess"===n.Event||"ConsultFailed"===n.Event)if("ConsultSuccess"===n.Event)e.currentType="consultTalking",e.eventAddInfo.eventTipKey="ConsultSuccess";else if("ConsultFailed"===n.Event)return e.eventAddInfo.eventTipKey="ConsultFailed",void e.callApi.restoreType();if("transferWaiting"===e.currentType){if("TransferFailed"===n.Event)return e.eventAddInfo.eventTipKey="TransferFailed",void e.callApi.restoreType();"ChannelStatus"===n.Event?n.Exten===e.statusVm.LoginInfo.SipNum&&"Hangup"===n.ChannelStatus&&(t.currentType="peerstate"):"UserBusy"===n.Event&&e.statusVm.LoginInfo.UserID===n.UserID&&(e.busyType=n.BusyType,e.currentType="peerstate")}if("unregister"===t.currentType&&("PeerStatus"===n.Event?n.Exten!==e.statusVm.LoginInfo.SipNum&&e.statusVm.LoginInfo.UserID!==n.UserID||"Registered"===n.PeerStatus&&(e.currentType="peerstate"):"UserStatus"===n.Event&&n.UserID===e.statusVm.LoginInfo.UserID&&"Registered"===n.PeerStatus&&(e.currentType="peerstate")),"peerstate"===t.currentType&&("UserBusy"===n.Event?e.statusVm.LoginInfo.UserID===n.UserID&&(e.busyType=n.BusyType,e.currentType="peerstate"):"ChannelStatus"===n.Event?n.Exten===e.statusVm.LoginInfo.SipNum&&("Hangup"===n.ChannelStatus?e.currentType="peerstate":"Ringing"===n.ChannelStatus?(n.LinkedChannel&&n.LinkedChannel.Data&&n.LinkedChannel.Data.TransferReason,"normal"===n.LinkedChannel.ChannelType?t.currentType="belling":"inner"===n.LinkedChannel.ChannelType?t.currentType="innerBelling":"transfer"===n.LinkedChannel.ChannelType?t.currentType="transferBelling":"dialTransfer"===n.LinkedChannel.ChannelType?t.currentType="transferDialing":"dialout"===n.LinkedChannel.ChannelType&&(t.currentType="belling")):"Ring"===n.ChannelStatus?"dialout"===n.ChannelType?t.currentType="dialing":"inner"===n.ChannelType?t.currentType="innerDialing":"listen"===n.ChannelType&&(t.currentType="listening"):"Link"===n.ChannelStatus?"normal"===n.LinkedChannel.ChannelType?t.currentType="talking":"threeWayCall"===n.LinkedChannel.ChannelType?t.currentType="threeWayTalking":"inner"===n.LinkedChannel.ChannelType?t.currentType="innerTalking":"dialout"===n.LinkedChannel.ChannelType?t.currentType="dialTalking":"transfer"===n.LinkedChannel.ChannelType?t.currentType="transfer":"dialTransfer"===n.LinkedChannel.ChannelType&&(t.currentType="dialTransfer"):"Up"===n.ChannelStatus&&("listen"===n.ChannelType?t.currentType="listened":"dialout"===n.ChannelType&&(t.currentType="dialing"))):"PeerStatus"===n.Event&&n.Exten===t.statusVm.LoginInfo.SipNum&&"Registered"!==n.PeerStatus&&(t.currentType="unregister")),"dialing"===t.currentType&&"ChannelStatus"===n.Event&&n.Exten===e.statusVm.LoginInfo.SipNum&&("Hangup"===n.ChannelStatus?t.currentType="peerstate":"Link"===n.ChannelStatus&&"dialout"===n.ChannelType&&(t.currentType="dialTalking")),"innerDialing"===t.currentType&&"ChannelStatus"===n.Event&&n.Exten===e.statusVm.LoginInfo.SipNum&&("Hangup"===n.ChannelStatus?t.currentType="peerstate":"Link"===n.ChannelStatus&&"inner"===n.ChannelType&&(t.currentType="innerTalking")),"belling"===t.currentType&&"ChannelStatus"===n.Event&&n.Exten===e.statusVm.LoginInfo.SipNum&&("Hangup"===n.ChannelStatus?t.currentType="peerstate":"Link"===n.ChannelStatus&&("normal"===n.LinkedChannel.ChannelType?t.currentType="talking":"threeWayCall"===n.LinkedChannel.ChannelType?t.currentType="threeWayTalking":"transfer"===n.LinkedChannel.ChannelType?t.currentType="transfer":"dialTransfer"===n.LinkedChannel.ChannelType?t.currentType="dialTransfer":"dialout"===n.LinkedChannel.ChannelType&&(t.currentType="talking"))),"innerBelling"===t.currentType&&"ChannelStatus"===n.Event&&n.Exten===e.statusVm.LoginInfo.SipNum&&("Hangup"===n.ChannelStatus?t.currentType="peerstate":"Link"===n.ChannelStatus&&("threeWayCall"===n.LinkedChannel.ChannelType?t.currentType="threeWayTalking":"inner"===n.LinkedChannel.ChannelType&&(t.currentType="innerTalking"))),"listening"===t.currentType&&"ChannelStatus"===n.Event&&n.Exten===e.statusVm.LoginInfo.SipNum&&("Hangup"===n.ChannelStatus||"Up"===n.ChannelStatus&&"listen"===n.ChannelType)&&(t.currentType="peerstate"),"talking"===t.currentType&&"ChannelStatus"===n.Event&&n.Exten===e.statusVm.LoginInfo.SipNum&&("Hangup"===n.ChannelStatus?t.currentType="peerstate":"Link"===n.ChannelStatus&&"ThreeWayCall"===n.LinkedChannel.ChannelType&&(t.currentType="threeWayTalking")),"consultTalking"===t.currentType&&"ChannelStatus"===n.Event&&n.Exten===e.statusVm.LoginInfo.SipNum&&("Hangup"===n.ChannelStatus?t.currentType="peerstate":"Link"===n.ChannelStatus&&"ThreeWayCall"===n.LinkedChannel.ChannelType&&(t.currentType="threeWayTalking")),"consultWaiting"===t.currentType&&"ChannelStatus"===n.Event&&n.Exten===e.statusVm.LoginInfo.SipNum&&("Hangup"===n.ChannelStatus?t.currentType="peerstate":"Link"===n.ChannelStatus&&"ThreeWayCall"===n.LinkedChannel.ChannelType&&(t.currentType="threeWayTalking")),"transfer"===t.currentType&&"ChannelStatus"===n.Event&&n.Exten===e.statusVm.LoginInfo.SipNum&&("Hangup"===n.ChannelStatus?t.currentType="peerstate":"Link"===n.ChannelStatus&&"ThreeWayCall"===n.LinkedChannel.ChannelType&&(t.currentType="threeWayTalking")),"dialTransfer"===t.currentType&&"ChannelStatus"===n.Event&&n.Exten===e.statusVm.LoginInfo.SipNum&&("Hangup"===n.ChannelStatus?t.currentType="peerstate":"Link"===n.ChannelStatus&&"ThreeWayCall"===n.LinkedChannel.ChannelType&&(t.currentType="threeWayTalking")),"threeWayTalking"===t.currentType&&"ChannelStatus"===n.Event&&n.Exten===e.statusVm.LoginInfo.SipNum&&"Hangup"===n.ChannelStatus&&(t.currentType="peerstate"),"innerTalking"===t.currentType&&"ChannelStatus"===n.Event&&n.Exten===e.statusVm.LoginInfo.SipNum&&"Hangup"===n.ChannelStatus&&(t.currentType="peerstate"),"dialTalking"===t.currentType&&"ChannelStatus"===n.Event&&n.Exten===e.statusVm.LoginInfo.SipNum&&("Hangup"===n.ChannelStatus?t.currentType="peerstate":"Link"===n.ChannelStatus&&"ThreeWayCall"===n.LinkedChannel.ChannelType&&(t.currentType="threeWayTalking")),"listened"===t.currentType&&"ChannelStatus"===n.Event&&n.Exten===e.statusVm.LoginInfo.SipNum&&"Hangup"===n.ChannelStatus&&(t.currentType="peerstate"),"transferBelling"===t.currentType&&"ChannelStatus"===n.Event&&n.Exten===e.statusVm.LoginInfo.SipNum&&("Hangup"===n.ChannelStatus?t.currentType="peerstate":"Link"===n.ChannelStatus&&("normal"===n.LinkedChannel.ChannelType?t.currentType="talking":"threeWayCall"===n.LinkedChannel.ChannelType?t.currentType="threeWayTalking":"transfer"===n.LinkedChannel.ChannelType?t.currentType="transfer":"dialTransfer"===n.LinkedChannel.ChannelType&&(t.currentType="dialTransfer"))),"transferDialing"===t.currentType&&"ChannelStatus"===n.Event&&n.Exten===e.statusVm.LoginInfo.SipNum&&("Hangup"===n.ChannelStatus?t.currentType="peerstate":"Link"===n.ChannelStatus&&("normal"===n.LinkedChannel.ChannelType?t.currentType="talking":"threeWayCall"===n.LinkedChannel.ChannelType?t.currentType="threeWayTalking":"transfer"===n.LinkedChannel.ChannelType?t.currentType="transfer":"dialTransfer"===n.LinkedChannel.ChannelType&&(t.currentType="dialTransfer"))),"hold"===t.currentType&&"ChannelStatus"===n.Event&&n.Exten===e.statusVm.LoginInfo.SipNum&&("Hangup"===n.ChannelStatus?t.currentType="peerstate":"Link"===n.ChannelStatus&&"ThreeWayCall"===n.LinkedChannel.ChannelType&&(t.currentType="threeWayTalking")),n.Channel&&n.Exten===e.statusVm.LoginInfo.SipNum&&(e.channelMap.Channel=n.Channel),n.LinkedChannel&&n.LinkedChannel.Channel&&n.Exten===e.statusVm.LoginInfo.SipNum&&(e.channelMap.LinkedChannel=n.LinkedChannel.Channel),r!==t.currentType){console.log("\u72b6\u6001\u66f4\u65b0\u4e86",{type:e.currentType});var s={type:e.currentType};"peerstate"===t.currentType&&(s.typeValue=e.busyType||"0"),t.attachMessage(s)}else"peerstate"===t.currentType&&i!==e.busyType&&t.attachMessage({type:e.currentType,typeValue:e.busyType})}}),[2]}))}))},n.prototype.getAccountPbx=function(e){return vn(this,void 0,void 0,(function(){var t=this;return Sn(this,(function(r){return[2,new Promise((function(r){n.request(e.serviceAddress+"/sdk/v1/action",{verb:"POST",body:_n(_n({action:"common.getDicCache"},t.businessRequestObj),{data:{type:"accountPbx"}}),headers:{"Content-Type":"application/json"},success:function(n){r({success:!0,data:n.data})}})}))]}))}))},n.useDefaultDependencies=function(e){var t=e&&e.fetch||fetch,r=e&&e.Promise||Promise,i=e&&e.WebSocket||WebSocket;return{newWebSocket:function(n,e){return new i(n,e)},request:function(e,i){var s={method:i.verb,cache:"no-cache",referrerPolicy:"no-referrer",referrer:"no-referrer"};void 0!==i.body&&"GET"!==i.verb&&(s.body=JSON.stringify(i.body)),i.headers&&(s.headers=i.headers);var a=t(e,s).catch((function(n){return console.log(n),r.reject({message:"Probably a network error, is the gateway down?",error:n})}));if(void 0!==i.timeout){var o=new r((function(n,e){var t=setTimeout((function(){return clearTimeout(t),i.error({message:"Request timed out",timeout:i.timeout}),e({message:"Request timed out",timeout:i.timeout})}),i.timeout)}));a=r.race([a,o])}return a.then((function(e){return e.ok?typeof i.success==typeof n.noop?e.json().then((function(n){i.success(n)})).catch((function(n){return i.error({message:"Failed to parse response body",error:n,response:e}),r.reject({message:"Failed to parse response body",error:n,response:e})})):void 0:(i.error({message:"API call failed",response:e}),r.reject({message:"API call failed",response:e}))})).catch((function(e){typeof i.error==typeof n.noop&&i.error(e.message||"<< internal error >>",e)})),a}}},n.prototype.attachMessage=function(n){this.eventAddInfo.eventTipKey&&(n.eventTipKey=this.eventAddInfo.eventTipKey),this.attachRegistrationStatus||(this.attachCurrentEvent=n),this.attachEventCallbacks.message(n),this.eventAddInfo.eventTipKey=""},Object.defineProperty(n.prototype,"callApi",{get:function(){return this._callApi()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"agentApi",{get:function(){return this._agentApi()},enumerable:!1,configurable:!0}),n}();e.default=En}]).default}));